var ol=Object.defineProperty;var Hr=t=>{throw TypeError(t)};var ml=(t,a,s)=>a in t?ol(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s;var Xe=(t,a,s)=>ml(t,typeof a!="symbol"?a+"":a,s),Ha=(t,a,s)=>a.has(t)||Hr("Cannot "+s);var f=(t,a,s)=>(Ha(t,a,"read from private field"),s?s.call(t):a.get(t)),Y=(t,a,s)=>a.has(t)?Hr("Cannot add the same private member more than once"):a instanceof WeakSet?a.add(t):a.set(t,s),M=(t,a,s,r)=>(Ha(t,a,"write to private field"),r?r.call(t,s):a.set(t,s),s),ie=(t,a,s)=>(Ha(t,a,"access private method"),s);var Sa=(t,a,s,r)=>({set _(n){M(t,a,n,s)},get _(){return f(t,a,r)}});import{j as e,L as un,C as ye,T as lt,R as ma,a as pn,M as $r,b as Ce,G as Ta,c as oe,d as ar,B as xl,S as Ar,e as gn,f as hl,g as ws,h as ul,U as rr,i as pl,W as gl,k as fl,X as jl,l as we,m as _s,n as ir,o as nr,E as lr,p as ns,A as yl,q as Fa,D as $e,r as Be,s as Ke,t as cs,u as bs,F as dt,v as fn,w as Ie,x as Tt,y as Ft,z as He,H as xa,I as Ze,J as ea,N as Pr,K as vl,O as zs,Q as ot,V as mt,Y as xt,Z as Nl,_ as Bs,$ as bl,a0 as wl,a1 as Zr,a2 as jn,a3 as Fe,a4 as Jr,a5 as Xr,a6 as _l,a7 as nt,a8 as Za,a9 as yn,aa as ei,ab as Ua,ac as vn,ad as Nn,ae as bn,af as Sl,ag as kl}from"./ui-gt3uSSmr.js";import{b as Cl,r as y,g as $l,a as Ee}from"./vendor-BKU87Gzz.js";import{O as wn,N as si,u as _n,a as Sn,L as It,b as Al,c as Dt,R as Pl,d as z,B as Rl}from"./router-Z3oXCE2A.js";import{a as El,t as Tl,c as Fl}from"./utils-Ci_t0cun.js";import{R as ne,A as Ps,C as ue,X as pe,Y as xe,T as le,a as fs,B as ds,b as os,P as Rs,c as Es,d as Ts,L as At,e as qs,f as Ba}from"./charts-K3ijCzdr.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();var cr={},ti=Cl;cr.createRoot=ti.createRoot,cr.hydrateRoot=ti.hydrateRoot;var sa=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ul={setTimeout:(t,a)=>setTimeout(t,a),clearTimeout:t=>clearTimeout(t),setInterval:(t,a)=>setInterval(t,a),clearInterval:t=>clearInterval(t)},Zs,Cr,tn,Ll=(tn=class{constructor(){Y(this,Zs,Ul);Y(this,Cr,!1)}setTimeoutProvider(t){M(this,Zs,t)}setTimeout(t,a){return f(this,Zs).setTimeout(t,a)}clearTimeout(t){f(this,Zs).clearTimeout(t)}setInterval(t,a){return f(this,Zs).setInterval(t,a)}clearInterval(t){f(this,Zs).clearInterval(t)}},Zs=new WeakMap,Cr=new WeakMap,tn),pt=new Ll;function Dl(t){setTimeout(t,0)}var Ct=typeof window>"u"||"Deno"in globalThis;function We(){}function Ol(t,a){return typeof t=="function"?t(a):t}function dr(t){return typeof t=="number"&&t>=0&&t!==1/0}function kn(t,a){return Math.max(t+(a||0)-Date.now(),0)}function ct(t,a){return typeof t=="function"?t(a):t}function us(t,a){return typeof t=="function"?t(a):t}function ai(t,a){const{type:s="all",exact:r,fetchStatus:n,predicate:i,queryKey:l,stale:c}=t;if(l){if(r){if(a.queryHash!==Rr(l,a.options))return!1}else if(!ha(a.queryKey,l))return!1}if(s!=="all"){const d=a.isActive();if(s==="active"&&!d||s==="inactive"&&d)return!1}return!(typeof c=="boolean"&&a.isStale()!==c||n&&n!==a.state.fetchStatus||i&&!i(a))}function ri(t,a){const{exact:s,status:r,predicate:n,mutationKey:i}=t;if(i){if(!a.options.mutationKey)return!1;if(s){if($t(a.options.mutationKey)!==$t(i))return!1}else if(!ha(a.options.mutationKey,i))return!1}return!(r&&a.state.status!==r||n&&!n(a))}function Rr(t,a){return((a==null?void 0:a.queryKeyHashFn)||$t)(t)}function $t(t){return JSON.stringify(t,(a,s)=>or(s)?Object.keys(s).sort().reduce((r,n)=>(r[n]=s[n],r),{}):s)}function ha(t,a){return t===a?!0:typeof t!=typeof a?!1:t&&a&&typeof t=="object"&&typeof a=="object"?Object.keys(a).every(s=>ha(t[s],a[s])):!1}var Il=Object.prototype.hasOwnProperty;function Cn(t,a){if(t===a)return t;const s=ii(t)&&ii(a);if(!s&&!(or(t)&&or(a)))return a;const n=(s?t:Object.keys(t)).length,i=s?a:Object.keys(a),l=i.length,c=s?new Array(l):{};let d=0;for(let u=0;u<l;u++){const o=s?u:i[u],g=t[o],m=a[o];if(g===m){c[o]=g,(s?u<n:Il.call(t,o))&&d++;continue}if(g===null||m===null||typeof g!="object"||typeof m!="object"){c[o]=m;continue}const x=Cn(g,m);c[o]=x,x===g&&d++}return n===l&&d===n?t:c}function La(t,a){if(!a||Object.keys(t).length!==Object.keys(a).length)return!1;for(const s in t)if(t[s]!==a[s])return!1;return!0}function ii(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function or(t){if(!ni(t))return!1;const a=t.constructor;if(a===void 0)return!0;const s=a.prototype;return!(!ni(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function ni(t){return Object.prototype.toString.call(t)==="[object Object]"}function Ml(t){return new Promise(a=>{pt.setTimeout(a,t)})}function mr(t,a,s){return typeof s.structuralSharing=="function"?s.structuralSharing(t,a):s.structuralSharing!==!1?Cn(t,a):a}function Vl(t,a,s=0){const r=[...t,a];return s&&r.length>s?r.slice(1):r}function Bl(t,a,s=0){const r=[a,...t];return s&&r.length>s?r.slice(0,-1):r}var Er=Symbol();function $n(t,a){return!t.queryFn&&(a!=null&&a.initialPromise)?()=>a.initialPromise:!t.queryFn||t.queryFn===Er?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function An(t,a){return typeof t=="function"?t(...a):!!t}var jt,Js,Mt,an,Kl=(an=class extends sa{constructor(){super();Y(this,jt);Y(this,Js);Y(this,Mt);M(this,Mt,a=>{if(!Ct&&window.addEventListener){const s=()=>a();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){f(this,Js)||this.setEventListener(f(this,Mt))}onUnsubscribe(){var a;this.hasListeners()||((a=f(this,Js))==null||a.call(this),M(this,Js,void 0))}setEventListener(a){var s;M(this,Mt,a),(s=f(this,Js))==null||s.call(this),M(this,Js,a(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(a){f(this,jt)!==a&&(M(this,jt,a),this.onFocus())}onFocus(){const a=this.isFocused();this.listeners.forEach(s=>{s(a)})}isFocused(){var a;return typeof f(this,jt)=="boolean"?f(this,jt):((a=globalThis.document)==null?void 0:a.visibilityState)!=="hidden"}},jt=new WeakMap,Js=new WeakMap,Mt=new WeakMap,an),Tr=new Kl;function xr(){let t,a;const s=new Promise((n,i)=>{t=n,a=i});s.status="pending",s.catch(()=>{});function r(n){Object.assign(s,n),delete s.resolve,delete s.reject}return s.resolve=n=>{r({status:"fulfilled",value:n}),t(n)},s.reject=n=>{r({status:"rejected",reason:n}),a(n)},s}var ql=Dl;function Yl(){let t=[],a=0,s=c=>{c()},r=c=>{c()},n=ql;const i=c=>{a?t.push(c):n(()=>{s(c)})},l=()=>{const c=t;t=[],c.length&&n(()=>{r(()=>{c.forEach(d=>{s(d)})})})};return{batch:c=>{let d;a++;try{d=c()}finally{a--,a||l()}return d},batchCalls:c=>(...d)=>{i(()=>{c(...d)})},schedule:i,setNotifyFunction:c=>{s=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{n=c}}}var De=Yl(),Vt,Xs,Bt,rn,zl=(rn=class extends sa{constructor(){super();Y(this,Vt,!0);Y(this,Xs);Y(this,Bt);M(this,Bt,a=>{if(!Ct&&window.addEventListener){const s=()=>a(!0),r=()=>a(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",r)}}})}onSubscribe(){f(this,Xs)||this.setEventListener(f(this,Bt))}onUnsubscribe(){var a;this.hasListeners()||((a=f(this,Xs))==null||a.call(this),M(this,Xs,void 0))}setEventListener(a){var s;M(this,Bt,a),(s=f(this,Xs))==null||s.call(this),M(this,Xs,a(this.setOnline.bind(this)))}setOnline(a){f(this,Vt)!==a&&(M(this,Vt,a),this.listeners.forEach(r=>{r(a)}))}isOnline(){return f(this,Vt)}},Vt=new WeakMap,Xs=new WeakMap,Bt=new WeakMap,rn),Da=new zl;function Ql(t){return Math.min(1e3*2**t,3e4)}function Pn(t){return(t??"online")==="online"?Da.isOnline():!0}var hr=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Rn(t){let a=!1,s=0,r;const n=xr(),i=()=>n.status!=="pending",l=N=>{var p;if(!i()){const h=new hr(N);m(h),(p=t.onCancel)==null||p.call(t,h)}},c=()=>{a=!0},d=()=>{a=!1},u=()=>Tr.isFocused()&&(t.networkMode==="always"||Da.isOnline())&&t.canRun(),o=()=>Pn(t.networkMode)&&t.canRun(),g=N=>{i()||(r==null||r(),n.resolve(N))},m=N=>{i()||(r==null||r(),n.reject(N))},x=()=>new Promise(N=>{var p;r=h=>{(i()||u())&&N(h)},(p=t.onPause)==null||p.call(t)}).then(()=>{var N;r=void 0,i()||(N=t.onContinue)==null||N.call(t)}),$=()=>{if(i())return;let N;const p=s===0?t.initialPromise:void 0;try{N=p??t.fn()}catch(h){N=Promise.reject(h)}Promise.resolve(N).then(g).catch(h=>{var j;if(i())return;const S=t.retry??(Ct?0:3),A=t.retryDelay??Ql,w=typeof A=="function"?A(s,h):A,b=S===!0||typeof S=="number"&&s<S||typeof S=="function"&&S(s,h);if(a||!b){m(h);return}s++,(j=t.onFail)==null||j.call(t,s,h),Ml(w).then(()=>u()?void 0:x()).then(()=>{a?m(h):$()})})};return{promise:n,status:()=>n.status,cancel:l,continue:()=>(r==null||r(),n),cancelRetry:c,continueRetry:d,canStart:o,start:()=>(o()?$():x().then($),n)}}var yt,nn,En=(nn=class{constructor(){Y(this,yt)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),dr(this.gcTime)&&M(this,yt,pt.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Ct?1/0:5*60*1e3))}clearGcTimeout(){f(this,yt)&&(pt.clearTimeout(f(this,yt)),M(this,yt,void 0))}},yt=new WeakMap,nn),vt,Kt,hs,Nt,Ve,pa,bt,js,Ds,ln,Wl=(ln=class extends En{constructor(a){super();Y(this,js);Y(this,vt);Y(this,Kt);Y(this,hs);Y(this,Nt);Y(this,Ve);Y(this,pa);Y(this,bt);M(this,bt,!1),M(this,pa,a.defaultOptions),this.setOptions(a.options),this.observers=[],M(this,Nt,a.client),M(this,hs,f(this,Nt).getQueryCache()),this.queryKey=a.queryKey,this.queryHash=a.queryHash,M(this,vt,li(this.options)),this.state=a.state??f(this,vt),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var a;return(a=f(this,Ve))==null?void 0:a.promise}setOptions(a){if(this.options={...f(this,pa),...a},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const s=li(this.options);s.data!==void 0&&(this.setData(s.data,{updatedAt:s.dataUpdatedAt,manual:!0}),M(this,vt,s))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&f(this,hs).remove(this)}setData(a,s){const r=mr(this.state.data,a,this.options);return ie(this,js,Ds).call(this,{data:r,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),r}setState(a,s){ie(this,js,Ds).call(this,{type:"setState",state:a,setStateOptions:s})}cancel(a){var r,n;const s=(r=f(this,Ve))==null?void 0:r.promise;return(n=f(this,Ve))==null||n.cancel(a),s?s.then(We).catch(We):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(f(this,vt))}isActive(){return this.observers.some(a=>us(a.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Er||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(a=>ct(a.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(a=>a.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(a=0){return this.state.data===void 0?!0:a==="static"?!1:this.state.isInvalidated?!0:!kn(this.state.dataUpdatedAt,a)}onFocus(){var s;const a=this.observers.find(r=>r.shouldFetchOnWindowFocus());a==null||a.refetch({cancelRefetch:!1}),(s=f(this,Ve))==null||s.continue()}onOnline(){var s;const a=this.observers.find(r=>r.shouldFetchOnReconnect());a==null||a.refetch({cancelRefetch:!1}),(s=f(this,Ve))==null||s.continue()}addObserver(a){this.observers.includes(a)||(this.observers.push(a),this.clearGcTimeout(),f(this,hs).notify({type:"observerAdded",query:this,observer:a}))}removeObserver(a){this.observers.includes(a)&&(this.observers=this.observers.filter(s=>s!==a),this.observers.length||(f(this,Ve)&&(f(this,bt)?f(this,Ve).cancel({revert:!0}):f(this,Ve).cancelRetry()),this.scheduleGc()),f(this,hs).notify({type:"observerRemoved",query:this,observer:a}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ie(this,js,Ds).call(this,{type:"invalidate"})}async fetch(a,s){var d,u,o,g,m,x,$,N,p,h,S,A;if(this.state.fetchStatus!=="idle"&&((d=f(this,Ve))==null?void 0:d.status())!=="rejected"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(f(this,Ve))return f(this,Ve).continueRetry(),f(this,Ve).promise}if(a&&this.setOptions(a),!this.options.queryFn){const w=this.observers.find(b=>b.options.queryFn);w&&this.setOptions(w.options)}const r=new AbortController,n=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(M(this,bt,!0),r.signal)})},i=()=>{const w=$n(this.options,s),j=(()=>{const T={client:f(this,Nt),queryKey:this.queryKey,meta:this.meta};return n(T),T})();return M(this,bt,!1),this.options.persister?this.options.persister(w,j,this):w(j)},c=(()=>{const w={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:f(this,Nt),state:this.state,fetchFn:i};return n(w),w})();(u=this.options.behavior)==null||u.onFetch(c,this),M(this,Kt,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((o=c.fetchOptions)==null?void 0:o.meta))&&ie(this,js,Ds).call(this,{type:"fetch",meta:(g=c.fetchOptions)==null?void 0:g.meta}),M(this,Ve,Rn({initialPromise:s==null?void 0:s.initialPromise,fn:c.fetchFn,onCancel:w=>{w instanceof hr&&w.revert&&this.setState({...f(this,Kt),fetchStatus:"idle"}),r.abort()},onFail:(w,b)=>{ie(this,js,Ds).call(this,{type:"failed",failureCount:w,error:b})},onPause:()=>{ie(this,js,Ds).call(this,{type:"pause"})},onContinue:()=>{ie(this,js,Ds).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0}));try{const w=await f(this,Ve).start();if(w===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(w),(x=(m=f(this,hs).config).onSuccess)==null||x.call(m,w,this),(N=($=f(this,hs).config).onSettled)==null||N.call($,w,this.state.error,this),w}catch(w){if(w instanceof hr){if(w.silent)return f(this,Ve).promise;if(w.revert){if(this.state.data===void 0)throw w;return this.state.data}}throw ie(this,js,Ds).call(this,{type:"error",error:w}),(h=(p=f(this,hs).config).onError)==null||h.call(p,w,this),(A=(S=f(this,hs).config).onSettled)==null||A.call(S,this.state.data,w,this),w}finally{this.scheduleGc()}}},vt=new WeakMap,Kt=new WeakMap,hs=new WeakMap,Nt=new WeakMap,Ve=new WeakMap,pa=new WeakMap,bt=new WeakMap,js=new WeakSet,Ds=function(a){const s=r=>{switch(a.type){case"failed":return{...r,fetchFailureCount:a.failureCount,fetchFailureReason:a.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Tn(r.data,this.options),fetchMeta:a.meta??null};case"success":const n={...r,data:a.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:a.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!a.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return M(this,Kt,a.manual?n:void 0),n;case"error":const i=a.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...a.state}}};this.state=s(this.state),De.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),f(this,hs).notify({query:this,type:"updated",action:a})})},ln);function Tn(t,a){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Pn(a.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function li(t){const a=typeof t.initialData=="function"?t.initialData():t.initialData,s=a!==void 0,r=s?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:a,dataUpdateCount:0,dataUpdatedAt:s?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var es,me,ga,ze,wt,qt,Os,et,fa,Yt,zt,_t,St,st,Qt,he,la,ur,pr,gr,fr,jr,yr,vr,Fn,cn,Gl=(cn=class extends sa{constructor(a,s){super();Y(this,he);Y(this,es);Y(this,me);Y(this,ga);Y(this,ze);Y(this,wt);Y(this,qt);Y(this,Os);Y(this,et);Y(this,fa);Y(this,Yt);Y(this,zt);Y(this,_t);Y(this,St);Y(this,st);Y(this,Qt,new Set);this.options=s,M(this,es,a),M(this,et,null),M(this,Os,xr()),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(f(this,me).addObserver(this),ci(f(this,me),this.options)?ie(this,he,la).call(this):this.updateResult(),ie(this,he,fr).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Nr(f(this,me),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Nr(f(this,me),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ie(this,he,jr).call(this),ie(this,he,yr).call(this),f(this,me).removeObserver(this)}setOptions(a){const s=this.options,r=f(this,me);if(this.options=f(this,es).defaultQueryOptions(a),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof us(this.options.enabled,f(this,me))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ie(this,he,vr).call(this),f(this,me).setOptions(this.options),s._defaulted&&!La(this.options,s)&&f(this,es).getQueryCache().notify({type:"observerOptionsUpdated",query:f(this,me),observer:this});const n=this.hasListeners();n&&di(f(this,me),r,this.options,s)&&ie(this,he,la).call(this),this.updateResult(),n&&(f(this,me)!==r||us(this.options.enabled,f(this,me))!==us(s.enabled,f(this,me))||ct(this.options.staleTime,f(this,me))!==ct(s.staleTime,f(this,me)))&&ie(this,he,ur).call(this);const i=ie(this,he,pr).call(this);n&&(f(this,me)!==r||us(this.options.enabled,f(this,me))!==us(s.enabled,f(this,me))||i!==f(this,st))&&ie(this,he,gr).call(this,i)}getOptimisticResult(a){const s=f(this,es).getQueryCache().build(f(this,es),a),r=this.createResult(s,a);return Zl(this,r)&&(M(this,ze,r),M(this,qt,this.options),M(this,wt,f(this,me).state)),r}getCurrentResult(){return f(this,ze)}trackResult(a,s){return new Proxy(a,{get:(r,n)=>(this.trackProp(n),s==null||s(n),n==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&f(this,Os).status==="pending"&&f(this,Os).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,n))})}trackProp(a){f(this,Qt).add(a)}getCurrentQuery(){return f(this,me)}refetch({...a}={}){return this.fetch({...a})}fetchOptimistic(a){const s=f(this,es).defaultQueryOptions(a),r=f(this,es).getQueryCache().build(f(this,es),s);return r.fetch().then(()=>this.createResult(r,s))}fetch(a){return ie(this,he,la).call(this,{...a,cancelRefetch:a.cancelRefetch??!0}).then(()=>(this.updateResult(),f(this,ze)))}createResult(a,s){var D;const r=f(this,me),n=this.options,i=f(this,ze),l=f(this,wt),c=f(this,qt),u=a!==r?a.state:f(this,ga),{state:o}=a;let g={...o},m=!1,x;if(s._optimisticResults){const R=this.hasListeners(),se=!R&&ci(a,s),q=R&&di(a,r,s,n);(se||q)&&(g={...g,...Tn(o.data,a.options)}),s._optimisticResults==="isRestoring"&&(g.fetchStatus="idle")}let{error:$,errorUpdatedAt:N,status:p}=g;x=g.data;let h=!1;if(s.placeholderData!==void 0&&x===void 0&&p==="pending"){let R;i!=null&&i.isPlaceholderData&&s.placeholderData===(c==null?void 0:c.placeholderData)?(R=i.data,h=!0):R=typeof s.placeholderData=="function"?s.placeholderData((D=f(this,zt))==null?void 0:D.state.data,f(this,zt)):s.placeholderData,R!==void 0&&(p="success",x=mr(i==null?void 0:i.data,R,s),m=!0)}if(s.select&&x!==void 0&&!h)if(i&&x===(l==null?void 0:l.data)&&s.select===f(this,fa))x=f(this,Yt);else try{M(this,fa,s.select),x=s.select(x),x=mr(i==null?void 0:i.data,x,s),M(this,Yt,x),M(this,et,null)}catch(R){M(this,et,R)}f(this,et)&&($=f(this,et),x=f(this,Yt),N=Date.now(),p="error");const S=g.fetchStatus==="fetching",A=p==="pending",w=p==="error",b=A&&S,j=x!==void 0,k={status:p,fetchStatus:g.fetchStatus,isPending:A,isSuccess:p==="success",isError:w,isInitialLoading:b,isLoading:b,data:x,dataUpdatedAt:g.dataUpdatedAt,error:$,errorUpdatedAt:N,failureCount:g.fetchFailureCount,failureReason:g.fetchFailureReason,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>u.dataUpdateCount||g.errorUpdateCount>u.errorUpdateCount,isFetching:S,isRefetching:S&&!A,isLoadingError:w&&!j,isPaused:g.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:w&&j,isStale:Fr(a,s),refetch:this.refetch,promise:f(this,Os),isEnabled:us(s.enabled,a)!==!1};if(this.options.experimental_prefetchInRender){const R=Z=>{k.status==="error"?Z.reject(k.error):k.data!==void 0&&Z.resolve(k.data)},se=()=>{const Z=M(this,Os,k.promise=xr());R(Z)},q=f(this,Os);switch(q.status){case"pending":a.queryHash===r.queryHash&&R(q);break;case"fulfilled":(k.status==="error"||k.data!==q.value)&&se();break;case"rejected":(k.status!=="error"||k.error!==q.reason)&&se();break}}return k}updateResult(){const a=f(this,ze),s=this.createResult(f(this,me),this.options);if(M(this,wt,f(this,me).state),M(this,qt,this.options),f(this,wt).data!==void 0&&M(this,zt,f(this,me)),La(s,a))return;M(this,ze,s);const r=()=>{if(!a)return!0;const{notifyOnChangeProps:n}=this.options,i=typeof n=="function"?n():n;if(i==="all"||!i&&!f(this,Qt).size)return!0;const l=new Set(i??f(this,Qt));return this.options.throwOnError&&l.add("error"),Object.keys(f(this,ze)).some(c=>{const d=c;return f(this,ze)[d]!==a[d]&&l.has(d)})};ie(this,he,Fn).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ie(this,he,fr).call(this)}},es=new WeakMap,me=new WeakMap,ga=new WeakMap,ze=new WeakMap,wt=new WeakMap,qt=new WeakMap,Os=new WeakMap,et=new WeakMap,fa=new WeakMap,Yt=new WeakMap,zt=new WeakMap,_t=new WeakMap,St=new WeakMap,st=new WeakMap,Qt=new WeakMap,he=new WeakSet,la=function(a){ie(this,he,vr).call(this);let s=f(this,me).fetch(this.options,a);return a!=null&&a.throwOnError||(s=s.catch(We)),s},ur=function(){ie(this,he,jr).call(this);const a=ct(this.options.staleTime,f(this,me));if(Ct||f(this,ze).isStale||!dr(a))return;const r=kn(f(this,ze).dataUpdatedAt,a)+1;M(this,_t,pt.setTimeout(()=>{f(this,ze).isStale||this.updateResult()},r))},pr=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(f(this,me)):this.options.refetchInterval)??!1},gr=function(a){ie(this,he,yr).call(this),M(this,st,a),!(Ct||us(this.options.enabled,f(this,me))===!1||!dr(f(this,st))||f(this,st)===0)&&M(this,St,pt.setInterval(()=>{(this.options.refetchIntervalInBackground||Tr.isFocused())&&ie(this,he,la).call(this)},f(this,st)))},fr=function(){ie(this,he,ur).call(this),ie(this,he,gr).call(this,ie(this,he,pr).call(this))},jr=function(){f(this,_t)&&(pt.clearTimeout(f(this,_t)),M(this,_t,void 0))},yr=function(){f(this,St)&&(pt.clearInterval(f(this,St)),M(this,St,void 0))},vr=function(){const a=f(this,es).getQueryCache().build(f(this,es),this.options);if(a===f(this,me))return;const s=f(this,me);M(this,me,a),M(this,ga,a.state),this.hasListeners()&&(s==null||s.removeObserver(this),a.addObserver(this))},Fn=function(a){De.batch(()=>{a.listeners&&this.listeners.forEach(s=>{s(f(this,ze))}),f(this,es).getQueryCache().notify({query:f(this,me),type:"observerResultsUpdated"})})},cn);function Hl(t,a){return us(a.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&a.retryOnMount===!1)}function ci(t,a){return Hl(t,a)||t.state.data!==void 0&&Nr(t,a,a.refetchOnMount)}function Nr(t,a,s){if(us(a.enabled,t)!==!1&&ct(a.staleTime,t)!=="static"){const r=typeof s=="function"?s(t):s;return r==="always"||r!==!1&&Fr(t,a)}return!1}function di(t,a,s,r){return(t!==a||us(r.enabled,t)===!1)&&(!s.suspense||t.state.status!=="error")&&Fr(t,s)}function Fr(t,a){return us(a.enabled,t)!==!1&&t.isStaleByTime(ct(a.staleTime,t))}function Zl(t,a){return!La(t.getCurrentResult(),a)}function oi(t){return{onFetch:(a,s)=>{var o,g,m,x,$;const r=a.options,n=(m=(g=(o=a.fetchOptions)==null?void 0:o.meta)==null?void 0:g.fetchMore)==null?void 0:m.direction,i=((x=a.state.data)==null?void 0:x.pages)||[],l=(($=a.state.data)==null?void 0:$.pageParams)||[];let c={pages:[],pageParams:[]},d=0;const u=async()=>{let N=!1;const p=A=>{Object.defineProperty(A,"signal",{enumerable:!0,get:()=>(a.signal.aborted?N=!0:a.signal.addEventListener("abort",()=>{N=!0}),a.signal)})},h=$n(a.options,a.fetchOptions),S=async(A,w,b)=>{if(N)return Promise.reject();if(w==null&&A.pages.length)return Promise.resolve(A);const T=(()=>{const se={client:a.client,queryKey:a.queryKey,pageParam:w,direction:b?"backward":"forward",meta:a.options.meta};return p(se),se})(),k=await h(T),{maxPages:D}=a.options,R=b?Bl:Vl;return{pages:R(A.pages,k,D),pageParams:R(A.pageParams,w,D)}};if(n&&i.length){const A=n==="backward",w=A?Jl:mi,b={pages:i,pageParams:l},j=w(r,b);c=await S(b,j,A)}else{const A=t??i.length;do{const w=d===0?l[0]??r.initialPageParam:mi(r,c);if(d>0&&w==null)break;c=await S(c,w),d++}while(d<A)}return c};a.options.persister?a.fetchFn=()=>{var N,p;return(p=(N=a.options).persister)==null?void 0:p.call(N,u,{client:a.client,queryKey:a.queryKey,meta:a.options.meta,signal:a.signal},s)}:a.fetchFn=u}}}function mi(t,{pages:a,pageParams:s}){const r=a.length-1;return a.length>0?t.getNextPageParam(a[r],a,s[r],s):void 0}function Jl(t,{pages:a,pageParams:s}){var r;return a.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,a[0],a,s[0],s):void 0}var ja,ks,Qe,kt,Cs,Ws,dn,Xl=(dn=class extends En{constructor(a){super();Y(this,Cs);Y(this,ja);Y(this,ks);Y(this,Qe);Y(this,kt);M(this,ja,a.client),this.mutationId=a.mutationId,M(this,Qe,a.mutationCache),M(this,ks,[]),this.state=a.state||Un(),this.setOptions(a.options),this.scheduleGc()}setOptions(a){this.options=a,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(a){f(this,ks).includes(a)||(f(this,ks).push(a),this.clearGcTimeout(),f(this,Qe).notify({type:"observerAdded",mutation:this,observer:a}))}removeObserver(a){M(this,ks,f(this,ks).filter(s=>s!==a)),this.scheduleGc(),f(this,Qe).notify({type:"observerRemoved",mutation:this,observer:a})}optionalRemove(){f(this,ks).length||(this.state.status==="pending"?this.scheduleGc():f(this,Qe).remove(this))}continue(){var a;return((a=f(this,kt))==null?void 0:a.continue())??this.execute(this.state.variables)}async execute(a){var l,c,d,u,o,g,m,x,$,N,p,h,S,A,w,b,j,T,k,D;const s=()=>{ie(this,Cs,Ws).call(this,{type:"continue"})},r={client:f(this,ja),meta:this.options.meta,mutationKey:this.options.mutationKey};M(this,kt,Rn({fn:()=>this.options.mutationFn?this.options.mutationFn(a,r):Promise.reject(new Error("No mutationFn found")),onFail:(R,se)=>{ie(this,Cs,Ws).call(this,{type:"failed",failureCount:R,error:se})},onPause:()=>{ie(this,Cs,Ws).call(this,{type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>f(this,Qe).canRun(this)}));const n=this.state.status==="pending",i=!f(this,kt).canStart();try{if(n)s();else{ie(this,Cs,Ws).call(this,{type:"pending",variables:a,isPaused:i}),await((c=(l=f(this,Qe).config).onMutate)==null?void 0:c.call(l,a,this,r));const se=await((u=(d=this.options).onMutate)==null?void 0:u.call(d,a,r));se!==this.state.context&&ie(this,Cs,Ws).call(this,{type:"pending",context:se,variables:a,isPaused:i})}const R=await f(this,kt).start();return await((g=(o=f(this,Qe).config).onSuccess)==null?void 0:g.call(o,R,a,this.state.context,this,r)),await((x=(m=this.options).onSuccess)==null?void 0:x.call(m,R,a,this.state.context,r)),await((N=($=f(this,Qe).config).onSettled)==null?void 0:N.call($,R,null,this.state.variables,this.state.context,this,r)),await((h=(p=this.options).onSettled)==null?void 0:h.call(p,R,null,a,this.state.context,r)),ie(this,Cs,Ws).call(this,{type:"success",data:R}),R}catch(R){try{throw await((A=(S=f(this,Qe).config).onError)==null?void 0:A.call(S,R,a,this.state.context,this,r)),await((b=(w=this.options).onError)==null?void 0:b.call(w,R,a,this.state.context,r)),await((T=(j=f(this,Qe).config).onSettled)==null?void 0:T.call(j,void 0,R,this.state.variables,this.state.context,this,r)),await((D=(k=this.options).onSettled)==null?void 0:D.call(k,void 0,R,a,this.state.context,r)),R}finally{ie(this,Cs,Ws).call(this,{type:"error",error:R})}}finally{f(this,Qe).runNext(this)}}},ja=new WeakMap,ks=new WeakMap,Qe=new WeakMap,kt=new WeakMap,Cs=new WeakSet,Ws=function(a){const s=r=>{switch(a.type){case"failed":return{...r,failureCount:a.failureCount,failureReason:a.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:a.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:a.isPaused,status:"pending",variables:a.variables,submittedAt:Date.now()};case"success":return{...r,data:a.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:a.error,failureCount:r.failureCount+1,failureReason:a.error,isPaused:!1,status:"error"}}};this.state=s(this.state),De.batch(()=>{f(this,ks).forEach(r=>{r.onMutationUpdate(a)}),f(this,Qe).notify({mutation:this,type:"updated",action:a})})},dn);function Un(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Is,ys,ya,on,ec=(on=class extends sa{constructor(a={}){super();Y(this,Is);Y(this,ys);Y(this,ya);this.config=a,M(this,Is,new Set),M(this,ys,new Map),M(this,ya,0)}build(a,s,r){const n=new Xl({client:a,mutationCache:this,mutationId:++Sa(this,ya)._,options:a.defaultMutationOptions(s),state:r});return this.add(n),n}add(a){f(this,Is).add(a);const s=ka(a);if(typeof s=="string"){const r=f(this,ys).get(s);r?r.push(a):f(this,ys).set(s,[a])}this.notify({type:"added",mutation:a})}remove(a){if(f(this,Is).delete(a)){const s=ka(a);if(typeof s=="string"){const r=f(this,ys).get(s);if(r)if(r.length>1){const n=r.indexOf(a);n!==-1&&r.splice(n,1)}else r[0]===a&&f(this,ys).delete(s)}}this.notify({type:"removed",mutation:a})}canRun(a){const s=ka(a);if(typeof s=="string"){const r=f(this,ys).get(s),n=r==null?void 0:r.find(i=>i.state.status==="pending");return!n||n===a}else return!0}runNext(a){var r;const s=ka(a);if(typeof s=="string"){const n=(r=f(this,ys).get(s))==null?void 0:r.find(i=>i!==a&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}else return Promise.resolve()}clear(){De.batch(()=>{f(this,Is).forEach(a=>{this.notify({type:"removed",mutation:a})}),f(this,Is).clear(),f(this,ys).clear()})}getAll(){return Array.from(f(this,Is))}find(a){const s={exact:!0,...a};return this.getAll().find(r=>ri(s,r))}findAll(a={}){return this.getAll().filter(s=>ri(a,s))}notify(a){De.batch(()=>{this.listeners.forEach(s=>{s(a)})})}resumePausedMutations(){const a=this.getAll().filter(s=>s.state.isPaused);return De.batch(()=>Promise.all(a.map(s=>s.continue().catch(We))))}},Is=new WeakMap,ys=new WeakMap,ya=new WeakMap,on);function ka(t){var a;return(a=t.options.scope)==null?void 0:a.id}var Ms,tt,ss,Vs,Ks,Pa,br,mn,sc=(mn=class extends sa{constructor(s,r){super();Y(this,Ks);Y(this,Ms);Y(this,tt);Y(this,ss);Y(this,Vs);M(this,Ms,s),this.setOptions(r),this.bindMethods(),ie(this,Ks,Pa).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(s){var n;const r=this.options;this.options=f(this,Ms).defaultMutationOptions(s),La(this.options,r)||f(this,Ms).getMutationCache().notify({type:"observerOptionsUpdated",mutation:f(this,ss),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&$t(r.mutationKey)!==$t(this.options.mutationKey)?this.reset():((n=f(this,ss))==null?void 0:n.state.status)==="pending"&&f(this,ss).setOptions(this.options)}onUnsubscribe(){var s;this.hasListeners()||(s=f(this,ss))==null||s.removeObserver(this)}onMutationUpdate(s){ie(this,Ks,Pa).call(this),ie(this,Ks,br).call(this,s)}getCurrentResult(){return f(this,tt)}reset(){var s;(s=f(this,ss))==null||s.removeObserver(this),M(this,ss,void 0),ie(this,Ks,Pa).call(this),ie(this,Ks,br).call(this)}mutate(s,r){var n;return M(this,Vs,r),(n=f(this,ss))==null||n.removeObserver(this),M(this,ss,f(this,Ms).getMutationCache().build(f(this,Ms),this.options)),f(this,ss).addObserver(this),f(this,ss).execute(s)}},Ms=new WeakMap,tt=new WeakMap,ss=new WeakMap,Vs=new WeakMap,Ks=new WeakSet,Pa=function(){var r;const s=((r=f(this,ss))==null?void 0:r.state)??Un();M(this,tt,{...s,isPending:s.status==="pending",isSuccess:s.status==="success",isError:s.status==="error",isIdle:s.status==="idle",mutate:this.mutate,reset:this.reset})},br=function(s){De.batch(()=>{var r,n,i,l,c,d,u,o;if(f(this,Vs)&&this.hasListeners()){const g=f(this,tt).variables,m=f(this,tt).context,x={client:f(this,Ms),meta:this.options.meta,mutationKey:this.options.mutationKey};(s==null?void 0:s.type)==="success"?((n=(r=f(this,Vs)).onSuccess)==null||n.call(r,s.data,g,m,x),(l=(i=f(this,Vs)).onSettled)==null||l.call(i,s.data,null,g,m,x)):(s==null?void 0:s.type)==="error"&&((d=(c=f(this,Vs)).onError)==null||d.call(c,s.error,g,m,x),(o=(u=f(this,Vs)).onSettled)==null||o.call(u,void 0,s.error,g,m,x))}this.listeners.forEach(g=>{g(f(this,tt))})})},mn),$s,xn,tc=(xn=class extends sa{constructor(a={}){super();Y(this,$s);this.config=a,M(this,$s,new Map)}build(a,s,r){const n=s.queryKey,i=s.queryHash??Rr(n,s);let l=this.get(i);return l||(l=new Wl({client:a,queryKey:n,queryHash:i,options:a.defaultQueryOptions(s),state:r,defaultOptions:a.getQueryDefaults(n)}),this.add(l)),l}add(a){f(this,$s).has(a.queryHash)||(f(this,$s).set(a.queryHash,a),this.notify({type:"added",query:a}))}remove(a){const s=f(this,$s).get(a.queryHash);s&&(a.destroy(),s===a&&f(this,$s).delete(a.queryHash),this.notify({type:"removed",query:a}))}clear(){De.batch(()=>{this.getAll().forEach(a=>{this.remove(a)})})}get(a){return f(this,$s).get(a)}getAll(){return[...f(this,$s).values()]}find(a){const s={exact:!0,...a};return this.getAll().find(r=>ai(s,r))}findAll(a={}){const s=this.getAll();return Object.keys(a).length>0?s.filter(r=>ai(a,r)):s}notify(a){De.batch(()=>{this.listeners.forEach(s=>{s(a)})})}onFocus(){De.batch(()=>{this.getAll().forEach(a=>{a.onFocus()})})}onOnline(){De.batch(()=>{this.getAll().forEach(a=>{a.onOnline()})})}},$s=new WeakMap,xn),ke,at,rt,Wt,Gt,it,Ht,Zt,hn,ac=(hn=class{constructor(t={}){Y(this,ke);Y(this,at);Y(this,rt);Y(this,Wt);Y(this,Gt);Y(this,it);Y(this,Ht);Y(this,Zt);M(this,ke,t.queryCache||new tc),M(this,at,t.mutationCache||new ec),M(this,rt,t.defaultOptions||{}),M(this,Wt,new Map),M(this,Gt,new Map),M(this,it,0)}mount(){Sa(this,it)._++,f(this,it)===1&&(M(this,Ht,Tr.subscribe(async t=>{t&&(await this.resumePausedMutations(),f(this,ke).onFocus())})),M(this,Zt,Da.subscribe(async t=>{t&&(await this.resumePausedMutations(),f(this,ke).onOnline())})))}unmount(){var t,a;Sa(this,it)._--,f(this,it)===0&&((t=f(this,Ht))==null||t.call(this),M(this,Ht,void 0),(a=f(this,Zt))==null||a.call(this),M(this,Zt,void 0))}isFetching(t){return f(this,ke).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return f(this,at).findAll({...t,status:"pending"}).length}getQueryData(t){var s;const a=this.defaultQueryOptions({queryKey:t});return(s=f(this,ke).get(a.queryHash))==null?void 0:s.state.data}ensureQueryData(t){const a=this.defaultQueryOptions(t),s=f(this,ke).build(this,a),r=s.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&s.isStaleByTime(ct(a.staleTime,s))&&this.prefetchQuery(a),Promise.resolve(r))}getQueriesData(t){return f(this,ke).findAll(t).map(({queryKey:a,state:s})=>{const r=s.data;return[a,r]})}setQueryData(t,a,s){const r=this.defaultQueryOptions({queryKey:t}),n=f(this,ke).get(r.queryHash),i=n==null?void 0:n.state.data,l=Ol(a,i);if(l!==void 0)return f(this,ke).build(this,r).setData(l,{...s,manual:!0})}setQueriesData(t,a,s){return De.batch(()=>f(this,ke).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,a,s)]))}getQueryState(t){var s;const a=this.defaultQueryOptions({queryKey:t});return(s=f(this,ke).get(a.queryHash))==null?void 0:s.state}removeQueries(t){const a=f(this,ke);De.batch(()=>{a.findAll(t).forEach(s=>{a.remove(s)})})}resetQueries(t,a){const s=f(this,ke);return De.batch(()=>(s.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},a)))}cancelQueries(t,a={}){const s={revert:!0,...a},r=De.batch(()=>f(this,ke).findAll(t).map(n=>n.cancel(s)));return Promise.all(r).then(We).catch(We)}invalidateQueries(t,a={}){return De.batch(()=>(f(this,ke).findAll(t).forEach(s=>{s.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},a)))}refetchQueries(t,a={}){const s={...a,cancelRefetch:a.cancelRefetch??!0},r=De.batch(()=>f(this,ke).findAll(t).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let i=n.fetch(void 0,s);return s.throwOnError||(i=i.catch(We)),n.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(We)}fetchQuery(t){const a=this.defaultQueryOptions(t);a.retry===void 0&&(a.retry=!1);const s=f(this,ke).build(this,a);return s.isStaleByTime(ct(a.staleTime,s))?s.fetch(a):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(We).catch(We)}fetchInfiniteQuery(t){return t.behavior=oi(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(We).catch(We)}ensureInfiniteQueryData(t){return t.behavior=oi(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Da.isOnline()?f(this,at).resumePausedMutations():Promise.resolve()}getQueryCache(){return f(this,ke)}getMutationCache(){return f(this,at)}getDefaultOptions(){return f(this,rt)}setDefaultOptions(t){M(this,rt,t)}setQueryDefaults(t,a){f(this,Wt).set($t(t),{queryKey:t,defaultOptions:a})}getQueryDefaults(t){const a=[...f(this,Wt).values()],s={};return a.forEach(r=>{ha(t,r.queryKey)&&Object.assign(s,r.defaultOptions)}),s}setMutationDefaults(t,a){f(this,Gt).set($t(t),{mutationKey:t,defaultOptions:a})}getMutationDefaults(t){const a=[...f(this,Gt).values()],s={};return a.forEach(r=>{ha(t,r.mutationKey)&&Object.assign(s,r.defaultOptions)}),s}defaultQueryOptions(t){if(t._defaulted)return t;const a={...f(this,rt).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return a.queryHash||(a.queryHash=Rr(a.queryKey,a)),a.refetchOnReconnect===void 0&&(a.refetchOnReconnect=a.networkMode!=="always"),a.throwOnError===void 0&&(a.throwOnError=!!a.suspense),!a.networkMode&&a.persister&&(a.networkMode="offlineFirst"),a.queryFn===Er&&(a.enabled=!1),a}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...f(this,rt).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){f(this,ke).clear(),f(this,at).clear()}},ke=new WeakMap,at=new WeakMap,rt=new WeakMap,Wt=new WeakMap,Gt=new WeakMap,it=new WeakMap,Ht=new WeakMap,Zt=new WeakMap,hn),Ln=y.createContext(void 0),Pt=t=>{const a=y.useContext(Ln);if(!a)throw new Error("No QueryClient set, use QueryClientProvider to set one");return a},rc=({client:t,children:a})=>(y.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx(Ln.Provider,{value:t,children:a})),Dn=y.createContext(!1),ic=()=>y.useContext(Dn);Dn.Provider;function nc(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var lc=y.createContext(nc()),cc=()=>y.useContext(lc),dc=(t,a)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(a.isReset()||(t.retryOnMount=!1))},oc=t=>{y.useEffect(()=>{t.clearReset()},[t])},mc=({result:t,errorResetBoundary:a,throwOnError:s,query:r,suspense:n})=>t.isError&&!a.isReset()&&!t.isFetching&&r&&(n&&t.data===void 0||An(s,[t.error,r])),xc=t=>{if(t.suspense){const s=n=>n==="static"?n:Math.max(n??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...n)=>s(r(...n)):s(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},hc=(t,a)=>t.isLoading&&t.isFetching&&!a,uc=(t,a)=>(t==null?void 0:t.suspense)&&a.isPending,xi=(t,a,s)=>a.fetchOptimistic(t).catch(()=>{s.clearReset()});function pc(t,a,s){var g,m,x,$,N;const r=ic(),n=cc(),i=Pt(),l=i.defaultQueryOptions(t);(m=(g=i.getDefaultOptions().queries)==null?void 0:g._experimental_beforeQuery)==null||m.call(g,l),l._optimisticResults=r?"isRestoring":"optimistic",xc(l),dc(l,n),oc(n);const c=!i.getQueryCache().get(l.queryHash),[d]=y.useState(()=>new a(i,l)),u=d.getOptimisticResult(l),o=!r&&t.subscribed!==!1;if(y.useSyncExternalStore(y.useCallback(p=>{const h=o?d.subscribe(De.batchCalls(p)):We;return d.updateResult(),h},[d,o]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),y.useEffect(()=>{d.setOptions(l)},[l,d]),uc(l,u))throw xi(l,d,n);if(mc({result:u,errorResetBoundary:n,throwOnError:l.throwOnError,query:i.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw u.error;if(($=(x=i.getDefaultOptions().queries)==null?void 0:x._experimental_afterQuery)==null||$.call(x,l,u),l.experimental_prefetchInRender&&!Ct&&hc(u,r)){const p=c?xi(l,d,n):(N=i.getQueryCache().get(l.queryHash))==null?void 0:N.promise;p==null||p.catch(We).finally(()=>{d.updateResult()})}return l.notifyOnChangeProps?u:d.trackResult(u)}function de(t,a){return pc(t,Gl)}function Ge(t,a){const s=Pt(),[r]=y.useState(()=>new sc(s,t));y.useEffect(()=>{r.setOptions(t)},[r,t]);const n=y.useSyncExternalStore(y.useCallback(l=>r.subscribe(De.batchCalls(l)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=y.useCallback((l,c)=>{r.mutate(l,c).catch(We)},[r]);if(n.error&&An(r.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:i,mutateAsync:n.mutate}}const gc="modulepreload",fc=function(t){return"/"+t},hi={},ui=function(a,s,r){let n=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));n=Promise.allSettled(s.map(d=>{if(d=fc(d),d in hi)return;hi[d]=!0;const u=d.endsWith(".css"),o=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${o}`))return;const g=document.createElement("link");if(g.rel=u?"stylesheet":gc,u||(g.as="script"),g.crossOrigin="",g.href=d,c&&g.setAttribute("nonce",c),document.head.appendChild(g),u)return new Promise((m,x)=>{g.addEventListener("load",m),g.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return n.then(l=>{for(const c of l||[])c.status==="rejected"&&i(c.reason);return a().catch(i)})};var jc=function(){return null};let yc={data:""},vc=t=>{if(typeof window=="object"){let a=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return a.nonce=window.__nonce__,a.parentNode||(t||document.head).appendChild(a),a.firstChild}return t||yc},Nc=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,bc=/\/\*[^]*?\*\/|  +/g,pi=/\n+/g,Gs=(t,a)=>{let s="",r="",n="";for(let i in t){let l=t[i];i[0]=="@"?i[1]=="i"?s=i+" "+l+";":r+=i[1]=="f"?Gs(l,i):i+"{"+Gs(l,i[1]=="k"?"":a)+"}":typeof l=="object"?r+=Gs(l,a?a.replace(/([^,])+/g,c=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,d=>/&/.test(d)?d.replace(/&/g,c):c?c+" "+d:d)):i):l!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=Gs.p?Gs.p(i,l):i+":"+l+";")}return s+(a&&n?a+"{"+n+"}":n)+r},Us={},On=t=>{if(typeof t=="object"){let a="";for(let s in t)a+=s+On(t[s]);return a}return t},wc=(t,a,s,r,n)=>{let i=On(t),l=Us[i]||(Us[i]=(d=>{let u=0,o=11;for(;u<d.length;)o=101*o+d.charCodeAt(u++)>>>0;return"go"+o})(i));if(!Us[l]){let d=i!==t?t:(u=>{let o,g,m=[{}];for(;o=Nc.exec(u.replace(bc,""));)o[4]?m.shift():o[3]?(g=o[3].replace(pi," ").trim(),m.unshift(m[0][g]=m[0][g]||{})):m[0][o[1]]=o[2].replace(pi," ").trim();return m[0]})(t);Us[l]=Gs(n?{["@keyframes "+l]:d}:d,s?"":"."+l)}let c=s&&Us.g?Us.g:null;return s&&(Us.g=Us[l]),((d,u,o,g)=>{g?u.data=u.data.replace(g,d):u.data.indexOf(d)===-1&&(u.data=o?d+u.data:u.data+d)})(Us[l],a,r,c),l},_c=(t,a,s)=>t.reduce((r,n,i)=>{let l=a[i];if(l&&l.call){let c=l(s),d=c&&c.props&&c.props.className||/^go/.test(c)&&c;l=d?"."+d:c&&typeof c=="object"?c.props?"":Gs(c,""):c===!1?"":c}return r+n+(l??"")},"");function Ka(t){let a=this||{},s=t.call?t(a.p):t;return wc(s.unshift?s.raw?_c(s,[].slice.call(arguments,1),a.p):s.reduce((r,n)=>Object.assign(r,n&&n.call?n(a.p):n),{}):s,vc(a.target),a.g,a.o,a.k)}let In,wr,_r;Ka.bind({g:1});let Ys=Ka.bind({k:1});function Sc(t,a,s,r){Gs.p=a,In=t,wr=s,_r=r}function ht(t,a){let s=this||{};return function(){let r=arguments;function n(i,l){let c=Object.assign({},i),d=c.className||n.className;s.p=Object.assign({theme:wr&&wr()},c),s.o=/ *go\d+/.test(d),c.className=Ka.apply(s,r)+(d?" "+d:"");let u=t;return t[0]&&(u=c.as||t,delete c.as),_r&&u[0]&&_r(c),In(u,c)}return n}}var kc=t=>typeof t=="function",Oa=(t,a)=>kc(t)?t(a):t,Cc=(()=>{let t=0;return()=>(++t).toString()})(),Mn=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let a=matchMedia("(prefers-reduced-motion: reduce)");t=!a||a.matches}return t}})(),$c=20,Ur="default",Vn=(t,a)=>{let{toastLimit:s}=t.settings;switch(a.type){case 0:return{...t,toasts:[a.toast,...t.toasts].slice(0,s)};case 1:return{...t,toasts:t.toasts.map(l=>l.id===a.toast.id?{...l,...a.toast}:l)};case 2:let{toast:r}=a;return Vn(t,{type:t.toasts.find(l=>l.id===r.id)?1:0,toast:r});case 3:let{toastId:n}=a;return{...t,toasts:t.toasts.map(l=>l.id===n||n===void 0?{...l,dismissed:!0,visible:!1}:l)};case 4:return a.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(l=>l.id!==a.toastId)};case 5:return{...t,pausedAt:a.time};case 6:let i=a.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(l=>({...l,pauseDuration:l.pauseDuration+i}))}}},Ra=[],Bn={toasts:[],pausedAt:void 0,settings:{toastLimit:$c}},As={},Kn=(t,a=Ur)=>{As[a]=Vn(As[a]||Bn,t),Ra.forEach(([s,r])=>{s===a&&r(As[a])})},qn=t=>Object.keys(As).forEach(a=>Kn(t,a)),Ac=t=>Object.keys(As).find(a=>As[a].toasts.some(s=>s.id===t)),qa=(t=Ur)=>a=>{Kn(a,t)},Pc={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Rc=(t={},a=Ur)=>{let[s,r]=y.useState(As[a]||Bn),n=y.useRef(As[a]);y.useEffect(()=>(n.current!==As[a]&&r(As[a]),Ra.push([a,r]),()=>{let l=Ra.findIndex(([c])=>c===a);l>-1&&Ra.splice(l,1)}),[a]);let i=s.toasts.map(l=>{var c,d,u;return{...t,...t[l.type],...l,removeDelay:l.removeDelay||((c=t[l.type])==null?void 0:c.removeDelay)||(t==null?void 0:t.removeDelay),duration:l.duration||((d=t[l.type])==null?void 0:d.duration)||(t==null?void 0:t.duration)||Pc[l.type],style:{...t.style,...(u=t[l.type])==null?void 0:u.style,...l.style}}});return{...s,toasts:i}},Ec=(t,a="blank",s)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:a,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...s,id:(s==null?void 0:s.id)||Cc()}),va=t=>(a,s)=>{let r=Ec(a,t,s);return qa(r.toasterId||Ac(r.id))({type:2,toast:r}),r.id},Oe=(t,a)=>va("blank")(t,a);Oe.error=va("error");Oe.success=va("success");Oe.loading=va("loading");Oe.custom=va("custom");Oe.dismiss=(t,a)=>{let s={type:3,toastId:t};a?qa(a)(s):qn(s)};Oe.dismissAll=t=>Oe.dismiss(void 0,t);Oe.remove=(t,a)=>{let s={type:4,toastId:t};a?qa(a)(s):qn(s)};Oe.removeAll=t=>Oe.remove(void 0,t);Oe.promise=(t,a,s)=>{let r=Oe.loading(a.loading,{...s,...s==null?void 0:s.loading});return typeof t=="function"&&(t=t()),t.then(n=>{let i=a.success?Oa(a.success,n):void 0;return i?Oe.success(i,{id:r,...s,...s==null?void 0:s.success}):Oe.dismiss(r),n}).catch(n=>{let i=a.error?Oa(a.error,n):void 0;i?Oe.error(i,{id:r,...s,...s==null?void 0:s.error}):Oe.dismiss(r)}),t};var Tc=1e3,Fc=(t,a="default")=>{let{toasts:s,pausedAt:r}=Rc(t,a),n=y.useRef(new Map).current,i=y.useCallback((g,m=Tc)=>{if(n.has(g))return;let x=setTimeout(()=>{n.delete(g),l({type:4,toastId:g})},m);n.set(g,x)},[]);y.useEffect(()=>{if(r)return;let g=Date.now(),m=s.map(x=>{if(x.duration===1/0)return;let $=(x.duration||0)+x.pauseDuration-(g-x.createdAt);if($<0){x.visible&&Oe.dismiss(x.id);return}return setTimeout(()=>Oe.dismiss(x.id,a),$)});return()=>{m.forEach(x=>x&&clearTimeout(x))}},[s,r,a]);let l=y.useCallback(qa(a),[a]),c=y.useCallback(()=>{l({type:5,time:Date.now()})},[l]),d=y.useCallback((g,m)=>{l({type:1,toast:{id:g,height:m}})},[l]),u=y.useCallback(()=>{r&&l({type:6,time:Date.now()})},[r,l]),o=y.useCallback((g,m)=>{let{reverseOrder:x=!1,gutter:$=8,defaultPosition:N}=m||{},p=s.filter(A=>(A.position||N)===(g.position||N)&&A.height),h=p.findIndex(A=>A.id===g.id),S=p.filter((A,w)=>w<h&&A.visible).length;return p.filter(A=>A.visible).slice(...x?[S+1]:[0,S]).reduce((A,w)=>A+(w.height||0)+$,0)},[s]);return y.useEffect(()=>{s.forEach(g=>{if(g.dismissed)i(g.id,g.removeDelay);else{let m=n.get(g.id);m&&(clearTimeout(m),n.delete(g.id))}})},[s,i]),{toasts:s,handlers:{updateHeight:d,startPause:c,endPause:u,calculateOffset:o}}},Uc=Ys`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Lc=Ys`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Dc=Ys`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Oc=ht("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Uc} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Lc} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Dc} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Ic=Ys`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Mc=ht("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${Ic} 1s linear infinite;
`,Vc=Ys`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Bc=Ys`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Kc=ht("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Vc} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Bc} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,qc=ht("div")`
  position: absolute;
`,Yc=ht("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,zc=Ys`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Qc=ht("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${zc} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Wc=({toast:t})=>{let{icon:a,type:s,iconTheme:r}=t;return a!==void 0?typeof a=="string"?y.createElement(Qc,null,a):a:s==="blank"?null:y.createElement(Yc,null,y.createElement(Mc,{...r}),s!=="loading"&&y.createElement(qc,null,s==="error"?y.createElement(Oc,{...r}):y.createElement(Kc,{...r})))},Gc=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Hc=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,Zc="0%{opacity:0;} 100%{opacity:1;}",Jc="0%{opacity:1;} 100%{opacity:0;}",Xc=ht("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,ed=ht("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,sd=(t,a)=>{let s=t.includes("top")?1:-1,[r,n]=Mn()?[Zc,Jc]:[Gc(s),Hc(s)];return{animation:a?`${Ys(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ys(n)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},td=y.memo(({toast:t,position:a,style:s,children:r})=>{let n=t.height?sd(t.position||a||"top-center",t.visible):{opacity:0},i=y.createElement(Wc,{toast:t}),l=y.createElement(ed,{...t.ariaProps},Oa(t.message,t));return y.createElement(Xc,{className:t.className,style:{...n,...s,...t.style}},typeof r=="function"?r({icon:i,message:l}):y.createElement(y.Fragment,null,i,l))});Sc(y.createElement);var ad=({id:t,className:a,style:s,onHeightUpdate:r,children:n})=>{let i=y.useCallback(l=>{if(l){let c=()=>{let d=l.getBoundingClientRect().height;r(t,d)};c(),new MutationObserver(c).observe(l,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return y.createElement("div",{ref:i,className:a,style:s},n)},rd=(t,a)=>{let s=t.includes("top"),r=s?{top:0}:{bottom:0},n=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Mn()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${a*(s?1:-1)}px)`,...r,...n}},id=Ka`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Ca=16,nd=({reverseOrder:t,position:a="top-center",toastOptions:s,gutter:r,children:n,toasterId:i,containerStyle:l,containerClassName:c})=>{let{toasts:d,handlers:u}=Fc(s,i);return y.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:Ca,left:Ca,right:Ca,bottom:Ca,pointerEvents:"none",...l},className:c,onMouseEnter:u.startPause,onMouseLeave:u.endPause},d.map(o=>{let g=o.position||a,m=u.calculateOffset(o,{reverseOrder:t,gutter:r,defaultPosition:a}),x=rd(g,m);return y.createElement(ad,{id:o.id,key:o.id,onHeightUpdate:u.updateHeight,className:o.visible?id:"",style:x},o.type==="custom"?Oa(o.message,o):n?n(o):y.createElement(td,{toast:o,position:g}))}))},K=Oe;const ld={},gi=t=>{let a;const s=new Set,r=(o,g)=>{const m=typeof o=="function"?o(a):o;if(!Object.is(m,a)){const x=a;a=g??(typeof m!="object"||m===null)?m:Object.assign({},a,m),s.forEach($=>$(a,x))}},n=()=>a,d={setState:r,getState:n,getInitialState:()=>u,subscribe:o=>(s.add(o),()=>s.delete(o)),destroy:()=>{(ld?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),s.clear()}},u=a=t(r,n,d);return d},cd=t=>t?gi(t):gi;var Yn={exports:{}},zn={},Qn={exports:{}},Wn={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jt=y;function dd(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var od=typeof Object.is=="function"?Object.is:dd,md=Jt.useState,xd=Jt.useEffect,hd=Jt.useLayoutEffect,ud=Jt.useDebugValue;function pd(t,a){var s=a(),r=md({inst:{value:s,getSnapshot:a}}),n=r[0].inst,i=r[1];return hd(function(){n.value=s,n.getSnapshot=a,Ja(n)&&i({inst:n})},[t,s,a]),xd(function(){return Ja(n)&&i({inst:n}),t(function(){Ja(n)&&i({inst:n})})},[t]),ud(s),s}function Ja(t){var a=t.getSnapshot;t=t.value;try{var s=a();return!od(t,s)}catch{return!0}}function gd(t,a){return a()}var fd=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?gd:pd;Wn.useSyncExternalStore=Jt.useSyncExternalStore!==void 0?Jt.useSyncExternalStore:fd;Qn.exports=Wn;var jd=Qn.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ya=y,yd=jd;function vd(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var Nd=typeof Object.is=="function"?Object.is:vd,bd=yd.useSyncExternalStore,wd=Ya.useRef,_d=Ya.useEffect,Sd=Ya.useMemo,kd=Ya.useDebugValue;zn.useSyncExternalStoreWithSelector=function(t,a,s,r,n){var i=wd(null);if(i.current===null){var l={hasValue:!1,value:null};i.current=l}else l=i.current;i=Sd(function(){function d(x){if(!u){if(u=!0,o=x,x=r(x),n!==void 0&&l.hasValue){var $=l.value;if(n($,x))return g=$}return g=x}if($=g,Nd(o,x))return $;var N=r(x);return n!==void 0&&n($,N)?(o=x,$):(o=x,g=N)}var u=!1,o,g,m=s===void 0?null:s;return[function(){return d(a())},m===null?void 0:function(){return d(m())}]},[a,s,r,n]);var c=bd(t,i[0],i[1]);return _d(function(){l.hasValue=!0,l.value=c},[c]),kd(c),c};Yn.exports=zn;var Cd=Yn.exports;const $d=$l(Cd),Gn={},{useDebugValue:Ad}=Ee,{useSyncExternalStoreWithSelector:Pd}=$d;let fi=!1;const Rd=t=>t;function Ed(t,a=Rd,s){(Gn?"production":void 0)!=="production"&&s&&!fi&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),fi=!0);const r=Pd(t.subscribe,t.getState,t.getServerState||t.getInitialState,a,s);return Ad(r),r}const ji=t=>{(Gn?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const a=typeof t=="function"?cd(t):t,s=(r,n)=>Ed(a,r,n);return Object.assign(s,a),s},Td=t=>t?ji(t):ji,Fd={};function Ud(t,a){let s;try{s=t()}catch{return}return{getItem:n=>{var i;const l=d=>d===null?null:JSON.parse(d,void 0),c=(i=s.getItem(n))!=null?i:null;return c instanceof Promise?c.then(l):l(c)},setItem:(n,i)=>s.setItem(n,JSON.stringify(i,void 0)),removeItem:n=>s.removeItem(n)}}const ua=t=>a=>{try{const s=t(a);return s instanceof Promise?s:{then(r){return ua(r)(s)},catch(r){return this}}}catch(s){return{then(r){return this},catch(r){return ua(r)(s)}}}},Ld=(t,a)=>(s,r,n)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:p=>p,version:0,merge:(p,h)=>({...h,...p}),...a},l=!1;const c=new Set,d=new Set;let u;try{u=i.getStorage()}catch{}if(!u)return t((...p)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),s(...p)},r,n);const o=ua(i.serialize),g=()=>{const p=i.partialize({...r()});let h;const S=o({state:p,version:i.version}).then(A=>u.setItem(i.name,A)).catch(A=>{h=A});if(h)throw h;return S},m=n.setState;n.setState=(p,h)=>{m(p,h),g()};const x=t((...p)=>{s(...p),g()},r,n);let $;const N=()=>{var p;if(!u)return;l=!1,c.forEach(S=>S(r()));const h=((p=i.onRehydrateStorage)==null?void 0:p.call(i,r()))||void 0;return ua(u.getItem.bind(u))(i.name).then(S=>{if(S)return i.deserialize(S)}).then(S=>{if(S)if(typeof S.version=="number"&&S.version!==i.version){if(i.migrate)return i.migrate(S.state,S.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return S.state}).then(S=>{var A;return $=i.merge(S,(A=r())!=null?A:x),s($,!0),g()}).then(()=>{h==null||h($,void 0),l=!0,d.forEach(S=>S($))}).catch(S=>{h==null||h(void 0,S)})};return n.persist={setOptions:p=>{i={...i,...p},p.getStorage&&(u=p.getStorage())},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>N(),hasHydrated:()=>l,onHydrate:p=>(c.add(p),()=>{c.delete(p)}),onFinishHydration:p=>(d.add(p),()=>{d.delete(p)})},N(),$||x},Dd=(t,a)=>(s,r,n)=>{let i={storage:Ud(()=>localStorage),partialize:N=>N,version:0,merge:(N,p)=>({...p,...N}),...a},l=!1;const c=new Set,d=new Set;let u=i.storage;if(!u)return t((...N)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),s(...N)},r,n);const o=()=>{const N=i.partialize({...r()});return u.setItem(i.name,{state:N,version:i.version})},g=n.setState;n.setState=(N,p)=>{g(N,p),o()};const m=t((...N)=>{s(...N),o()},r,n);n.getInitialState=()=>m;let x;const $=()=>{var N,p;if(!u)return;l=!1,c.forEach(S=>{var A;return S((A=r())!=null?A:m)});const h=((p=i.onRehydrateStorage)==null?void 0:p.call(i,(N=r())!=null?N:m))||void 0;return ua(u.getItem.bind(u))(i.name).then(S=>{if(S)if(typeof S.version=="number"&&S.version!==i.version){if(i.migrate)return[!0,i.migrate(S.state,S.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,S.state];return[!1,void 0]}).then(S=>{var A;const[w,b]=S;if(x=i.merge(b,(A=r())!=null?A:m),s(x,!0),w)return o()}).then(()=>{h==null||h(x,void 0),x=r(),l=!0,d.forEach(S=>S(x))}).catch(S=>{h==null||h(void 0,S)})};return n.persist={setOptions:N=>{i={...i,...N},N.storage&&(u=N.storage)},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>$(),hasHydrated:()=>l,onHydrate:N=>(c.add(N),()=>{c.delete(N)}),onFinishHydration:N=>(d.add(N),()=>{d.delete(N)})},i.skipHydration||$(),x||m},Od=(t,a)=>"getStorage"in a||"serialize"in a||"deserialize"in a?((Fd?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Ld(t,a)):Dd(t,a),Id=Od,Md="/api",Vd=3e4,ee=El.create({baseURL:Md,timeout:Vd,headers:{"Content-Type":"application/json",Accept:"application/json"}});ee.interceptors.request.use(t=>{const a=Lr();return a&&(t.headers.Authorization=`Bearer ${a}`),t.headers["X-Tenant-Code"]="DEMO",t},t=>Promise.reject(t));ee.interceptors.response.use(t=>t,async t=>{var n,i,l,c,d,u,o;const a=t.config;if(((n=t.response)==null?void 0:n.status)===401&&!a._retry){a._retry=!0;try{const{useAuthStore:g}=await ui(async()=>{const{useAuthStore:x}=await Promise.resolve().then(()=>yi);return{useAuthStore:x}},void 0);await g.getState().refreshToken();const m=Lr();if(m)return a.headers.Authorization=`Bearer ${m}`,ee(a)}catch{const{useAuthStore:m}=await ui(async()=>{const{useAuthStore:x}=await Promise.resolve().then(()=>yi);return{useAuthStore:x}},void 0);m.getState().logout(),typeof window<"u"&&(window.location.href="/auth/login")}}const s=((l=(i=t.response)==null?void 0:i.data)==null?void 0:l.message)||t.message||"An error occurred",r=((d=(c=t.response)==null?void 0:c.data)==null?void 0:d.code)||"UNKNOWN_ERROR";return Promise.reject({message:s,code:r,status:(u=t.response)==null?void 0:u.status,data:(o=t.response)==null?void 0:o.data})});class ut{constructor(){Xe(this,"client");this.client=ee}async get(a,s){return this.client.get(a,s)}async post(a,s,r){return this.client.post(a,s,r)}async put(a,s,r){return this.client.put(a,s,r)}async patch(a,s,r){return this.client.patch(a,s,r)}async delete(a,s){return this.client.delete(a,s)}async upload(a,s,r){const n=new FormData;return n.append("file",s),this.client.post(a,n,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:i=>{if(r&&i.total){const l=Math.round(i.loaded*100/i.total);r(l)}}})}async download(a,s){const r=await this.client.get(a,{responseType:"blob"}),n=new Blob([r.data]),i=window.URL.createObjectURL(n),l=document.createElement("a");l.href=i,l.download=s||"download",document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(i)}}class Bd{async login(a){const r=(await ee.post("/auth/login",a)).data.data;return{user:{id:r.user.id,email:r.user.email,first_name:r.user.firstName,last_name:r.user.lastName,role:r.user.role,status:r.user.status,permissions:r.user.permissions||[],last_login:r.user.lastLogin,created_at:r.user.createdAt,updated_at:r.user.updatedAt||r.user.createdAt},tokens:{access_token:r.token,refresh_token:r.refreshToken,expires_in:86400,token_type:"Bearer"}}}async logout(){await ee.post("/auth/logout")}async refreshToken(a){return(await ee.post("/auth/refresh",{refresh_token:a})).data}async forgotPassword(a){await ee.post("/auth/forgot-password",a)}async resetPassword(a){await ee.post("/auth/reset-password",a)}async changePassword(a){await ee.post("/auth/change-password",a)}async verifyToken(a){try{return await ee.post("/auth/verify-token",{token:a}),!0}catch{return!1}}async getCurrentUser(){return(await ee.get("/auth/me")).data}}const ca=new Bd,Fs=Td()(Id((t,a)=>({user:null,tokens:null,isAuthenticated:!1,isLoading:!1,error:null,login:async s=>{t({isLoading:!0,error:null});try{const r=await ca.login(s);t({user:r.user,tokens:r.tokens,isAuthenticated:!0,isLoading:!1,error:null}),Xa(r.tokens.expires_in)}catch(r){throw t({user:null,tokens:null,isAuthenticated:!1,isLoading:!1,error:r.message||"Login failed"}),r}},logout:()=>{Hn(),ca.logout().catch(console.error),t({user:null,tokens:null,isAuthenticated:!1,isLoading:!1,error:null})},refreshToken:async()=>{const{tokens:s}=a();if(!(s!=null&&s.refresh_token)){a().logout();return}try{const r=await ca.refreshToken(s.refresh_token);t({tokens:{...s,access_token:r.access_token,expires_in:r.expires_in}}),Xa(r.expires_in)}catch(r){console.error("Token refresh failed:",r),a().logout()}},clearError:()=>{t({error:null})},initialize:()=>{var n;const{tokens:s,user:r}=a();if(s&&r){t({isAuthenticated:!0});const i=Date.now()/1e3,l=(n=Kd(s.access_token))==null?void 0:n.exp;if(l&&l<i)a().refreshToken();else{const c=l?(l-i)*1e3:s.expires_in*1e3;Xa(c/1e3)}}},updateUser:s=>{const{user:r}=a();r&&t({user:{...r,...s}})}}),{name:"salessync-auth",partialize:t=>({user:t.user,tokens:t.tokens,isAuthenticated:t.isAuthenticated})}));let Ea=null;function Xa(t){Hn();const a=Math.max((t-300)*1e3,6e4);Ea=setTimeout(()=>{Fs.getState().refreshToken()},a)}function Hn(){Ea&&(clearTimeout(Ea),Ea=null)}function Kd(t){try{const s=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(atob(s).split("").map(n=>"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(r)}catch{return null}}const Lr=()=>{var t;return(t=Fs.getState().tokens)==null?void 0:t.access_token},Dr=()=>Fs.getState().user,Zn=t=>{const a=Dr();return(a==null?void 0:a.role)===t||(a==null?void 0:a.role)==="admin"},Or=t=>{var s;const a=Dr();return((s=a==null?void 0:a.permissions)==null?void 0:s.includes(t))||(a==null?void 0:a.role)==="admin"},yi=Object.freeze(Object.defineProperty({__proto__:null,getAuthToken:Lr,getCurrentUser:Dr,hasPermission:Or,hasRole:Zn,useAuthStore:Fs},Symbol.toStringTag,{value:"Module"}));function qd({size:t="md",showText:a=!0,className:s=""}){const[r,n]=y.useState(!1),[i,l]=y.useState(!1);y.useEffect(()=>{l(!0)},[]);const c={sm:"h-8 w-8",md:"h-16 w-16",lg:"h-24 w-24",xl:"h-32 w-32"},d={sm:"text-lg",md:"text-3xl",lg:"text-4xl",xl:"text-5xl"};return e.jsxs("div",{className:`flex flex-col items-center space-y-3 ${s}`,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`
            absolute inset-0 rounded-2xl bg-gradient-to-r from-blue-400 via-purple-500 to-blue-600
            transition-all duration-700 ease-out
            ${i?"opacity-20 scale-110":"opacity-0 scale-100"}
            ${r?"opacity-40 scale-125 blur-sm":""}
          `}),e.jsxs("div",{className:`
            relative ${c[t]} 
            bg-gradient-to-br from-blue-600 via-blue-700 to-purple-700
            rounded-2xl shadow-2xl
            flex items-center justify-center
            transition-all duration-500 ease-out
            ${i?"scale-100 rotate-0":"scale-0 rotate-180"}
            ${r?"scale-105 shadow-3xl":""}
            overflow-hidden
          `,children:[e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",children:[e.jsx("defs",{children:e.jsx("pattern",{id:"grid",width:"10",height:"10",patternUnits:"userSpaceOnUse",children:e.jsx("path",{d:"M 10 0 L 0 0 0 10",fill:"none",stroke:"white",strokeWidth:"0.5"})})}),e.jsx("rect",{width:"100",height:"100",fill:"url(#grid)"})]})}),e.jsx("div",{className:"relative z-10 flex items-center justify-center",children:e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:`
                  font-bold text-white
                  transition-all duration-700 ease-out
                  ${t==="sm"?"text-sm":t==="md"?"text-xl":t==="lg"?"text-2xl":"text-3xl"}
                  ${i?"opacity-100 translate-x-0":"opacity-0 -translate-x-4"}
                  ${r?"scale-110":""}
                `,style:{textShadow:"0 2px 4px rgba(0,0,0,0.3)",animationDelay:"0.2s"},children:"S"}),e.jsx("span",{className:`
                  font-bold text-white ml-0.5
                  transition-all duration-700 ease-out
                  ${t==="sm"?"text-sm":t==="md"?"text-xl":t==="lg"?"text-2xl":"text-3xl"}
                  ${i?"opacity-100 translate-x-0":"opacity-0 translate-x-4"}
                  ${r?"scale-110":""}
                `,style:{textShadow:"0 2px 4px rgba(0,0,0,0.3)",animationDelay:"0.4s"},children:"S"})]})}),e.jsx("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(6)].map((u,o)=>e.jsx("div",{className:`
                  absolute w-1 h-1 bg-white rounded-full opacity-30
                  transition-all duration-1000 ease-out
                  ${r?"animate-pulse":""}
                `,style:{left:`${20+o*12}%`,top:`${15+o*8}%`,animationDelay:`${o*.2}s`,transform:r?`translateY(-${o*2}px)`:"translateY(0)"}},o))})]})]}),a&&e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:`
              ${d[t]} font-bold 
              bg-gradient-to-r from-gray-900 via-blue-900 to-purple-900 
              bg-clip-text text-transparent
              transition-all duration-700 ease-out
              ${i?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}
              ${r?"scale-105":""}
            `,style:{animationDelay:"0.6s"},children:"SalesSync"}),e.jsx("p",{className:`
              text-gray-600 font-medium
              transition-all duration-700 ease-out
              ${t==="sm"?"text-xs":t==="md"?"text-sm":"text-base"}
              ${i?"opacity-100 translate-y-0":"opacity-0 translate-y-2"}
              ${r?"text-blue-600":""}
            `,style:{animationDelay:"0.8s"},children:"Field Force Management Platform"})]})]})}function Yd(){return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-blue-400/20 to-purple-600/20 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-tr from-indigo-400/20 to-blue-600/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-r from-purple-400/10 to-blue-400/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"4s"}})]}),e.jsxs("div",{className:"max-w-md w-full space-y-8 relative z-10",children:[e.jsx("div",{className:"text-center",children:e.jsx(qd,{size:"lg",showText:!0})}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-2xl border border-white/20 p-8 transition-all duration-500 hover:shadow-3xl hover:bg-white/90",children:e.jsx(wn,{})}),e.jsx("div",{className:"text-center text-sm text-gray-500",children:e.jsx("p",{children:" 2024 SalesSync. All rights reserved."})})]})]})}const X={VIEW_USERS:"view_users",VIEW_CUSTOMERS:"view_customers",VIEW_ORDERS:"view_orders",VIEW_PRODUCTS:"view_products",MANAGE_INVENTORY:"manage_inventory",VIEW_VAN_SALES:"view_van_sales",MANAGE_VAN_SALES:"manage_van_sales",MANAGE_ROUTES:"manage_routes",VIEW_INVENTORY:"view_inventory",VIEW_TRADE_MARKETING:"view_trade_marketing",VIEW_PROMOTIONS:"view_promotions",MANAGE_PROMOTIONS:"manage_promotions",MANAGE_INCENTIVES:"manage_incentives",VIEW_MARKET_ANALYSIS:"view_market_analysis",MANAGE_TRADE_SPEND:"manage_trade_spend",VIEW_CAMPAIGNS:"view_campaigns",MANAGE_CAMPAIGNS:"manage_campaigns",MANAGE_AUDIENCES:"manage_audiences",VIEW_CAMPAIGN_PERFORMANCE:"view_campaign_performance",MANAGE_AB_TESTING:"manage_ab_testing",VIEW_FIELD_OPERATIONS:"view_field_operations",MANAGE_FIELD_AGENTS:"manage_field_agents",MANAGE_BOARD_PLACEMENTS:"manage_board_placements",MANAGE_PRODUCT_DISTRIBUTION:"manage_product_distribution",VIEW_AGENT_LOCATIONS:"view_agent_locations",VIEW_KYC:"view_kyc",MANAGE_KYC:"manage_kyc",VIEW_KYC_REPORTS:"view_kyc_reports",VIEW_SURVEYS:"view_surveys",MANAGE_SURVEYS:"manage_surveys",VIEW_INVENTORY_REPORTS:"view_inventory_reports",VIEW_ANALYTICS:"view_analytics",MANAGE_SYSTEM_SETTINGS:"manage_system_settings",VIEW_AUDIT_LOGS:"view_audit_logs",VIEW_COMMISSIONS:"view_commissions"},zd=[{name:"Dashboard",href:"/dashboard",icon:un,permission:null},{name:"Analytics",href:"/analytics",icon:ye,permission:X.VIEW_ANALYTICS},{name:"Van Sales",href:"/van-sales",icon:lt,permission:X.VIEW_VAN_SALES,children:[{name:"Dashboard",href:"/van-sales/dashboard",permission:X.VIEW_VAN_SALES},{name:"Management",href:"/van-sales/management",permission:X.MANAGE_VAN_SALES},{name:"Route Management",href:"/van-sales/routes",permission:X.MANAGE_ROUTES},{name:"Inventory Tracking",href:"/van-sales/inventory",permission:X.VIEW_INVENTORY}]},{name:"Field Operations",href:"/field-operations",icon:ma,permission:X.VIEW_FIELD_OPERATIONS,children:[{name:"Dashboard",href:"/field-operations/dashboard",permission:X.VIEW_FIELD_OPERATIONS},{name:"Agent Management",href:"/field-operations/agents",permission:X.MANAGE_FIELD_AGENTS},{name:"Live Mapping",href:"/field-operations/mapping",permission:X.VIEW_AGENT_LOCATIONS},{name:"Board Placement",href:"/field-operations/boards",permission:X.MANAGE_BOARD_PLACEMENTS},{name:"Product Distribution",href:"/field-operations/products",permission:X.MANAGE_PRODUCT_DISTRIBUTION},{name:"Commission Tracking",href:"/field-operations/commission",permission:X.VIEW_COMMISSIONS}]},{name:"KYC Management",href:"/kyc",icon:pn,permission:X.VIEW_KYC,children:[{name:"Dashboard",href:"/kyc/dashboard",permission:X.VIEW_KYC},{name:"Management",href:"/kyc/management",permission:X.MANAGE_KYC},{name:"Reports",href:"/kyc/reports",permission:X.VIEW_KYC_REPORTS}]},{name:"Surveys",href:"/surveys",icon:$r,permission:X.VIEW_SURVEYS,children:[{name:"Dashboard",href:"/surveys/dashboard",permission:X.VIEW_SURVEYS},{name:"Management",href:"/surveys/management",permission:X.MANAGE_SURVEYS}]},{name:"Inventory",href:"/inventory",icon:Ce,permission:X.VIEW_INVENTORY,children:[{name:"Dashboard",href:"/inventory/dashboard",permission:X.VIEW_INVENTORY},{name:"Management",href:"/inventory/management",permission:X.MANAGE_INVENTORY},{name:"Reports",href:"/inventory/reports",permission:X.VIEW_INVENTORY_REPORTS}]},{name:"Promotions",href:"/promotions",icon:Ta,permission:X.VIEW_PROMOTIONS,children:[{name:"Dashboard",href:"/promotions/dashboard",permission:X.VIEW_PROMOTIONS},{name:"Management",href:"/promotions/management",permission:X.MANAGE_PROMOTIONS}]},{name:"Trade Marketing",href:"/trade-marketing",icon:oe,permission:X.VIEW_TRADE_MARKETING,children:[{name:"Promotions",href:"/trade-marketing/promotions",permission:X.MANAGE_PROMOTIONS},{name:"Retailer Incentives",href:"/trade-marketing/incentives",permission:X.MANAGE_INCENTIVES},{name:"Market Analysis",href:"/trade-marketing/analysis",permission:X.VIEW_MARKET_ANALYSIS},{name:"Trade Spend",href:"/trade-marketing/spend",permission:X.MANAGE_TRADE_SPEND}]},{name:"Campaigns",href:"/campaigns",icon:ar,permission:X.VIEW_CAMPAIGNS,children:[{name:"Campaign Management",href:"/campaigns/management",permission:X.MANAGE_CAMPAIGNS},{name:"Target Audiences",href:"/campaigns/audiences",permission:X.MANAGE_AUDIENCES},{name:"Performance Tracking",href:"/campaigns/performance",permission:X.VIEW_CAMPAIGN_PERFORMANCE},{name:"A/B Testing",href:"/campaigns/testing",permission:X.MANAGE_AB_TESTING}]},{name:"Customers",href:"/customers",icon:xl,permission:X.VIEW_CUSTOMERS},{name:"Orders",href:"/orders",icon:Ar,permission:X.VIEW_ORDERS},{name:"Products",href:"/products",icon:Ce,permission:X.VIEW_PRODUCTS},{name:"Administration",href:"/admin",icon:gn,permission:X.MANAGE_SYSTEM_SETTINGS,children:[{name:"User Management",href:"/admin/users",permission:X.VIEW_USERS},{name:"System Settings",href:"/admin/settings",permission:X.MANAGE_SYSTEM_SETTINGS},{name:"Audit Logs",href:"/admin/audit",permission:X.VIEW_AUDIT_LOGS}]}];function vi(){var s,r,n;const{user:t}=Fs(),a=i=>i.permission?Or(i.permission):!0;return e.jsxs("div",{className:"flex flex-col flex-1 min-h-0 bg-white border-r border-gray-200",children:[e.jsx("div",{className:"flex items-center h-16 flex-shrink-0 px-4 bg-primary-600",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-8 w-8 bg-white rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-bold text-primary-600",children:"SS"})}),e.jsx("span",{className:"ml-2 text-xl font-bold text-white",children:"SalesSync"})]})}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-y-auto",children:[e.jsx("nav",{className:"flex-1 px-2 py-4 space-y-1",children:zd.map(i=>a(i)?e.jsxs("div",{children:[e.jsxs(si,{to:i.href,className:({isActive:l})=>`nav-link ${l?"nav-link-active":"nav-link-inactive"}`,children:[e.jsx(i.icon,{className:"mr-3 h-5 w-5 flex-shrink-0"}),i.name]}),i.children&&e.jsx("div",{className:"ml-8 mt-1 space-y-1",children:i.children.map(l=>a(l)?e.jsx(si,{to:l.href,className:({isActive:c})=>`nav-link text-sm ${c?"nav-link-active":"nav-link-inactive"}`,children:l.name},l.name):null)})]},i.name):null)}),e.jsx("div",{className:"flex-shrink-0 flex border-t border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-8 w-8 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-sm font-medium text-primary-600",children:[(s=t==null?void 0:t.first_name)==null?void 0:s[0],(r=t==null?void 0:t.last_name)==null?void 0:r[0]]})}),e.jsxs("div",{className:"ml-3",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-700",children:[t==null?void 0:t.first_name," ",t==null?void 0:t.last_name]}),e.jsx("p",{className:"text-xs text-gray-500 capitalize",children:(n=t==null?void 0:t.role)==null?void 0:n.replace("_"," ")})]})]})})]})]})}function Qd({onMenuClick:t}){var d,u;const{user:a,logout:s}=Fs(),[r,n]=y.useState(!1),[i,l]=y.useState(!1),c=()=>{s()};return e.jsxs("div",{className:"sticky top-0 z-10 flex-shrink-0 flex h-16 bg-white shadow",children:[e.jsx("button",{type:"button",className:"px-4 border-r border-gray-200 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 lg:hidden",onClick:t,children:e.jsx(hl,{className:"h-6 w-6"})}),e.jsxs("div",{className:"flex-1 px-4 flex justify-between",children:[e.jsx("div",{className:"flex-1 flex",children:e.jsxs("div",{className:"w-full flex md:ml-0",children:[e.jsx("label",{htmlFor:"search-field",className:"sr-only",children:"Search"}),e.jsxs("div",{className:"relative w-full text-gray-400 focus-within:text-gray-600",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pointer-events-none",children:e.jsx(ws,{className:"h-5 w-5"})}),e.jsx("input",{id:"search-field",className:"block w-full h-full pl-8 pr-3 py-2 border-transparent text-gray-900 placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-0 focus:border-transparent",placeholder:"Search customers, orders, products...",type:"search"})]})]})}),e.jsxs("div",{className:"ml-4 flex items-center md:ml-6",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",className:"bg-white p-1 rounded-full text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",onClick:()=>l(!i),children:[e.jsx(ul,{className:"h-6 w-6"}),e.jsx("span",{className:"absolute -top-1 -right-1 h-4 w-4 bg-red-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs text-white",children:"3"})})]}),i&&e.jsx("div",{className:"origin-top-right absolute right-0 mt-2 w-80 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none",children:e.jsxs("div",{className:"py-1",children:[e.jsx("div",{className:"px-4 py-2 text-sm font-medium text-gray-900 border-b border-gray-200",children:"Notifications"}),e.jsxs("div",{className:"px-4 py-3 text-sm text-gray-700 hover:bg-gray-100",children:[e.jsx("div",{className:"font-medium",children:"New board placement"}),e.jsx("div",{className:"text-gray-500",children:"John Doe placed a premium billboard"}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"2 minutes ago"})]}),e.jsxs("div",{className:"px-4 py-3 text-sm text-gray-700 hover:bg-gray-100",children:[e.jsx("div",{className:"font-medium",children:"Product distribution completed"}),e.jsx("div",{className:"text-gray-500",children:"Jane Smith completed delivery to ABC Store"}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"15 minutes ago"})]}),e.jsxs("div",{className:"px-4 py-3 text-sm text-gray-700 hover:bg-gray-100",children:[e.jsx("div",{className:"font-medium",children:"Low inventory alert"}),e.jsx("div",{className:"text-gray-500",children:"Premium Widget A is running low"}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"1 hour ago"})]}),e.jsx("div",{className:"px-4 py-2 text-center border-t border-gray-200",children:e.jsx("button",{className:"text-sm text-primary-600 hover:text-primary-500",children:"View all notifications"})})]})})]}),e.jsxs("div",{className:"ml-3 relative",children:[e.jsx("div",{children:e.jsx("button",{type:"button",className:"max-w-xs bg-white flex items-center text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",onClick:()=>n(!r),children:e.jsx("div",{className:"h-8 w-8 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-sm font-medium text-primary-600",children:[(d=a==null?void 0:a.first_name)==null?void 0:d[0],(u=a==null?void 0:a.last_name)==null?void 0:u[0]]})})})}),r&&e.jsx("div",{className:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none",children:e.jsxs("div",{className:"py-1",children:[e.jsxs("div",{className:"px-4 py-2 text-sm text-gray-700 border-b border-gray-200",children:[e.jsxs("div",{className:"font-medium",children:[a==null?void 0:a.first_name," ",a==null?void 0:a.last_name]}),e.jsx("div",{className:"text-gray-500",children:a==null?void 0:a.email})]}),e.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[e.jsx(rr,{className:"mr-3 h-4 w-4"}),"Profile Settings"]}),e.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[e.jsx(gn,{className:"mr-3 h-4 w-4"}),"Preferences"]}),e.jsx("div",{className:"border-t border-gray-200",children:e.jsxs("button",{onClick:c,className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[e.jsx(pl,{className:"mr-3 h-4 w-4"}),"Sign out"]})})]})})]})]})]})]})}const Wd=({className:t="",showWhenOnline:a=!1})=>{const[s,r]=y.useState(navigator.onLine),[n,i]=y.useState(!1);return y.useEffect(()=>{const l=()=>{r(!0),i(!0),setTimeout(()=>i(!1),3e3)},c=()=>{r(!1),i(!0)};return window.addEventListener("online",l),window.addEventListener("offline",c),()=>{window.removeEventListener("online",l),window.removeEventListener("offline",c)}},[]),s&&!a&&!n?null:e.jsx("div",{className:`fixed top-4 right-4 z-50 ${t}`,children:e.jsx("div",{className:`
          flex items-center space-x-2 px-4 py-2 rounded-lg shadow-lg transition-all duration-300
          ${s?"bg-green-500 text-white":"bg-red-500 text-white"}
          ${n?"opacity-100 translate-y-0":"opacity-0 -translate-y-2"}
        `,children:s?e.jsxs(e.Fragment,{children:[e.jsx(gl,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Back online"})]}):e.jsxs(e.Fragment,{children:[e.jsx(fl,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"You're offline"})]})})})};function Gd(){const[t,a]=y.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t&&e.jsxs("div",{className:"fixed inset-0 z-40 lg:hidden",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25",onClick:()=>a(!1)}),e.jsxs("div",{className:"relative flex-1 flex flex-col max-w-xs w-full bg-white",children:[e.jsx("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:e.jsx("button",{type:"button",className:"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:()=>a(!1),children:e.jsx(jl,{className:"h-6 w-6 text-white"})})}),e.jsx(vi,{})]})]}),e.jsx("div",{className:"hidden lg:flex lg:w-64 lg:flex-col lg:fixed lg:inset-y-0",children:e.jsx(vi,{})}),e.jsxs("div",{className:"lg:pl-64 flex flex-col flex-1",children:[e.jsx(Qd,{onMenuClick:()=>a(!0)}),e.jsx("main",{className:"flex-1 pb-8",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsx(wn,{})})})]}),e.jsx(Wd,{})]})}class Hd extends y.Component{constructor(s){super(s);Xe(this,"handleReset",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})});this.state={hasError:!1}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,r){var n,i;console.error("ErrorBoundary caught an error:",s,r),this.setState({error:s,errorInfo:r}),(i=(n=this.props).onError)==null||i.call(n,s,r)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6 text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(we,{className:"h-12 w-12 text-red-500"})}),e.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"We're sorry, but something unexpected happened. Please try refreshing the page."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:this.handleReset,className:"w-full btn-primary flex items-center justify-center gap-2",children:[e.jsx(_s,{className:"h-4 w-4"}),"Try Again"]}),e.jsx("button",{onClick:()=>window.location.reload(),className:"w-full btn-outline",children:"Refresh Page"})]}),!1]})}):this.props.children}}var Na=t=>t.type==="checkbox",gt=t=>t instanceof Date,is=t=>t==null;const Jn=t=>typeof t=="object";var Ue=t=>!is(t)&&!Array.isArray(t)&&Jn(t)&&!gt(t),Zd=t=>Ue(t)&&t.target?Na(t.target)?t.target.checked:t.target.value:t,Jd=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,Xd=(t,a)=>t.has(Jd(a)),eo=t=>{const a=t.constructor&&t.constructor.prototype;return Ue(a)&&a.hasOwnProperty("isPrototypeOf")},Ir=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Me(t){let a;const s=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)a=new Date(t);else if(!(Ir&&(t instanceof Blob||r))&&(s||Ue(t)))if(a=s?[]:Object.create(Object.getPrototypeOf(t)),!s&&!eo(t))a=t;else for(const n in t)t.hasOwnProperty(n)&&(a[n]=Me(t[n]));else return t;return a}var za=t=>/^\w*$/.test(t),Ae=t=>t===void 0,Mr=t=>Array.isArray(t)?t.filter(Boolean):[],Vr=t=>Mr(t.replace(/["|']|\]/g,"").split(/\.|\[/)),B=(t,a,s)=>{if(!a||!Ue(t))return s;const r=(za(a)?[a]:Vr(a)).reduce((n,i)=>is(n)?n:n[i],t);return Ae(r)||r===t?Ae(t[a])?s:t[a]:r},Ss=t=>typeof t=="boolean",Ne=(t,a,s)=>{let r=-1;const n=za(a)?[a]:Vr(a),i=n.length,l=i-1;for(;++r<i;){const c=n[r];let d=s;if(r!==l){const u=t[c];d=Ue(u)||Array.isArray(u)?u:isNaN(+n[r+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;t[c]=d,t=t[c]}};const Ni={BLUR:"blur",FOCUS_OUT:"focusout"},vs={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ls={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},so=Ee.createContext(null);so.displayName="HookFormContext";var to=(t,a,s,r=!0)=>{const n={defaultValues:a._defaultValues};for(const i in t)Object.defineProperty(n,i,{get:()=>{const l=i;return a._proxyFormState[l]!==vs.all&&(a._proxyFormState[l]=!r||vs.all),t[l]}});return n};const ao=typeof window<"u"?Ee.useLayoutEffect:Ee.useEffect;var ls=t=>typeof t=="string",ro=(t,a,s,r,n)=>ls(t)?(r&&a.watch.add(t),B(s,t,n)):Array.isArray(t)?t.map(i=>(r&&a.watch.add(i),B(s,i))):(r&&(a.watchAll=!0),s),Sr=t=>is(t)||!Jn(t);function Hs(t,a,s=new WeakSet){if(Sr(t)||Sr(a))return t===a;if(gt(t)&&gt(a))return t.getTime()===a.getTime();const r=Object.keys(t),n=Object.keys(a);if(r.length!==n.length)return!1;if(s.has(t)||s.has(a))return!0;s.add(t),s.add(a);for(const i of r){const l=t[i];if(!n.includes(i))return!1;if(i!=="ref"){const c=a[i];if(gt(l)&&gt(c)||Ue(l)&&Ue(c)||Array.isArray(l)&&Array.isArray(c)?!Hs(l,c,s):l!==c)return!1}}return!0}var io=(t,a,s,r,n)=>a?{...s[t],types:{...s[t]&&s[t].types?s[t].types:{},[r]:n||!0}}:{},da=t=>Array.isArray(t)?t:[t],bi=()=>{let t=[];return{get observers(){return t},next:n=>{for(const i of t)i.next&&i.next(n)},subscribe:n=>(t.push(n),{unsubscribe:()=>{t=t.filter(i=>i!==n)}}),unsubscribe:()=>{t=[]}}};function Xn(t,a){const s={};for(const r in t)if(t.hasOwnProperty(r)){const n=t[r],i=a[r];if(n&&Ue(n)&&i){const l=Xn(n,i);Ue(l)&&(s[r]=l)}else t[r]&&(s[r]=i)}return s}var ts=t=>Ue(t)&&!Object.keys(t).length,Br=t=>t.type==="file",Ns=t=>typeof t=="function",Ia=t=>{if(!Ir)return!1;const a=t?t.ownerDocument:0;return t instanceof(a&&a.defaultView?a.defaultView.HTMLElement:HTMLElement)},el=t=>t.type==="select-multiple",Kr=t=>t.type==="radio",no=t=>Kr(t)||Na(t),er=t=>Ia(t)&&t.isConnected;function lo(t,a){const s=a.slice(0,-1).length;let r=0;for(;r<s;)t=Ae(t)?r++:t[a[r++]];return t}function co(t){for(const a in t)if(t.hasOwnProperty(a)&&!Ae(t[a]))return!1;return!0}function Re(t,a){const s=Array.isArray(a)?a:za(a)?[a]:Vr(a),r=s.length===1?t:lo(t,s),n=s.length-1,i=s[n];return r&&delete r[i],n!==0&&(Ue(r)&&ts(r)||Array.isArray(r)&&co(r))&&Re(t,s.slice(0,-1)),t}var oo=t=>{for(const a in t)if(Ns(t[a]))return!0;return!1};function sl(t){return Array.isArray(t)||Ue(t)&&!oo(t)}function kr(t,a={}){for(const s in t)sl(t[s])?(a[s]=Array.isArray(t[s])?[]:{},kr(t[s],a[s])):Ae(t[s])||(a[s]=!0);return a}function Ot(t,a,s){s||(s=kr(a));for(const r in t)sl(t[r])?Ae(a)||Sr(s[r])?s[r]=kr(t[r],Array.isArray(t[r])?[]:{}):Ot(t[r],is(a)?{}:a[r],s[r]):s[r]=!Hs(t[r],a[r]);return s}const wi={value:!1,isValid:!1},_i={value:!0,isValid:!0};var tl=t=>{if(Array.isArray(t)){if(t.length>1){const a=t.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:a,isValid:!!a.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Ae(t[0].attributes.value)?Ae(t[0].value)||t[0].value===""?_i:{value:t[0].value,isValid:!0}:_i:wi}return wi},al=(t,{valueAsNumber:a,valueAsDate:s,setValueAs:r})=>Ae(t)?t:a?t===""?NaN:t&&+t:s&&ls(t)?new Date(t):r?r(t):t;const Si={isValid:!1,value:null};var rl=t=>Array.isArray(t)?t.reduce((a,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:a,Si):Si;function ki(t){const a=t.ref;return Br(a)?a.files:Kr(a)?rl(t.refs).value:el(a)?[...a.selectedOptions].map(({value:s})=>s):Na(a)?tl(t.refs).value:al(Ae(a.value)?t.ref.value:a.value,t)}var mo=(t,a,s,r)=>{const n={};for(const i of t){const l=B(a,i);l&&Ne(n,i,l._f)}return{criteriaMode:s,names:[...t],fields:n,shouldUseNativeValidation:r}},Ma=t=>t instanceof RegExp,ia=t=>Ae(t)?t:Ma(t)?t.source:Ue(t)?Ma(t.value)?t.value.source:t.value:t,Ci=t=>({isOnSubmit:!t||t===vs.onSubmit,isOnBlur:t===vs.onBlur,isOnChange:t===vs.onChange,isOnAll:t===vs.all,isOnTouch:t===vs.onTouched});const $i="AsyncFunction";var xo=t=>!!t&&!!t.validate&&!!(Ns(t.validate)&&t.validate.constructor.name===$i||Ue(t.validate)&&Object.values(t.validate).find(a=>a.constructor.name===$i)),ho=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),Ai=(t,a,s)=>!s&&(a.watchAll||a.watch.has(t)||[...a.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const oa=(t,a,s,r)=>{for(const n of s||Object.keys(t)){const i=B(t,n);if(i){const{_f:l,...c}=i;if(l){if(l.refs&&l.refs[0]&&a(l.refs[0],n)&&!r)return!0;if(l.ref&&a(l.ref,l.name)&&!r)return!0;if(oa(c,a))break}else if(Ue(c)&&oa(c,a))break}}};function Pi(t,a,s){const r=B(t,s);if(r||za(s))return{error:r,name:s};const n=s.split(".");for(;n.length;){const i=n.join("."),l=B(a,i),c=B(t,i);if(l&&!Array.isArray(l)&&s!==i)return{name:s};if(c&&c.type)return{name:i,error:c};if(c&&c.root&&c.root.type)return{name:`${i}.root`,error:c.root};n.pop()}return{name:s}}var uo=(t,a,s,r)=>{s(t);const{name:n,...i}=t;return ts(i)||Object.keys(i).length>=Object.keys(a).length||Object.keys(i).find(l=>a[l]===(!r||vs.all))},po=(t,a,s)=>!t||!a||t===a||da(t).some(r=>r&&(s?r===a:r.startsWith(a)||a.startsWith(r))),go=(t,a,s,r,n)=>n.isOnAll?!1:!s&&n.isOnTouch?!(a||t):(s?r.isOnBlur:n.isOnBlur)?!t:(s?r.isOnChange:n.isOnChange)?t:!0,fo=(t,a)=>!Mr(B(t,a)).length&&Re(t,a),jo=(t,a,s)=>{const r=da(B(t,s));return Ne(r,"root",a[s]),Ne(t,s,r),t};function Ri(t,a,s="validate"){if(ls(t)||Array.isArray(t)&&t.every(ls)||Ss(t)&&!t)return{type:s,message:ls(t)?t:"",ref:a}}var Ut=t=>Ue(t)&&!Ma(t)?t:{value:t,message:""},Ei=async(t,a,s,r,n,i)=>{const{ref:l,refs:c,required:d,maxLength:u,minLength:o,min:g,max:m,pattern:x,validate:$,name:N,valueAsNumber:p,mount:h}=t._f,S=B(s,N);if(!h||a.has(N))return{};const A=c?c[0]:l,w=q=>{n&&A.reportValidity&&(A.setCustomValidity(Ss(q)?"":q||""),A.reportValidity())},b={},j=Kr(l),T=Na(l),k=j||T,D=(p||Br(l))&&Ae(l.value)&&Ae(S)||Ia(l)&&l.value===""||S===""||Array.isArray(S)&&!S.length,R=io.bind(null,N,r,b),se=(q,Z,F,ce=Ls.maxLength,je=Ls.minLength)=>{const _e=q?Z:F;b[N]={type:q?ce:je,message:_e,ref:l,...R(q?ce:je,_e)}};if(i?!Array.isArray(S)||!S.length:d&&(!k&&(D||is(S))||Ss(S)&&!S||T&&!tl(c).isValid||j&&!rl(c).isValid)){const{value:q,message:Z}=ls(d)?{value:!!d,message:d}:Ut(d);if(q&&(b[N]={type:Ls.required,message:Z,ref:A,...R(Ls.required,Z)},!r))return w(Z),b}if(!D&&(!is(g)||!is(m))){let q,Z;const F=Ut(m),ce=Ut(g);if(!is(S)&&!isNaN(S)){const je=l.valueAsNumber||S&&+S;is(F.value)||(q=je>F.value),is(ce.value)||(Z=je<ce.value)}else{const je=l.valueAsDate||new Date(S),_e=re=>new Date(new Date().toDateString()+" "+re),_=l.type=="time",P=l.type=="week";ls(F.value)&&S&&(q=_?_e(S)>_e(F.value):P?S>F.value:je>new Date(F.value)),ls(ce.value)&&S&&(Z=_?_e(S)<_e(ce.value):P?S<ce.value:je<new Date(ce.value))}if((q||Z)&&(se(!!q,F.message,ce.message,Ls.max,Ls.min),!r))return w(b[N].message),b}if((u||o)&&!D&&(ls(S)||i&&Array.isArray(S))){const q=Ut(u),Z=Ut(o),F=!is(q.value)&&S.length>+q.value,ce=!is(Z.value)&&S.length<+Z.value;if((F||ce)&&(se(F,q.message,Z.message),!r))return w(b[N].message),b}if(x&&!D&&ls(S)){const{value:q,message:Z}=Ut(x);if(Ma(q)&&!S.match(q)&&(b[N]={type:Ls.pattern,message:Z,ref:l,...R(Ls.pattern,Z)},!r))return w(Z),b}if($){if(Ns($)){const q=await $(S,s),Z=Ri(q,A);if(Z&&(b[N]={...Z,...R(Ls.validate,Z.message)},!r))return w(Z.message),b}else if(Ue($)){let q={};for(const Z in $){if(!ts(q)&&!r)break;const F=Ri(await $[Z](S,s),A,Z);F&&(q={...F,...R(Z,F.message)},w(F.message),r&&(b[N]=q))}if(!ts(q)&&(b[N]={ref:A,...q},!r))return b}}return w(!0),b};const yo={mode:vs.onSubmit,reValidateMode:vs.onChange,shouldFocusError:!0};function vo(t={}){let a={...yo,...t},s={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ns(a.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:a.errors||{},disabled:a.disabled||!1},r={},n=Ue(a.defaultValues)||Ue(a.values)?Me(a.defaultValues||a.values)||{}:{},i=a.shouldUnregister?{}:Me(n),l={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,u=0;const o={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let g={...o};const m={array:bi(),state:bi()},x=a.criteriaMode===vs.all,$=v=>C=>{clearTimeout(u),u=setTimeout(v,C)},N=async v=>{if(!a.disabled&&(o.isValid||g.isValid||v)){const C=a.resolver?ts((await T()).errors):await D(r,!0);C!==s.isValid&&m.state.next({isValid:C})}},p=(v,C)=>{!a.disabled&&(o.isValidating||o.validatingFields||g.isValidating||g.validatingFields)&&((v||Array.from(c.mount)).forEach(E=>{E&&(C?Ne(s.validatingFields,E,C):Re(s.validatingFields,E))}),m.state.next({validatingFields:s.validatingFields,isValidating:!ts(s.validatingFields)}))},h=(v,C=[],E,V,O=!0,U=!0)=>{if(V&&E&&!a.disabled){if(l.action=!0,U&&Array.isArray(B(r,v))){const Q=E(B(r,v),V.argA,V.argB);O&&Ne(r,v,Q)}if(U&&Array.isArray(B(s.errors,v))){const Q=E(B(s.errors,v),V.argA,V.argB);O&&Ne(s.errors,v,Q),fo(s.errors,v)}if((o.touchedFields||g.touchedFields)&&U&&Array.isArray(B(s.touchedFields,v))){const Q=E(B(s.touchedFields,v),V.argA,V.argB);O&&Ne(s.touchedFields,v,Q)}(o.dirtyFields||g.dirtyFields)&&(s.dirtyFields=Ot(n,i)),m.state.next({name:v,isDirty:se(v,C),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else Ne(i,v,C)},S=(v,C)=>{Ne(s.errors,v,C),m.state.next({errors:s.errors})},A=v=>{s.errors=v,m.state.next({errors:s.errors,isValid:!1})},w=(v,C,E,V)=>{const O=B(r,v);if(O){const U=B(i,v,Ae(E)?B(n,v):E);Ae(U)||V&&V.defaultChecked||C?Ne(i,v,C?U:ki(O._f)):F(v,U),l.mount&&N()}},b=(v,C,E,V,O)=>{let U=!1,Q=!1;const ge={name:v};if(!a.disabled){if(!E||V){(o.isDirty||g.isDirty)&&(Q=s.isDirty,s.isDirty=ge.isDirty=se(),U=Q!==ge.isDirty);const fe=Hs(B(n,v),C);Q=!!B(s.dirtyFields,v),fe?Re(s.dirtyFields,v):Ne(s.dirtyFields,v,!0),ge.dirtyFields=s.dirtyFields,U=U||(o.dirtyFields||g.dirtyFields)&&Q!==!fe}if(E){const fe=B(s.touchedFields,v);fe||(Ne(s.touchedFields,v,E),ge.touchedFields=s.touchedFields,U=U||(o.touchedFields||g.touchedFields)&&fe!==E)}U&&O&&m.state.next(ge)}return U?ge:{}},j=(v,C,E,V)=>{const O=B(s.errors,v),U=(o.isValid||g.isValid)&&Ss(C)&&s.isValid!==C;if(a.delayError&&E?(d=$(()=>S(v,E)),d(a.delayError)):(clearTimeout(u),d=null,E?Ne(s.errors,v,E):Re(s.errors,v)),(E?!Hs(O,E):O)||!ts(V)||U){const Q={...V,...U&&Ss(C)?{isValid:C}:{},errors:s.errors,name:v};s={...s,...Q},m.state.next(Q)}},T=async v=>{p(v,!0);const C=await a.resolver(i,a.context,mo(v||c.mount,r,a.criteriaMode,a.shouldUseNativeValidation));return p(v),C},k=async v=>{const{errors:C}=await T(v);if(v)for(const E of v){const V=B(C,E);V?Ne(s.errors,E,V):Re(s.errors,E)}else s.errors=C;return C},D=async(v,C,E={valid:!0})=>{for(const V in v){const O=v[V];if(O){const{_f:U,...Q}=O;if(U){const ge=c.array.has(U.name),fe=O._f&&xo(O._f);fe&&o.validatingFields&&p([U.name],!0);const xs=await Ei(O,c.disabled,i,x,a.shouldUseNativeValidation&&!C,ge);if(fe&&o.validatingFields&&p([U.name]),xs[U.name]&&(E.valid=!1,C))break;!C&&(B(xs,U.name)?ge?jo(s.errors,xs,U.name):Ne(s.errors,U.name,xs[U.name]):Re(s.errors,U.name))}!ts(Q)&&await D(Q,C,E)}}return E.valid},R=()=>{for(const v of c.unMount){const C=B(r,v);C&&(C._f.refs?C._f.refs.every(E=>!er(E)):!er(C._f.ref))&&Rt(v)}c.unMount=new Set},se=(v,C)=>!a.disabled&&(v&&C&&Ne(i,v,C),!Hs(re(),n)),q=(v,C,E)=>ro(v,c,{...l.mount?i:Ae(C)?n:ls(v)?{[v]:C}:C},E,C),Z=v=>Mr(B(l.mount?i:n,v,a.shouldUnregister?B(n,v,[]):[])),F=(v,C,E={})=>{const V=B(r,v);let O=C;if(V){const U=V._f;U&&(!U.disabled&&Ne(i,v,al(C,U)),O=Ia(U.ref)&&is(C)?"":C,el(U.ref)?[...U.ref.options].forEach(Q=>Q.selected=O.includes(Q.value)):U.refs?Na(U.ref)?U.refs.forEach(Q=>{(!Q.defaultChecked||!Q.disabled)&&(Array.isArray(O)?Q.checked=!!O.find(ge=>ge===Q.value):Q.checked=O===Q.value||!!O)}):U.refs.forEach(Q=>Q.checked=Q.value===O):Br(U.ref)?U.ref.value="":(U.ref.value=O,U.ref.type||m.state.next({name:v,values:Me(i)})))}(E.shouldDirty||E.shouldTouch)&&b(v,O,E.shouldTouch,E.shouldDirty,!0),E.shouldValidate&&P(v)},ce=(v,C,E)=>{for(const V in C){if(!C.hasOwnProperty(V))return;const O=C[V],U=v+"."+V,Q=B(r,U);(c.array.has(v)||Ue(O)||Q&&!Q._f)&&!gt(O)?ce(U,O,E):F(U,O,E)}},je=(v,C,E={})=>{const V=B(r,v),O=c.array.has(v),U=Me(C);Ne(i,v,U),O?(m.array.next({name:v,values:Me(i)}),(o.isDirty||o.dirtyFields||g.isDirty||g.dirtyFields)&&E.shouldDirty&&m.state.next({name:v,dirtyFields:Ot(n,i),isDirty:se(v,U)})):V&&!V._f&&!is(U)?ce(v,U,E):F(v,U,E),Ai(v,c)&&m.state.next({...s,name:v}),m.state.next({name:l.mount?v:void 0,values:Me(i)})},_e=async v=>{l.mount=!0;const C=v.target;let E=C.name,V=!0;const O=B(r,E),U=fe=>{V=Number.isNaN(fe)||gt(fe)&&isNaN(fe.getTime())||Hs(fe,B(i,E,fe))},Q=Ci(a.mode),ge=Ci(a.reValidateMode);if(O){let fe,xs;const _a=C.type?ki(O._f):Zd(v),Qs=v.type===Ni.BLUR||v.type===Ni.FOCUS_OUT,ll=!ho(O._f)&&!a.resolver&&!B(s.errors,E)&&!O._f.deps||go(Qs,B(s.touchedFields,E),s.isSubmitted,ge,Q),Wa=Ai(E,c,Qs);Ne(i,E,_a),Qs?(!C||!C.readOnly)&&(O._f.onBlur&&O._f.onBlur(v),d&&d(0)):O._f.onChange&&O._f.onChange(v);const Ga=b(E,_a,Qs),cl=!ts(Ga)||Wa;if(!Qs&&m.state.next({name:E,type:v.type,values:Me(i)}),ll)return(o.isValid||g.isValid)&&(a.mode==="onBlur"?Qs&&N():Qs||N()),cl&&m.state.next({name:E,...Wa?{}:Ga});if(!Qs&&Wa&&m.state.next({...s}),a.resolver){const{errors:Wr}=await T([E]);if(U(_a),V){const dl=Pi(s.errors,r,E),Gr=Pi(Wr,r,dl.name||E);fe=Gr.error,E=Gr.name,xs=ts(Wr)}}else p([E],!0),fe=(await Ei(O,c.disabled,i,x,a.shouldUseNativeValidation))[E],p([E]),U(_a),V&&(fe?xs=!1:(o.isValid||g.isValid)&&(xs=await D(r,!0)));V&&(O._f.deps&&(!Array.isArray(O._f.deps)||O._f.deps.length>0)&&P(O._f.deps),j(E,xs,fe,Ga))}},_=(v,C)=>{if(B(s.errors,C)&&v.focus)return v.focus(),1},P=async(v,C={})=>{let E,V;const O=da(v);if(a.resolver){const U=await k(Ae(v)?v:O);E=ts(U),V=v?!O.some(Q=>B(U,Q)):E}else v?(V=(await Promise.all(O.map(async U=>{const Q=B(r,U);return await D(Q&&Q._f?{[U]:Q}:Q)}))).every(Boolean),!(!V&&!s.isValid)&&N()):V=E=await D(r);return m.state.next({...!ls(v)||(o.isValid||g.isValid)&&E!==s.isValid?{}:{name:v},...a.resolver||!v?{isValid:E}:{},errors:s.errors}),C.shouldFocus&&!V&&oa(r,_,v?O:c.mount),V},re=(v,C)=>{let E={...l.mount?i:n};return C&&(E=Xn(C.dirtyFields?s.dirtyFields:s.touchedFields,E)),Ae(v)?E:ls(v)?B(E,v):v.map(V=>B(E,V))},I=(v,C)=>({invalid:!!B((C||s).errors,v),isDirty:!!B((C||s).dirtyFields,v),error:B((C||s).errors,v),isValidating:!!B(s.validatingFields,v),isTouched:!!B((C||s).touchedFields,v)}),W=v=>{v&&da(v).forEach(C=>Re(s.errors,C)),m.state.next({errors:v?s.errors:{}})},Je=(v,C,E)=>{const V=(B(r,v,{_f:{}})._f||{}).ref,O=B(s.errors,v)||{},{ref:U,message:Q,type:ge,...fe}=O;Ne(s.errors,v,{...fe,...C,ref:V}),m.state.next({name:v,errors:s.errors,isValid:!1}),E&&E.shouldFocus&&V&&V.focus&&V.focus()},ms=(v,C)=>Ns(v)?m.state.subscribe({next:E=>"values"in E&&v(q(void 0,C),E)}):q(v,C,!0),ra=v=>m.state.subscribe({next:C=>{po(v.name,C.name,v.exact)&&uo(C,v.formState||o,nl,v.reRenderRoot)&&v.callback({values:{...i},...s,...C,defaultValues:n})}}).unsubscribe,Qa=v=>(l.mount=!0,g={...g,...v.formState},ra({...v,formState:g})),Rt=(v,C={})=>{for(const E of v?da(v):c.mount)c.mount.delete(E),c.array.delete(E),C.keepValue||(Re(r,E),Re(i,E)),!C.keepError&&Re(s.errors,E),!C.keepDirty&&Re(s.dirtyFields,E),!C.keepTouched&&Re(s.touchedFields,E),!C.keepIsValidating&&Re(s.validatingFields,E),!a.shouldUnregister&&!C.keepDefaultValue&&Re(n,E);m.state.next({values:Me(i)}),m.state.next({...s,...C.keepDirty?{isDirty:se()}:{}}),!C.keepIsValid&&N()},L=({disabled:v,name:C})=>{(Ss(v)&&l.mount||v||c.disabled.has(C))&&(v?c.disabled.add(C):c.disabled.delete(C))},Se=(v,C={})=>{let E=B(r,v);const V=Ss(C.disabled)||Ss(a.disabled);return Ne(r,v,{...E||{},_f:{...E&&E._f?E._f:{ref:{name:v}},name:v,mount:!0,...C}}),c.mount.add(v),E?L({disabled:Ss(C.disabled)?C.disabled:a.disabled,name:v}):w(v,!0,C.value),{...V?{disabled:C.disabled||a.disabled}:{},...a.progressive?{required:!!C.required,min:ia(C.min),max:ia(C.max),minLength:ia(C.minLength),maxLength:ia(C.maxLength),pattern:ia(C.pattern)}:{},name:v,onChange:_e,onBlur:_e,ref:O=>{if(O){Se(v,C),E=B(r,v);const U=Ae(O.value)&&O.querySelectorAll&&O.querySelectorAll("input,select,textarea")[0]||O,Q=no(U),ge=E._f.refs||[];if(Q?ge.find(fe=>fe===U):U===E._f.ref)return;Ne(r,v,{_f:{...E._f,...Q?{refs:[...ge.filter(er),U,...Array.isArray(B(n,v))?[{}]:[]],ref:{type:U.type,name:v}}:{ref:U}}}),w(v,!1,void 0,U)}else E=B(r,v,{}),E._f&&(E._f.mount=!1),(a.shouldUnregister||C.shouldUnregister)&&!(Xd(c.array,v)&&l.action)&&c.unMount.add(v)}}},ve=()=>a.shouldFocusError&&oa(r,_,c.mount),Le=v=>{Ss(v)&&(m.state.next({disabled:v}),oa(r,(C,E)=>{const V=B(r,E);V&&(C.disabled=V._f.disabled||v,Array.isArray(V._f.refs)&&V._f.refs.forEach(O=>{O.disabled=V._f.disabled||v}))},0,!1))},wa=(v,C)=>async E=>{let V;E&&(E.preventDefault&&E.preventDefault(),E.persist&&E.persist());let O=Me(i);if(m.state.next({isSubmitting:!0}),a.resolver){const{errors:U,values:Q}=await T();s.errors=U,O=Me(Q)}else await D(r);if(c.disabled.size)for(const U of c.disabled)Re(O,U);if(Re(s.errors,"root"),ts(s.errors)){m.state.next({errors:{}});try{await v(O,E)}catch(U){V=U}}else C&&await C({...s.errors},E),ve(),setTimeout(ve);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ts(s.errors)&&!V,submitCount:s.submitCount+1,errors:s.errors}),V)throw V},Et=(v,C={})=>{B(r,v)&&(Ae(C.defaultValue)?je(v,Me(B(n,v))):(je(v,C.defaultValue),Ne(n,v,Me(C.defaultValue))),C.keepTouched||Re(s.touchedFields,v),C.keepDirty||(Re(s.dirtyFields,v),s.isDirty=C.defaultValue?se(v,Me(B(n,v))):se()),C.keepError||(Re(s.errors,v),o.isValid&&N()),m.state.next({...s}))},Yr=(v,C={})=>{const E=v?Me(v):n,V=Me(E),O=ts(v),U=O?n:V;if(C.keepDefaultValues||(n=E),!C.keepValues){if(C.keepDirtyValues){const Q=new Set([...c.mount,...Object.keys(Ot(n,i))]);for(const ge of Array.from(Q))B(s.dirtyFields,ge)?Ne(U,ge,B(i,ge)):je(ge,B(U,ge))}else{if(Ir&&Ae(v))for(const Q of c.mount){const ge=B(r,Q);if(ge&&ge._f){const fe=Array.isArray(ge._f.refs)?ge._f.refs[0]:ge._f.ref;if(Ia(fe)){const xs=fe.closest("form");if(xs){xs.reset();break}}}}if(C.keepFieldsRef)for(const Q of c.mount)je(Q,B(U,Q));else r={}}i=a.shouldUnregister?C.keepDefaultValues?Me(n):{}:Me(U),m.array.next({values:{...U}}),m.state.next({values:{...U}})}c={mount:C.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!o.isValid||!!C.keepIsValid||!!C.keepDirtyValues,l.watch=!!a.shouldUnregister,m.state.next({submitCount:C.keepSubmitCount?s.submitCount:0,isDirty:O?!1:C.keepDirty?s.isDirty:!!(C.keepDefaultValues&&!Hs(v,n)),isSubmitted:C.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:O?{}:C.keepDirtyValues?C.keepDefaultValues&&i?Ot(n,i):s.dirtyFields:C.keepDefaultValues&&v?Ot(n,v):C.keepDirty?s.dirtyFields:{},touchedFields:C.keepTouched?s.touchedFields:{},errors:C.keepErrors?s.errors:{},isSubmitSuccessful:C.keepIsSubmitSuccessful?s.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:n})},zr=(v,C)=>Yr(Ns(v)?v(i):v,C),il=(v,C={})=>{const E=B(r,v),V=E&&E._f;if(V){const O=V.refs?V.refs[0]:V.ref;O.focus&&(O.focus(),C.shouldSelect&&Ns(O.select)&&O.select())}},nl=v=>{s={...s,...v}},Qr={control:{register:Se,unregister:Rt,getFieldState:I,handleSubmit:wa,setError:Je,_subscribe:ra,_runSchema:T,_focusError:ve,_getWatch:q,_getDirty:se,_setValid:N,_setFieldArray:h,_setDisabledField:L,_setErrors:A,_getFieldArray:Z,_reset:Yr,_resetDefaultValues:()=>Ns(a.defaultValues)&&a.defaultValues().then(v=>{zr(v,a.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:R,_disableForm:Le,_subjects:m,_proxyFormState:o,get _fields(){return r},get _formValues(){return i},get _state(){return l},set _state(v){l=v},get _defaultValues(){return n},get _names(){return c},set _names(v){c=v},get _formState(){return s},get _options(){return a},set _options(v){a={...a,...v}}},subscribe:Qa,trigger:P,register:Se,handleSubmit:wa,watch:ms,setValue:je,getValues:re,reset:zr,resetField:Et,clearErrors:W,unregister:Rt,setError:Je,setFocus:il,getFieldState:I};return{...Qr,formControl:Qr}}function qr(t={}){const a=Ee.useRef(void 0),s=Ee.useRef(void 0),[r,n]=Ee.useState({isDirty:!1,isValidating:!1,isLoading:Ns(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Ns(t.defaultValues)?void 0:t.defaultValues});if(!a.current)if(t.formControl)a.current={...t.formControl,formState:r},t.defaultValues&&!Ns(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:l,...c}=vo(t);a.current={...c,formState:r}}const i=a.current.control;return i._options=t,ao(()=>{const l=i._subscribe({formState:i._proxyFormState,callback:()=>n({...i._formState}),reRenderRoot:!0});return n(c=>({...c,isReady:!0})),i._formState.isReady=!0,l},[i]),Ee.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),Ee.useEffect(()=>{t.mode&&(i._options.mode=t.mode),t.reValidateMode&&(i._options.reValidateMode=t.reValidateMode)},[i,t.mode,t.reValidateMode]),Ee.useEffect(()=>{t.errors&&(i._setErrors(t.errors),i._focusError())},[i,t.errors]),Ee.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,t.shouldUnregister]),Ee.useEffect(()=>{if(i._proxyFormState.isDirty){const l=i._getDirty();l!==r.isDirty&&i._subjects.state.next({isDirty:l})}},[i,r.isDirty]),Ee.useEffect(()=>{t.values&&!Hs(t.values,s.current)?(i._reset(t.values,{keepFieldsRef:!0,...i._options.resetOptions}),s.current=t.values,n(l=>({...l}))):i._resetDefaultValues()},[i,t.values]),Ee.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),a.current.formState=to(r,i),a.current}function ta(...t){return Tl(Fl(t))}const No={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8",xl:"w-12 h-12"},bo={primary:"border-primary-600 border-t-transparent",white:"border-white border-t-transparent",gray:"border-gray-300 border-t-transparent"};function Pe({size:t="md",className:a,color:s="primary"}){return e.jsx("div",{className:ta("animate-spin rounded-full border-2",No[t],bo[s],a),role:"status","aria-label":"Loading",children:e.jsx("span",{className:"sr-only",children:"Loading..."})})}function wo(){var N,p;const[t,a]=y.useState(!1),[s,r]=y.useState(!1),{login:n,isLoading:i,error:l,clearError:c}=Fs(),d=_n(),o=((p=(N=Sn().state)==null?void 0:N.from)==null?void 0:p.pathname)||"/dashboard";y.useEffect(()=>{r(!0)},[]);const{register:g,handleSubmit:m,formState:{errors:x}}=qr({defaultValues:{email:"",password:"",remember_me:!1}}),$=async h=>{try{c(),await n(h),K.success("Welcome back!"),d(o,{replace:!0})}catch(S){K.error(S.message||"Login failed")}};return e.jsxs("div",{className:`space-y-6 transition-all duration-700 ease-out ${s?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:"Welcome Back"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Sign in to continue to your dashboard"})]}),e.jsxs("form",{className:"space-y-6",onSubmit:m($),children:[e.jsxs("div",{className:"group",children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2 transition-colors group-focus-within:text-blue-600",children:"Email address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none transition-colors group-focus-within:text-blue-600",children:e.jsx(ir,{className:"h-5 w-5 text-gray-400 group-focus-within:text-blue-500"})}),e.jsx("input",{...g("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),type:"email",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white hover:bg-white",placeholder:"Enter your email",autoComplete:"email"})]}),x.email&&e.jsx("p",{className:"mt-2 text-sm text-red-600 animate-pulse",children:x.email.message})]}),e.jsxs("div",{className:"group",children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2 transition-colors group-focus-within:text-blue-600",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none transition-colors group-focus-within:text-blue-600",children:e.jsx(nr,{className:"h-5 w-5 text-gray-400 group-focus-within:text-blue-500"})}),e.jsx("input",{...g("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}}),type:t?"text":"password",className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white hover:bg-white",placeholder:"Enter your password",autoComplete:"current-password"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 transition-colors",onClick:()=>a(!t),children:t?e.jsx(lr,{className:"h-5 w-5"}):e.jsx(ns,{className:"h-5 w-5"})})]}),x.password&&e.jsx("p",{className:"mt-2 text-sm text-red-600 animate-pulse",children:x.password.message})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{...g("remember_me"),id:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded transition-colors"}),e.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700 hover:text-gray-900 transition-colors",children:"Remember me"})]}),e.jsx("div",{className:"text-sm",children:e.jsx(It,{to:"/auth/forgot-password",className:"font-medium text-blue-600 hover:text-blue-500 transition-colors hover:underline",children:"Forgot password?"})})]}),l&&e.jsx("div",{className:"rounded-xl bg-red-50 border border-red-200 p-4 animate-pulse",children:e.jsx("div",{className:"text-sm text-red-700 font-medium",children:l})}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:i,className:"group w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 px-4 rounded-xl transition-all duration-200 flex justify-center items-center space-x-2 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:i?e.jsxs(e.Fragment,{children:[e.jsx(Pe,{size:"sm",color:"white",className:"mr-2"}),e.jsx("span",{children:"Signing in..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Sign in"}),e.jsx(yl,{className:"h-4 w-4 transition-transform group-hover:translate-x-1"})]})})})]}),!1]})}function _o(){const[t,a]=y.useState(!1),[s,r]=y.useState(!1),{register:n,handleSubmit:i,formState:{errors:l},getValues:c}=qr(),d=async u=>{a(!0);try{await ca.forgotPassword(u),r(!0),K.success("Password reset email sent!")}catch(o){K.error(o.message||"Failed to send reset email")}finally{a(!1)}};return s?e.jsxs("div",{className:"space-y-6 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"mx-auto h-12 w-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(ir,{className:"h-6 w-6 text-green-600"})}),e.jsx("h2",{className:"mt-4 text-2xl font-bold text-gray-900",children:"Check your email"}),e.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["We've sent a password reset link to"," ",e.jsx("span",{className:"font-medium",children:c("email")})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Didn't receive the email? Check your spam folder or try again."}),e.jsx("button",{onClick:()=>r(!1),className:"btn-outline w-full",children:"Try again"}),e.jsxs(It,{to:"/auth/login",className:"flex items-center justify-center text-sm text-primary-600 hover:text-primary-500",children:[e.jsx(Fa,{className:"h-4 w-4 mr-1"}),"Back to sign in"]})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs(It,{to:"/auth/login",className:"flex items-center text-sm text-primary-600 hover:text-primary-500 mb-4",children:[e.jsx(Fa,{className:"h-4 w-4 mr-1"}),"Back to sign in"]}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Forgot your password?"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"No worries! Enter your email address and we'll send you a link to reset your password."})]}),e.jsxs("form",{className:"space-y-6",onSubmit:i(d),children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"form-label",children:"Email address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(ir,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{...n("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),type:"email",className:"form-input pl-10",placeholder:"Enter your email",autoComplete:"email"})]}),l.email&&e.jsx("p",{className:"form-error",children:l.email.message})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:t,className:"w-full btn-primary flex justify-center items-center",children:t?e.jsxs(e.Fragment,{children:[e.jsx(Pe,{size:"sm",color:"white",className:"mr-2"}),"Sending..."]}):"Send reset link"})})]})]})}function So(){const[t,a]=y.useState(!1),[s,r]=y.useState(!1),[n,i]=y.useState(!1),[l]=Al(),c=_n(),d=l.get("token"),{register:u,handleSubmit:o,formState:{errors:g},watch:m}=qr(),x=m("password"),$=async N=>{if(!d){K.error("Invalid reset token");return}i(!0);try{await ca.resetPassword({token:d,password:N.password,password_confirmation:N.password_confirmation}),K.success("Password reset successfully!"),c("/auth/login")}catch(p){K.error(p.message||"Failed to reset password")}finally{i(!1)}};return d?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs(It,{to:"/auth/login",className:"flex items-center text-sm text-primary-600 hover:text-primary-500 mb-4",children:[e.jsx(Fa,{className:"h-4 w-4 mr-1"}),"Back to sign in"]}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Reset your password"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Enter your new password below."})]}),e.jsxs("form",{className:"space-y-6",onSubmit:o($),children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"form-label",children:"New password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(nr,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{...u("password",{required:"Password is required",minLength:{value:8,message:"Password must be at least 8 characters"},pattern:{value:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,message:"Password must contain at least one uppercase letter, one lowercase letter, and one number"}}),type:t?"text":"password",className:"form-input pl-10 pr-10",placeholder:"Enter new password"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>a(!t),children:t?e.jsx(lr,{className:"h-5 w-5 text-gray-400"}):e.jsx(ns,{className:"h-5 w-5 text-gray-400"})})]}),g.password&&e.jsx("p",{className:"form-error",children:g.password.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password_confirmation",className:"form-label",children:"Confirm new password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(nr,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{...u("password_confirmation",{required:"Please confirm your password",validate:N=>N===x||"Passwords do not match"}),type:s?"text":"password",className:"form-input pl-10 pr-10",placeholder:"Confirm new password"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>r(!s),children:s?e.jsx(lr,{className:"h-5 w-5 text-gray-400"}):e.jsx(ns,{className:"h-5 w-5 text-gray-400"})})]}),g.password_confirmation&&e.jsx("p",{className:"form-error",children:g.password_confirmation.message})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("p",{className:"font-medium mb-1",children:"Password requirements:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"At least 8 characters long"}),e.jsx("li",{children:"Contains at least one uppercase letter"}),e.jsx("li",{children:"Contains at least one lowercase letter"}),e.jsx("li",{children:"Contains at least one number"})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:n,className:"w-full btn-primary flex justify-center items-center",children:n?e.jsxs(e.Fragment,{children:[e.jsx(Pe,{size:"sm",color:"white",className:"mr-2"}),"Resetting..."]}):"Reset password"})})]})]}):e.jsxs("div",{className:"space-y-6 text-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Invalid Reset Link"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"This password reset link is invalid or has expired."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(It,{to:"/auth/forgot-password",className:"btn-primary w-full",children:"Request new reset link"}),e.jsxs(It,{to:"/auth/login",className:"flex items-center justify-center text-sm text-primary-600 hover:text-primary-500",children:[e.jsx(Fa,{className:"h-4 w-4 mr-1"}),"Back to sign in"]})]})]})}class ko extends ut{constructor(){super(...arguments);Xe(this,"baseUrl","/analytics")}async getDashboardMetrics(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}/dashboard?${r.toString()}`)).data}async getDashboardOverview(s={}){return this.getDashboardMetrics(s)}async getRecentActivity(s={}){const r=new URLSearchParams;return s.limit&&r.append("limit",String(s.limit)),(await this.get(`${this.baseUrl}/recent-activity?${r.toString()}`)).data}async getSalesAnalytics(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}/sales?${r.toString()}`)).data}async getVisitAnalytics(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}/visits?${r.toString()}`)).data}async getAgentAnalytics(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}/agents?${r.toString()}`)).data}async getCustomerAnalytics(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}/customers?${r.toString()}`)).data}async getProductAnalytics(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}/products?${r.toString()}`)).data}async getCampaignAnalytics(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}/campaigns?${r.toString()}`)).data}async getRevenueAnalytics(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}/revenue?${r.toString()}`)).data}async getPerformanceAnalytics(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}/performance?${r.toString()}`)).data}async generateReport(s){const r=await this.post(`${this.baseUrl}/reports`,s,{responseType:"blob"}),n=new Blob([r.data]),i=window.URL.createObjectURL(n),l=document.createElement("a");l.href=i,l.download=`analytics-report-${Date.now()}.${s.format}`,document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(i)}async getRealtimeMetrics(){return(await this.get(`${this.baseUrl}/realtime`)).data}async getComparativeAnalytics(s){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}/comparative?${r.toString()}`)).data}async getForecastAnalytics(s){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}/forecast?${r.toString()}`)).data}async getCustomAnalytics(s,r={}){return(await this.post(`${this.baseUrl}/custom`,{query:s,filter:r})).data}}const sr=new ko,aa={USD:{code:"USD",symbol:"$",name:"US Dollar",locale:"en-US",decimals:2},ZAR:{code:"ZAR",symbol:"R",name:"South African Rand",locale:"en-ZA",decimals:2},EUR:{code:"EUR",symbol:"",name:"Euro",locale:"en-EU",decimals:2},GBP:{code:"GBP",symbol:"",name:"British Pound",locale:"en-GB",decimals:2}};let Va="ZAR";const Co=t=>{Va=t,typeof window<"u"&&localStorage.setItem("salessync_currency",t)},Xt=()=>{if(typeof window<"u"){const t=localStorage.getItem("salessync_currency");t&&aa[t]&&(Va=t)}return Va},Te=(t,a,s)=>{let r,n;typeof a=="string"?(r=a,n=s||{}):typeof a=="object"&&a!==null?(r=Xt(),n=a):(r=Xt(),n={});const i=aa[r],{showSymbol:l=!0,showCode:c=!1,compact:d=!1}=n;if(d&&Math.abs(t)>=1e6){const o=t/1e6;return`${l?i.symbol:""}${o.toFixed(1)}M${c?` ${i.code}`:""}`}if(d&&Math.abs(t)>=1e3){const o=t/1e3;return`${l?i.symbol:""}${o.toFixed(1)}K${c?` ${i.code}`:""}`}const u=new Intl.NumberFormat(i.locale,{style:l?"currency":"decimal",currency:i.code,minimumFractionDigits:i.decimals,maximumFractionDigits:i.decimals}).format(t);return c&&!l?`${u} ${i.code}`:u},$o=t=>{const a=t||Xt();return aa[a].symbol},Ao=t=>{const a=t||Xt();return aa[a].name};if(typeof window<"u"){const t=localStorage.getItem("salessync_currency");t&&aa[t]&&(Va=t)}const G=Te,H=(t,a)=>{let s;typeof a=="string"?a==="MMM dd"?s={format:"short"}:s={format:"medium"}:s=a||{};const{format:r="medium",includeTime:n=!1,locale:i="en-GB"}=s,l=typeof t=="string"?new Date(t):t;if(isNaN(l.getTime()))return"Invalid Date";if(typeof a=="string"&&a==="MMM dd")return l.toLocaleDateString(i,{month:"short",day:"2-digit"});const c={};switch(r){case"short":c.dateStyle="short";break;case"medium":c.dateStyle="medium";break;case"long":c.dateStyle="long";break;case"full":c.dateStyle="full";break}return n&&(c.timeStyle="short"),new Intl.DateTimeFormat(i,c).format(l)},J=(t,a)=>{const{decimals:s=0,compact:r=!1,locale:n="en-GB"}={};if(r){if(Math.abs(t)>=1e6)return`${(t/1e6).toFixed(1)}M`;if(Math.abs(t)>=1e3)return`${(t/1e3).toFixed(1)}K`}return new Intl.NumberFormat(n,{minimumFractionDigits:s,maximumFractionDigits:s}).format(t)},Po=t=>{const a=t.replace(/\D/g,"");return a.length===10?a.replace(/(\d{5})(\d{3})(\d{3})/,"$1 $2 $3"):a.length===11&&a.startsWith("44")?`+${a.replace(/(\d{2})(\d{4})(\d{3})(\d{3})/,"$1 $2 $3 $4")}`:t};function Ro(){const{user:t}=Fs(),[a,s]=y.useState({start_date:new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],end_date:new Date().toISOString().split("T")[0]}),{data:r,isLoading:n,error:i,refetch:l}=de({queryKey:["dashboard-overview",a],queryFn:()=>sr.getDashboardOverview(a),staleTime:1e3*60*5}),{data:c}=de({queryKey:["sales-analytics",a],queryFn:()=>sr.getSalesAnalytics(a),staleTime:1e3*60*5}),{data:d}=de({queryKey:["recent-activity"],queryFn:()=>sr.getRecentActivity({limit:10}),staleTime:1e3*60*2}),u=()=>{l()},o=({title:x,value:$,icon:N,change:p,color:h="blue",subtitle:S})=>e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:`p-3 rounded-lg ${h==="blue"?"bg-blue-100":h==="green"?"bg-green-100":h==="yellow"?"bg-yellow-100":h==="red"?"bg-red-100":h==="purple"?"bg-purple-100":"bg-gray-100"}`,children:e.jsx(N,{className:`h-6 w-6 ${h==="blue"?"text-blue-600":h==="green"?"text-green-600":h==="yellow"?"text-yellow-600":h==="red"?"text-red-600":h==="purple"?"text-purple-600":"text-gray-600"}`})})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:x}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:$}),p!==void 0&&e.jsxs("div",{className:"flex items-center text-sm",children:[p>=0?e.jsx(oe,{className:"w-4 h-4 text-green-500 mr-1"}):e.jsx(oe,{className:"w-4 h-4 text-red-500 mr-1 rotate-180"}),e.jsxs("span",{className:p>=0?"text-green-600":"text-red-600",children:[Math.abs(p),"%"]}),e.jsx("span",{className:"text-gray-500 ml-1",children:"vs last period"})]}),S&&e.jsx("p",{className:"text-sm text-gray-500",children:S})]})]})});if(n)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Pe,{size:"lg"})});if(i)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(we,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Failed to load dashboard"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"There was an error loading your dashboard data."}),e.jsx("button",{onClick:u,className:"btn-primary",children:"Try Again"})]})});const g=(r==null?void 0:r.stats)||{},m=(r==null?void 0:r.trends)||{};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Welcome back, ",t==null?void 0:t.first_name,"!"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Here's what's happening with your sales operations today."})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"date",value:a.start_date,onChange:x=>s({...a,start_date:x.target.value}),className:"input text-sm"}),e.jsx("input",{type:"date",value:a.end_date,onChange:x=>s({...a,end_date:x.target.value}),className:"input text-sm"})]}),e.jsxs("button",{onClick:u,className:"btn-outline flex items-center space-x-2",children:[e.jsx(_s,{className:"w-4 h-4"}),e.jsx("span",{children:"Refresh"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(o,{title:"Total Revenue",value:G(g.total_revenue||0),icon:$e,change:g.revenue_growth,color:"green",subtitle:`${J(g.total_orders||0)} orders`}),e.jsx(o,{title:"Active Customers",value:J(g.active_customers||0),icon:Be,change:g.customer_growth,color:"blue",subtitle:`${J(g.new_customers||0)} new this period`}),e.jsx(o,{title:"Field Agents",value:J(g.total_agents||0),icon:Ke,change:g.agent_growth,color:"purple",subtitle:`${J(g.active_agents||0)} active today`}),e.jsx(o,{title:"Products Sold",value:J(g.products_sold||0),icon:Ce,change:g.products_growth,color:"yellow",subtitle:`${J(g.unique_products||0)} unique products`})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Revenue Trends"}),e.jsx(ye,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"h-80",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(Ps,{data:m.daily_revenue||[],children:[e.jsx(ue,{strokeDasharray:"3 3"}),e.jsx(pe,{dataKey:"date",tickFormatter:x=>H(x,{format:"short"})}),e.jsx(xe,{tickFormatter:x=>G(x,{compact:!0})}),e.jsx(le,{labelFormatter:x=>H(x),formatter:x=>[G(x),"Revenue"]}),e.jsx(fs,{type:"monotone",dataKey:"revenue",stroke:"#10B981",fill:"#10B981",fillOpacity:.1})]})})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Sales Performance"}),e.jsx(cs,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"h-80",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(ds,{data:m.daily_orders||[],children:[e.jsx(ue,{strokeDasharray:"3 3"}),e.jsx(pe,{dataKey:"date",tickFormatter:x=>H(x,{format:"short"})}),e.jsx(xe,{}),e.jsx(le,{labelFormatter:x=>H(x),formatter:x=>[J(x),"Orders"]}),e.jsx(os,{dataKey:"orders",fill:"#3B82F6"})]})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activity"}),e.jsx(bs,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"space-y-3",children:((d==null?void 0:d.activities)||[]).slice(0,8).map(x=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${x.type==="order"?"bg-green-500":x.type==="visit"?"bg-blue-500":x.type==="customer"?"bg-purple-500":"bg-gray-500"}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:x.description}),e.jsxs("p",{className:"text-sm text-gray-500",children:[x.agent_name,"  ",H(x.created_at)]})]}),x.value&&e.jsx("div",{className:"text-sm font-medium text-gray-900",children:G(x.value)})]},x.id))})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Top Performing Agents"}),e.jsx(Be,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"space-y-3",children:((r==null?void 0:r.top_performers)||[]).slice(0,5).map((x,$)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${$===0?"bg-yellow-100 text-yellow-800":$===1?"bg-gray-100 text-gray-800":$===2?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"}`,children:$+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:x.agent_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[x.total_orders," orders"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium text-gray-900",children:G(x.total_revenue)}),e.jsxs("p",{className:"text-sm text-gray-500",children:[x.success_rate,"% success rate"]})]})]},x.agent_id))})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Quick Actions"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("button",{onClick:()=>window.open("/orders/create","_blank"),className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(Ar,{className:"w-8 h-8 text-blue-600 mr-3"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"New Order"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Create a new customer order"})]})]}),e.jsxs("button",{onClick:()=>window.open("/customers/create","_blank"),className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(Be,{className:"w-8 h-8 text-green-600 mr-3"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Add Customer"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Register a new customer"})]})]}),e.jsxs("button",{onClick:()=>window.open("/visits/create","_blank"),className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(Ke,{className:"w-8 h-8 text-purple-600 mr-3"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Schedule Visit"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Plan a customer visit"})]})]}),e.jsxs("button",{onClick:()=>window.open("/reports","_blank"),className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(dt,{className:"w-8 h-8 text-yellow-600 mr-3"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"View Reports"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Access detailed analytics"})]})]})]})]}),(r==null?void 0:r.alerts)&&r.alerts.length>0&&e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"System Alerts"}),e.jsx(we,{className:"w-5 h-5 text-red-500"})]}),e.jsx("div",{className:"space-y-3",children:r.alerts.map((x,$)=>e.jsxs("div",{className:`flex items-start p-4 rounded-lg border ${x.priority==="high"?"bg-red-50 border-red-200":x.priority==="medium"?"bg-yellow-50 border-yellow-200":"bg-blue-50 border-blue-200"}`,children:[e.jsx(we,{className:`w-5 h-5 mt-0.5 mr-3 ${x.priority==="high"?"text-red-500":x.priority==="medium"?"text-yellow-500":"text-blue-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${x.priority==="high"?"text-red-900":x.priority==="medium"?"text-yellow-900":"text-blue-900"}`,children:x.title}),e.jsx("p",{className:`text-sm mt-1 ${x.priority==="high"?"text-red-700":x.priority==="medium"?"text-yellow-700":"text-blue-700"}`,children:x.message}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:H(x.created_at)})]})]},$))})]})]})}const Ti=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4","#84CC16","#F97316"];function Eo(){const[t,a]=y.useState(null),[s,r]=y.useState(!0),[n,i]=y.useState(null),[l,c]=y.useState("30d"),[d,u]=y.useState("revenue"),[o,g]=y.useState(!1);y.useEffect(()=>{m()},[l]);const m=async()=>{try{r(!0),i(null);const h={overview:{total_revenue:125e3,revenue_growth:12.5,total_orders:1250,orders_growth:8.3,total_customers:450,customers_growth:15.2,total_products:89,products_growth:5.1,avg_order_value:100,aov_growth:3.8,conversion_rate:24.5,conversion_growth:2.1},revenue_trend:Array.from({length:30},(S,A)=>({date:new Date(Date.now()-(29-A)*24*60*60*1e3).toISOString().split("T")[0],revenue:Math.floor(Math.random()*5e3)+2e3,orders:Math.floor(Math.random()*50)+20,customers:Math.floor(Math.random()*30)+10})),sales_by_category:[{category:"Electronics",revenue:45e3,orders:450,percentage:36},{category:"Clothing",revenue:32e3,orders:320,percentage:25.6},{category:"Home & Garden",revenue:25e3,orders:250,percentage:20},{category:"Sports",revenue:15e3,orders:150,percentage:12},{category:"Books",revenue:8e3,orders:80,percentage:6.4}],top_products:[{id:"1",name:"Wireless Headphones",revenue:15e3,quantity_sold:150,growth:25.3},{id:"2",name:"Smart Watch",revenue:12e3,quantity_sold:120,growth:18.7},{id:"3",name:"Laptop Stand",revenue:8500,quantity_sold:85,growth:-5.2},{id:"4",name:"Phone Case",revenue:7200,quantity_sold:240,growth:12.1},{id:"5",name:"Bluetooth Speaker",revenue:6800,quantity_sold:68,growth:8.9}],customer_segments:[{segment:"Premium",count:120,revenue:6e4,percentage:48},{segment:"Regular",count:200,revenue:45e3,percentage:36},{segment:"New",count:130,revenue:2e4,percentage:16}],field_agent_performance:[{agent_id:"1",agent_name:"John Smith",total_sales:25e3,orders_count:125,customers_visited:85,conversion_rate:68.2,commission_earned:2500},{agent_id:"2",agent_name:"Sarah Johnson",total_sales:22e3,orders_count:110,customers_visited:78,conversion_rate:71.8,commission_earned:2200},{agent_id:"3",agent_name:"Mike Davis",total_sales:18e3,orders_count:90,customers_visited:65,conversion_rate:69.2,commission_earned:1800},{agent_id:"4",agent_name:"Lisa Wilson",total_sales:2e4,orders_count:100,customers_visited:72,conversion_rate:72.2,commission_earned:2e3}],geographic_data:[{region:"North",revenue:45e3,orders:450,customers:180,growth:15.2},{region:"South",revenue:35e3,orders:350,customers:140,growth:8.7},{region:"East",revenue:25e3,orders:250,customers:100,growth:12.1},{region:"West",revenue:2e4,orders:200,customers:80,growth:5.3}],time_analysis:{peak_hours:Array.from({length:24},(S,A)=>({hour:A,orders:Math.floor(Math.random()*20)+5,revenue:Math.floor(Math.random()*2e3)+500})),peak_days:[{day:"Monday",orders:180,revenue:18e3},{day:"Tuesday",orders:165,revenue:16500},{day:"Wednesday",orders:190,revenue:19e3},{day:"Thursday",orders:175,revenue:17500},{day:"Friday",orders:220,revenue:22e3},{day:"Saturday",orders:200,revenue:2e4},{day:"Sunday",orders:120,revenue:12e3}]}};await new Promise(S=>setTimeout(S,1e3)),a(h)}catch(h){i("Failed to load analytics data"),console.error("Error loading analytics:",h)}finally{r(!1)}},x=async()=>{g(!0),await m(),g(!1)},$=h=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(h),N=h=>`${h>0?"+":""}${h.toFixed(1)}%`,p=()=>{const h=`Date,Revenue,Orders,Customers
`+((t==null?void 0:t.revenue_trend.map(b=>`${b.date},${b.revenue},${b.orders},${b.customers}`).join(`
`))||""),S=new Blob([h],{type:"text/csv"}),A=window.URL.createObjectURL(S),w=document.createElement("a");w.href=A,w.download=`analytics-${l}.csv`,w.click(),window.URL.revokeObjectURL(A)};return s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Pe,{})}):n?e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Analytics"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Comprehensive analytics and reporting dashboard."})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(fn,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Analytics"}),e.jsx("p",{className:"text-gray-600 mb-4",children:n}),e.jsx("button",{onClick:m,className:"btn-primary",children:"Try Again"})]})})]}):t?e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Analytics"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Comprehensive analytics and reporting dashboard with real-time insights."})]}),e.jsxs("div",{className:"mt-4 sm:mt-0 flex items-center space-x-3",children:[e.jsxs("select",{value:l,onChange:h=>c(h.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"}),e.jsx("option",{value:"1y",children:"Last year"})]}),e.jsx("button",{onClick:x,disabled:o,className:"btn-outline p-2",children:e.jsx(_s,{className:`h-4 w-4 ${o?"animate-spin":""}`})}),e.jsxs("button",{onClick:p,className:"btn-primary flex items-center space-x-2",children:[e.jsx(Ie,{className:"h-4 w-4"}),e.jsx("span",{children:"Export"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:$(t.overview.total_revenue)})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:e.jsx($e,{className:"h-6 w-6 text-green-600"})})]}),e.jsxs("div",{className:"mt-4 flex items-center",children:[t.overview.revenue_growth>0?e.jsx(Tt,{className:"h-4 w-4 text-green-500"}):e.jsx(Ft,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:`text-sm font-medium ${t.overview.revenue_growth>0?"text-green-600":"text-red-600"}`,children:N(t.overview.revenue_growth)}),e.jsx("span",{className:"text-sm text-gray-500 ml-2",children:"vs last period"})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.overview.total_orders.toLocaleString()})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(Ar,{className:"h-6 w-6 text-blue-600"})})]}),e.jsxs("div",{className:"mt-4 flex items-center",children:[t.overview.orders_growth>0?e.jsx(Tt,{className:"h-4 w-4 text-green-500"}):e.jsx(Ft,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:`text-sm font-medium ${t.overview.orders_growth>0?"text-green-600":"text-red-600"}`,children:N(t.overview.orders_growth)}),e.jsx("span",{className:"text-sm text-gray-500 ml-2",children:"vs last period"})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Customers"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.overview.total_customers.toLocaleString()})]}),e.jsx("div",{className:"p-3 bg-purple-100 rounded-full",children:e.jsx(Be,{className:"h-6 w-6 text-purple-600"})})]}),e.jsxs("div",{className:"mt-4 flex items-center",children:[t.overview.customers_growth>0?e.jsx(Tt,{className:"h-4 w-4 text-green-500"}):e.jsx(Ft,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:`text-sm font-medium ${t.overview.customers_growth>0?"text-green-600":"text-red-600"}`,children:N(t.overview.customers_growth)}),e.jsx("span",{className:"text-sm text-gray-500 ml-2",children:"vs last period"})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Order Value"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:$(t.overview.avg_order_value)})]}),e.jsx("div",{className:"p-3 bg-orange-100 rounded-full",children:e.jsx(cs,{className:"h-6 w-6 text-orange-600"})})]}),e.jsxs("div",{className:"mt-4 flex items-center",children:[t.overview.aov_growth>0?e.jsx(Tt,{className:"h-4 w-4 text-green-500"}):e.jsx(Ft,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:`text-sm font-medium ${t.overview.aov_growth>0?"text-green-600":"text-red-600"}`,children:N(t.overview.aov_growth)}),e.jsx("span",{className:"text-sm text-gray-500 ml-2",children:"vs last period"})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Revenue Trend"}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("select",{value:d,onChange:h=>u(h.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"revenue",children:"Revenue"}),e.jsx("option",{value:"orders",children:"Orders"}),e.jsx("option",{value:"customers",children:"Customers"})]})})]}),e.jsx("div",{className:"h-80",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(Ps,{data:t.revenue_trend,children:[e.jsx(ue,{strokeDasharray:"3 3"}),e.jsx(pe,{dataKey:"date",tickFormatter:h=>new Date(h).toLocaleDateString()}),e.jsx(xe,{tickFormatter:h=>d==="revenue"?$(h):h.toLocaleString()}),e.jsx(le,{labelFormatter:h=>new Date(h).toLocaleDateString(),formatter:h=>[d==="revenue"?$(h):h.toLocaleString(),d.charAt(0).toUpperCase()+d.slice(1)]}),e.jsx(fs,{type:"monotone",dataKey:d,stroke:"#3B82F6",fill:"#3B82F6",fillOpacity:.1})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Sales by Category"}),e.jsx("div",{className:"h-80",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(Rs,{children:[e.jsx(Es,{data:t.sales_by_category,cx:"50%",cy:"50%",labelLine:!1,label:({category:h,percentage:S})=>`${h} (${S}%)`,outerRadius:80,fill:"#8884d8",dataKey:"revenue",children:t.sales_by_category.map((h,S)=>e.jsx(Ts,{fill:Ti[S%Ti.length]},`cell-${S}`))}),e.jsx(le,{formatter:h=>$(h)})]})})})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Top Products"}),e.jsx("div",{className:"space-y-4",children:t.top_products.map((h,S)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-sm font-medium text-primary-600",children:["#",S+1]})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:h.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[h.quantity_sold," units sold"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:$(h.revenue)}),e.jsxs("div",{className:"flex items-center",children:[h.growth>0?e.jsx(oe,{className:"h-3 w-3 text-green-500"}):e.jsx(He,{className:"h-3 w-3 text-red-500"}),e.jsx("span",{className:`text-xs ${h.growth>0?"text-green-600":"text-red-600"}`,children:N(h.growth)})]})]})]},h.id))})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Field Agent Performance"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agent"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Sales"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Orders"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customers Visited"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Conversion Rate"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Commission"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.field_agent_performance.map(h=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-primary-600",children:h.agent_name.split(" ").map(S=>S[0]).join("")})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:h.agent_name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",h.agent_id]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:$(h.total_sales)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:h.orders_count}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:h.customers_visited}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2 mr-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${h.conversion_rate}%`}})}),e.jsxs("span",{className:"text-sm text-gray-900",children:[h.conversion_rate.toFixed(1),"%"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:$(h.commission_earned)})]},h.agent_id))})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Geographic Performance"}),e.jsx("div",{className:"h-80",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(ds,{data:t.geographic_data,children:[e.jsx(ue,{strokeDasharray:"3 3"}),e.jsx(pe,{dataKey:"region"}),e.jsx(xe,{tickFormatter:h=>$(h)}),e.jsx(le,{formatter:h=>$(h)}),e.jsx(os,{dataKey:"revenue",fill:"#3B82F6"})]})})})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Peak Hours Analysis"}),e.jsx("div",{className:"h-80",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(At,{data:t.time_analysis.peak_hours,children:[e.jsx(ue,{strokeDasharray:"3 3"}),e.jsx(pe,{dataKey:"hour",tickFormatter:h=>`${h}:00`}),e.jsx(xe,{}),e.jsx(le,{labelFormatter:h=>`${h}:00`,formatter:(h,S)=>[S==="revenue"?$(h):h,S==="revenue"?"Revenue":"Orders"]}),e.jsx(qs,{type:"monotone",dataKey:"orders",stroke:"#10B981",strokeWidth:2}),e.jsx(qs,{type:"monotone",dataKey:"revenue",stroke:"#3B82F6",strokeWidth:2}),e.jsx(Ba,{})]})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Conversion Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[t.overview.conversion_rate,"%"]})]}),e.jsx("div",{className:"p-3 bg-indigo-100 rounded-full",children:e.jsx(bs,{className:"h-6 w-6 text-indigo-600"})})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"flex items-center",children:[t.overview.conversion_growth>0?e.jsx(Tt,{className:"h-4 w-4 text-green-500"}):e.jsx(Ft,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:`text-sm font-medium ${t.overview.conversion_growth>0?"text-green-600":"text-red-600"}`,children:N(t.overview.conversion_growth)}),e.jsx("span",{className:"text-sm text-gray-500 ml-2",children:"vs last period"})]})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Products"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.overview.total_products})]}),e.jsx("div",{className:"p-3 bg-teal-100 rounded-full",children:e.jsx(Ce,{className:"h-6 w-6 text-teal-600"})})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"flex items-center",children:[t.overview.products_growth>0?e.jsx(Tt,{className:"h-4 w-4 text-green-500"}):e.jsx(Ft,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:`text-sm font-medium ${t.overview.products_growth>0?"text-green-600":"text-red-600"}`,children:N(t.overview.products_growth)}),e.jsx("span",{className:"text-sm text-gray-500 ml-2",children:"vs last period"})]})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Customer Segments"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.customer_segments.length})]}),e.jsx("div",{className:"p-3 bg-pink-100 rounded-full",children:e.jsx(xa,{className:"h-6 w-6 text-pink-600"})})]}),e.jsx("div",{className:"mt-4 space-y-2",children:t.customer_segments.map(h=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:h.segment}),e.jsx("span",{className:"font-medium text-gray-900",children:h.count})]},h.segment))})]})]})]}):null}const te=Ee.forwardRef(({className:t,children:a,...s},r)=>e.jsx("div",{ref:r,className:ta("rounded-lg border border-gray-200 bg-white shadow-sm",t),...s,children:a}));te.displayName="Card";const ps=Ee.forwardRef(({className:t,children:a,...s},r)=>e.jsx("div",{ref:r,className:ta("flex flex-col space-y-1.5 p-6",t),...s,children:a}));ps.displayName="CardHeader";const gs=Ee.forwardRef(({className:t,children:a,...s},r)=>e.jsx("h3",{ref:r,className:ta("font-semibold leading-none tracking-tight",t),...s,children:a}));gs.displayName="CardTitle";const ae=Ee.forwardRef(({className:t,children:a,...s},r)=>e.jsx("div",{ref:r,className:ta("p-6 pt-0",t),...s,children:a}));ae.displayName="CardContent";const be=Ee.forwardRef(({className:t,variant:a="default",size:s="default",children:r,...n},i)=>{const l="inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",c={default:"bg-primary-600 text-white hover:bg-primary-700",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50",ghost:"text-gray-700 hover:bg-gray-100",destructive:"bg-red-600 text-white hover:bg-red-700"},d={default:"h-10 py-2 px-4",sm:"h-8 px-3 text-sm",lg:"h-12 px-8"};return e.jsx("button",{ref:i,className:ta(l,c[a],d[s],t),...n,children:r})});be.displayName="Button";function To(){const[t,a]=y.useState({totalVans:0,activeRoutes:0,todaySales:0,totalInventory:0,averageDeliveryTime:0,routeEfficiency:0}),[s,r]=y.useState([]),[n,i]=y.useState(!0);y.useEffect(()=>{l()},[]);const l=async()=>{try{i(!0),a({totalVans:25,activeRoutes:18,todaySales:45750,totalInventory:125e3,averageDeliveryTime:32,routeEfficiency:87}),r([{id:"1",vanNumber:"VAN-001",driver:"John Smith",route:"North District",status:"active",todaySales:3250,deliveries:12,efficiency:92,location:"Downtown Area"},{id:"2",vanNumber:"VAN-002",driver:"Sarah Johnson",route:"South District",status:"active",todaySales:2890,deliveries:8,efficiency:85,location:"Industrial Zone"},{id:"3",vanNumber:"VAN-003",driver:"Mike Davis",route:"East District",status:"maintenance",todaySales:0,deliveries:0,efficiency:0,location:"Service Center"}])}catch(d){console.error("Error fetching van sales data:",d)}finally{i(!1)}},c=d=>{switch(d){case"active":return"text-green-600 bg-green-100";case"inactive":return"text-gray-600 bg-gray-100";case"maintenance":return"text-orange-600 bg-orange-100";default:return"text-gray-600 bg-gray-100"}};return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Van Sales Management"}),e.jsx("p",{className:"text-gray-600",children:"Monitor and manage your van sales operations"})]}),e.jsxs(be,{children:[e.jsx(lt,{className:"h-4 w-4 mr-2"}),"Add New Van"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-6",children:[e.jsx(te,{children:e.jsx(ae,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(lt,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Vans"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.totalVans})]})]})})}),e.jsx(te,{children:e.jsx(ae,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Ke,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Routes"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.activeRoutes})]})]})})}),e.jsx(te,{children:e.jsx(ae,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx($e,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Today's Sales"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Te(t.todaySales)})]})]})})}),e.jsx(te,{children:e.jsx(ae,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(Ce,{className:"h-6 w-6 text-orange-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Inventory"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Te(t.totalInventory)})]})]})})}),e.jsx(te,{children:e.jsx(ae,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(Ze,{className:"h-6 w-6 text-red-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Delivery Time"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[t.averageDeliveryTime,"min"]})]})]})})}),e.jsx(te,{children:e.jsx(ae,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:e.jsx(oe,{className:"h-6 w-6 text-indigo-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Route Efficiency"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[t.routeEfficiency,"%"]})]})]})})})]}),e.jsxs(te,{children:[e.jsx(ps,{children:e.jsx(gs,{children:"Van Performance"})}),e.jsx(ae,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Van Details"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Today's Sales"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deliveries"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Efficiency"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(d=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:d.vanNumber}),e.jsx("div",{className:"text-sm text-gray-500",children:d.driver}),e.jsx("div",{className:"text-sm text-gray-500",children:d.route})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${c(d.status)}`,children:d.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Te(d.todaySales)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:d.deliveries}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[d.efficiency,"%"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:d.location}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx(be,{variant:"outline",size:"sm",children:"View Details"})})]},d.id))})]})})})]})]})}class Fo extends ut{constructor(){super(...arguments);Xe(this,"baseUrl","/van-sales")}async getVans(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}/vans?${r.toString()}`)).data}async getVan(s){return(await this.get(`${this.baseUrl}/vans/${s}`)).data}async createVan(s){return(await this.post(`${this.baseUrl}/vans`,s)).data}async updateVan(s,r){return(await this.put(`${this.baseUrl}/vans/${s}`,r)).data}async deleteVan(s){return(await this.delete(`${this.baseUrl}/vans/${s}`)).data}async getVanRoutes(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}/routes?${r.toString()}`)).data}async getVanRoute(s){return(await this.get(`${this.baseUrl}/routes/${s}`)).data}async createVanRoute(s){return(await this.post(`${this.baseUrl}/routes`,s)).data}async updateVanRoute(s,r){return(await this.put(`${this.baseUrl}/routes/${s}`,r)).data}async deleteVanRoute(s){return(await this.delete(`${this.baseUrl}/routes/${s}`)).data}async startVanRoute(s){return(await this.post(`${this.baseUrl}/routes/${s}/start`)).data}async completeVanRoute(s){return(await this.post(`${this.baseUrl}/routes/${s}/complete`)).data}async optimizeRoute(s){return(await this.post(`${this.baseUrl}/routes/${s}/optimize`)).data}async getVanInventory(s){return(await this.get(`${this.baseUrl}/vans/${s}/inventory`)).data}async updateVanInventory(s,r){return(await this.put(`${this.baseUrl}/vans/${s}/inventory`,{inventory:r})).data}async loadVanInventory(s,r){return(await this.post(`${this.baseUrl}/vans/${s}/load`,{items:r})).data}async unloadVanInventory(s,r){return(await this.post(`${this.baseUrl}/vans/${s}/unload`,{items:r})).data}async getVanSales(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}/sales?${r.toString()}`)).data}async getVanSale(s){return(await this.get(`${this.baseUrl}/sales/${s}`)).data}async createVanSale(s){return(await this.post(`${this.baseUrl}/sales`,s)).data}async updateVanSale(s,r){return(await this.put(`${this.baseUrl}/sales/${s}`,r)).data}async processVanSalePayment(s,r){return(await this.post(`${this.baseUrl}/sales/${s}/payment`,r)).data}async getVanExpenses(s,r={}){const n=new URLSearchParams;return Object.entries(r).forEach(([l,c])=>{c!=null&&c!==""&&n.append(l,String(c))}),(await this.get(`${this.baseUrl}/vans/${s}/expenses?${n.toString()}`)).data}async createVanExpense(s){return(await this.post(`${this.baseUrl}/expenses`,s)).data}async updateVanExpense(s,r){return(await this.put(`${this.baseUrl}/expenses/${s}`,r)).data}async deleteVanExpense(s){return(await this.delete(`${this.baseUrl}/expenses/${s}`)).data}async getVanStats(){return(await this.get(`${this.baseUrl}/stats`)).data}async getVanPerformance(s,r,n){const i=new URLSearchParams;return r&&i.append("start_date",r),n&&i.append("end_date",n),(await this.get(`${this.baseUrl}/vans/${s}/performance?${i.toString()}`)).data}async getVanAnalytics(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}/analytics?${r.toString()}`)).data}async getVanLocation(s){return(await this.get(`${this.baseUrl}/vans/${s}/location`)).data}async updateVanLocation(s,r){return(await this.post(`${this.baseUrl}/vans/${s}/location`,r)).data}async getVanLocationHistory(s,r,n){const i=new URLSearchParams;return r&&i.append("start_date",r),n&&i.append("end_date",n),(await this.get(`${this.baseUrl}/vans/${s}/location-history?${i.toString()}`)).data}async exportVanSalesReport(s="pdf",r={}){const n=new URLSearchParams;Object.entries(r).forEach(([u,o])=>{o!=null&&o!==""&&n.append(u,String(o))}),n.append("format",s);const i=await this.get(`${this.baseUrl}/reports/sales?${n.toString()}`,{responseType:"blob"}),l=new Blob([i.data]),c=window.URL.createObjectURL(l),d=document.createElement("a");d.href=c,d.download=`van-sales-report-${Date.now()}.${s}`,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(c)}async exportVanPerformanceReport(s="pdf",r={}){const n=new URLSearchParams;Object.entries(r).forEach(([u,o])=>{o!=null&&o!==""&&n.append(u,String(o))}),n.append("format",s);const i=await this.get(`${this.baseUrl}/reports/performance?${n.toString()}`,{responseType:"blob"}),l=new Blob([i.data]),c=window.URL.createObjectURL(l),d=document.createElement("a");d.href=c,d.download=`van-performance-report-${Date.now()}.${s}`,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(c)}async getVanSalesMetrics(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}/metrics?${r.toString()}`)).data}async getVanSalesReports(s,r={}){const n=new URLSearchParams;return Object.entries(r).forEach(([l,c])=>{c!=null&&c!==""&&n.append(l,String(c))}),n.append("type",s),(await this.get(`${this.baseUrl}/reports?${n.toString()}`)).data}async getVanSalesInsights(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}/insights?${r.toString()}`)).data}async getVanSalesStats(s){const r=new URLSearchParams;return s!=null&&s.start_date&&r.append("start_date",s.start_date),s!=null&&s.end_date&&r.append("end_date",s.end_date),(await this.get(`${this.baseUrl}/stats?${r.toString()}`)).data}async getVanSalesAnalytics(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}/analytics?${r.toString()}`)).data}async getVanSalesTrends(s){const r=new URLSearchParams;return s.start_date&&r.append("start_date",s.start_date),s.end_date&&r.append("end_date",s.end_date),(await this.get(`${this.baseUrl}/trends?${r.toString()}`)).data}async getVanSalesData(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}?${r.toString()}`)).data}async deleteVanSale(s){return(await this.delete(`${this.baseUrl}/${s}`)).data}async bulkUpdateVanSales(s,r){return(await this.put(`${this.baseUrl}/bulk`,{ids:s,updates:r})).data}async importVanSalesData(s){const r=new FormData;return r.append("file",s),(await this.post(`${this.baseUrl}/import`,r,{headers:{"Content-Type":"multipart/form-data"}})).data}}const $a=new Fo,Fi=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4"];function Ui(){var m,x,$,N,p,h,S,A,w;const[t,a]=y.useState({start_date:new Date(Date.now()-2592e6).toISOString().split("T")[0],end_date:new Date().toISOString().split("T")[0]}),{data:s,isLoading:r,refetch:n}=de({queryKey:["van-sales-dashboard-stats",t],queryFn:()=>$a.getVanSalesStats(t),staleTime:1e3*60*5}),{data:i,isLoading:l}=de({queryKey:["van-sales-analytics",t],queryFn:()=>$a.getVanSalesAnalytics(),staleTime:1e3*60*5}),{data:c,isLoading:d}=de({queryKey:["van-sales-trends",t],queryFn:()=>$a.getVanSalesTrends(t),staleTime:1e3*60*5}),u=r||l||d,o=()=>{n()},g=()=>{$a.exportVanSalesReport("pdf",{...t,report_type:"dashboard"})};return u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Pe,{size:"lg"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Van Sales Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Monitor mobile sales operations and route performance"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"date",value:t.start_date,onChange:b=>a({...t,start_date:b.target.value}),className:"input text-sm"}),e.jsx("input",{type:"date",value:t.end_date,onChange:b=>a({...t,end_date:b.target.value}),className:"input text-sm"})]}),e.jsxs("button",{onClick:o,className:"btn-outline flex items-center space-x-2",children:[e.jsx(_s,{className:"w-4 h-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{onClick:g,className:"btn-primary flex items-center space-x-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsx("span",{children:"Export Report"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-blue-100",children:e.jsx(lt,{className:"h-6 w-6 text-blue-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Active Vans"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:J((s==null?void 0:s.active_vans)||0)}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsxs("span",{className:"text-green-600",children:[(s==null?void 0:s.vans_on_route)||0," on route"]}),e.jsxs("span",{className:"text-gray-500 ml-1",children:[" ",(s==null?void 0:s.vans_idle)||0," idle"]})]})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-green-100",children:e.jsx($e,{className:"h-6 w-6 text-green-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Van Sales Revenue"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:G((s==null?void 0:s.total_revenue)||0)}),e.jsxs("div",{className:"flex items-center text-sm",children:[(s==null?void 0:s.revenue_growth)>=0?e.jsx(oe,{className:"w-4 h-4 text-green-500 mr-1"}):e.jsx(He,{className:"w-4 h-4 text-red-500 mr-1"}),e.jsxs("span",{className:(s==null?void 0:s.revenue_growth)>=0?"text-green-600":"text-red-600",children:[Math.abs((s==null?void 0:s.revenue_growth)||0),"%"]})]})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-purple-100",children:e.jsx(ma,{className:"h-6 w-6 text-purple-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Routes Completed"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:J((s==null?void 0:s.completed_routes)||0)}),e.jsxs("p",{className:"text-sm text-gray-500",children:[(s==null?void 0:s.route_efficiency)||0,"% efficiency"]})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-yellow-100",children:e.jsx(cs,{className:"h-6 w-6 text-yellow-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Avg. Sales per Van"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:G((s==null?void 0:s.avg_sales_per_van)||0)}),e.jsxs("p",{className:"text-sm text-gray-500",children:[(s==null?void 0:s.sales_trend)>0?"":(s==null?void 0:s.sales_trend)<0?"":""," ",Math.abs((s==null?void 0:s.sales_trend)||0).toFixed(1)," vs last period"]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Van Sales Performance"}),e.jsx(ye,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"h-80",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(Ps,{data:(c==null?void 0:c.daily_sales)||[],children:[e.jsx(ue,{strokeDasharray:"3 3"}),e.jsx(pe,{dataKey:"date",tickFormatter:b=>H(b,{format:"short"})}),e.jsx(xe,{tickFormatter:b=>G(b,"ZAR",{compact:!0})}),e.jsx(le,{labelFormatter:b=>H(b),formatter:b=>[G(b),"Sales"]}),e.jsx(fs,{type:"monotone",dataKey:"sales",stroke:"#10B981",fill:"#10B981",fillOpacity:.1})]})})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Route Distribution"}),e.jsx(ea,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"h-80",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(Rs,{children:[e.jsx(Es,{data:(i==null?void 0:i.route_distribution)||[],cx:"50%",cy:"50%",labelLine:!1,label:({name:b,percent:j})=>`${b} ${(j*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"count",children:((i==null?void 0:i.route_distribution)||[]).map((b,j)=>e.jsx(Ts,{fill:Fi[j%Fi.length]},`cell-${j}`))}),e.jsx(le,{})]})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Top Performing Vans"}),e.jsx(lt,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"h-80",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(ds,{data:(i==null?void 0:i.top_vans)||[],layout:"horizontal",children:[e.jsx(ue,{strokeDasharray:"3 3"}),e.jsx(pe,{type:"number",tickFormatter:b=>G(b,"ZAR",{compact:!0})}),e.jsx(xe,{dataKey:"van_code",type:"category",width:80}),e.jsx(le,{formatter:b=>[G(b),"Sales"]}),e.jsx(os,{dataKey:"sales",fill:"#3B82F6"})]})})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Route Efficiency"}),e.jsx(Pr,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"h-80",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(At,{data:(c==null?void 0:c.route_efficiency)||[],children:[e.jsx(ue,{strokeDasharray:"3 3"}),e.jsx(pe,{dataKey:"date",tickFormatter:b=>H(b,{format:"short"})}),e.jsx(xe,{}),e.jsx(le,{labelFormatter:b=>H(b),formatter:b=>[`${b}%`,"Efficiency"]}),e.jsx(qs,{type:"monotone",dataKey:"efficiency",stroke:"#8B5CF6",strokeWidth:2})]})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Van Status Overview"}),e.jsx(lt,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"space-y-3",children:((i==null?void 0:i.van_status)||[]).slice(0,6).map(b=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-3 h-3 rounded-full mr-3 ${b.status==="on_route"?"bg-green-500":b.status==="loading"?"bg-yellow-500":b.status==="maintenance"?"bg-red-500":"bg-gray-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:b.van_code}),e.jsx("p",{className:"text-sm text-gray-500",children:b.driver_name})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium text-gray-900",children:G(b.daily_sales)}),e.jsx("p",{className:"text-sm text-gray-500",children:b.current_location})]})]},b.van_id))})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activities"}),e.jsx(bs,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"space-y-3",children:((i==null?void 0:i.recent_activities)||[]).slice(0,6).map(b=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-3 h-3 rounded-full mr-3 ${b.type==="sale_completed"?"bg-green-500":b.type==="route_started"?"bg-blue-500":b.type==="delivery_completed"?"bg-purple-500":"bg-gray-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:b.van_code}),e.jsx("p",{className:"text-sm text-gray-500",children:b.description})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:H(b.created_at)}),b.value&&e.jsx("p",{className:"text-sm font-medium text-green-600",children:G(b.value)})]})]},b.id))})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Route Performance Analysis"}),e.jsx(ma,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:((i==null?void 0:i.route_performance)||[]).map(b=>e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:b.route_name}),e.jsxs("span",{className:"text-sm text-gray-500",children:[b.van_count," vans"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Daily Sales"}),e.jsx("span",{className:"font-medium",children:G(b.daily_sales)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Efficiency"}),e.jsxs("span",{className:"font-medium",children:[b.efficiency,"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Stops"}),e.jsx("span",{className:"font-medium",children:J(b.total_stops)})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${b.efficiency}%`}})})]})]},b.route_id))})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Operational Metrics"}),e.jsx(ye,{className:"w-5 h-5 text-gray-400"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Fuel Efficiency"}),e.jsx(vl,{className:"w-4 h-4 text-green-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Average"}),e.jsxs("span",{className:"font-medium",children:[((m=i==null?void 0:i.metrics)==null?void 0:m.fuel_efficiency)||0," km/l"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Target"}),e.jsxs("span",{className:"font-medium",children:[">"," 12 km/l"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${(((x=i==null?void 0:i.metrics)==null?void 0:x.fuel_efficiency)||0)>=12?"bg-green-500":"bg-yellow-500"}`,style:{width:`${Math.min(((($=i==null?void 0:i.metrics)==null?void 0:$.fuel_efficiency)||0)*8.33,100)}%`}})})]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"On-Time Delivery"}),e.jsx(Ze,{className:"w-4 h-4 text-blue-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Current"}),e.jsxs("span",{className:"font-medium",children:[((N=i==null?void 0:i.metrics)==null?void 0:N.on_time_delivery)||0,"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Target"}),e.jsxs("span",{className:"font-medium",children:[">"," 90%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${((p=i==null?void 0:i.metrics)==null?void 0:p.on_time_delivery)||0}%`}})})]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Customer Satisfaction"}),e.jsx(Be,{className:"w-4 h-4 text-purple-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Rating"}),e.jsxs("span",{className:"font-medium",children:[((h=i==null?void 0:i.metrics)==null?void 0:h.customer_satisfaction)||0,"/5"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Target"}),e.jsxs("span",{className:"font-medium",children:[">"," 4.5/5"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-purple-500 h-2 rounded-full",style:{width:`${(((S=i==null?void 0:i.metrics)==null?void 0:S.customer_satisfaction)||0)*20}%`}})})]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Load Utilization"}),e.jsx(Ce,{className:"w-4 h-4 text-orange-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Average"}),e.jsxs("span",{className:"font-medium",children:[((A=i==null?void 0:i.metrics)==null?void 0:A.load_utilization)||0,"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Target"}),e.jsxs("span",{className:"font-medium",children:[">"," 85%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-orange-500 h-2 rounded-full",style:{width:`${((w=i==null?void 0:i.metrics)==null?void 0:w.load_utilization)||0}%`}})})]})]})]})]}),(i==null?void 0:i.insights)&&i.insights.length>0&&e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Insights & Recommendations"}),e.jsx(oe,{className:"w-5 h-5 text-blue-500"})]}),e.jsx("div",{className:"space-y-3",children:i.insights.map((b,j)=>e.jsxs("div",{className:"flex items-start p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx(oe,{className:"w-5 h-5 text-blue-500 mt-0.5 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900",children:b.title}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:b.description}),b.recommendation&&e.jsxs("p",{className:"text-sm text-blue-600 mt-2 font-medium",children:[" ",b.recommendation]})]})]},j))})]})]})}function Uo(){const[t,a]=y.useState([]),[s,r]=y.useState(!0),[n,i]=y.useState(null);y.useEffect(()=>{l()},[]);const l=async()=>{try{r(!0),a([{id:"1",name:"North District Route A",description:"Covers downtown and business district",vanAssigned:"VAN-001",driver:"John Smith",status:"active",totalStops:12,estimatedTime:480,distance:45.2,priority:"high",lastUpdated:"2024-01-15T10:30:00Z",customers:[{id:"1",name:"ABC Electronics",address:"123 Main St",estimatedValue:2500,visitTime:"09:00",status:"completed"},{id:"2",name:"XYZ Retail",address:"456 Oak Ave",estimatedValue:1800,visitTime:"10:30",status:"pending"}]},{id:"2",name:"South District Route B",description:"Industrial and warehouse areas",vanAssigned:"VAN-002",driver:"Sarah Johnson",status:"active",totalStops:8,estimatedTime:360,distance:32.8,priority:"medium",lastUpdated:"2024-01-15T09:15:00Z",customers:[]},{id:"3",name:"East District Route C",description:"Residential and small business areas",vanAssigned:"Unassigned",driver:"Unassigned",status:"planned",totalStops:15,estimatedTime:540,distance:38.5,priority:"low",lastUpdated:"2024-01-14T16:45:00Z",customers:[]}])}catch(u){console.error("Error fetching routes:",u)}finally{r(!1)}},c=u=>{switch(u){case"active":return"text-green-600 bg-green-100";case"inactive":return"text-gray-600 bg-gray-100";case"planned":return"text-blue-600 bg-blue-100";default:return"text-gray-600 bg-gray-100"}},d=u=>{switch(u){case"high":return"text-red-600 bg-red-100";case"medium":return"text-yellow-600 bg-yellow-100";case"low":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}};return s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Route Management"}),e.jsx("p",{className:"text-gray-600",children:"Plan and optimize delivery routes for maximum efficiency"})]}),e.jsxs(be,{children:[e.jsx(zs,{className:"h-4 w-4 mr-2"}),"Create New Route"]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:t.map(u=>e.jsxs(te,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:[e.jsx(ps,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(gs,{className:"text-lg",children:u.name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:u.description})]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(be,{variant:"outline",size:"sm",children:e.jsx(ot,{className:"h-4 w-4"})}),e.jsx(be,{variant:"outline",size:"sm",children:e.jsx(mt,{className:"h-4 w-4"})})]})]})}),e.jsx(ae,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${c(u.status)}`,children:u.status}),e.jsxs("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${d(u.priority)}`,children:[u.priority," priority"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(lt,{className:"h-4 w-4 mr-2 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:"Van:"}),e.jsx("span",{className:"ml-1 font-medium",children:u.vanAssigned})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("span",{className:"text-gray-600 ml-6",children:"Driver:"}),e.jsx("span",{className:"ml-1 font-medium",children:u.driver})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-4 border-t",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-1",children:e.jsx(Ke,{className:"h-4 w-4 text-gray-400"})}),e.jsx("p",{className:"text-sm font-medium",children:u.totalStops}),e.jsx("p",{className:"text-xs text-gray-500",children:"Stops"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-1",children:e.jsx(Ze,{className:"h-4 w-4 text-gray-400"})}),e.jsxs("p",{className:"text-sm font-medium",children:[Math.round(u.estimatedTime/60),"h"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Duration"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-1",children:e.jsx(Pr,{className:"h-4 w-4 text-gray-400"})}),e.jsxs("p",{className:"text-sm font-medium",children:[u.distance,"km"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Distance"})]})]}),e.jsxs("div",{className:"flex space-x-2 pt-4",children:[e.jsx(be,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>i(u),children:"View Details"}),e.jsx(be,{size:"sm",className:"flex-1",children:"Optimize Route"})]})]})})]},u.id))}),n&&e.jsxs(te,{className:"mt-6",children:[e.jsx(ps,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(gs,{children:["Route Details: ",n.name]}),e.jsx(be,{variant:"outline",onClick:()=>i(null),children:"Close"})]})}),e.jsx(ae,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Van Assigned"}),e.jsx("p",{className:"text-lg font-semibold",children:n.vanAssigned})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Driver"}),e.jsx("p",{className:"text-lg font-semibold",children:n.driver})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Distance"}),e.jsxs("p",{className:"text-lg font-semibold",children:[n.distance," km"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Estimated Time"}),e.jsxs("p",{className:"text-lg font-semibold",children:[Math.round(n.estimatedTime/60)," hours"]})]})]}),n.customers.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Customer Stops"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Address"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Visit Time"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Est. Value"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.customers.map(u=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:u.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:u.address}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:u.visitTime}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Te(u.estimatedValue)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${c(u.status)}`,children:u.status})})]},u.id))})]})})]})]})})]})]})}function Lo(){const[t,a]=y.useState([]),[s,r]=y.useState(!0),[n,i]=y.useState(""),[l,c]=y.useState("all");y.useEffect(()=>{d()},[]);const d=async()=>{try{r(!0),a([{id:"1",productName:"Premium Coffee Beans",sku:"PCB-001",vanId:"1",vanNumber:"VAN-001",currentStock:45,maxCapacity:100,reorderLevel:20,unitPrice:25.99,totalValue:1169.55,lastRestocked:"2024-01-14T08:00:00Z",status:"in_stock"},{id:"2",productName:"Organic Tea Selection",sku:"OTS-002",vanId:"1",vanNumber:"VAN-001",currentStock:15,maxCapacity:80,reorderLevel:20,unitPrice:18.5,totalValue:277.5,lastRestocked:"2024-01-12T10:30:00Z",status:"low_stock"},{id:"3",productName:"Artisan Pastries",sku:"AP-003",vanId:"2",vanNumber:"VAN-002",currentStock:0,maxCapacity:50,reorderLevel:10,unitPrice:12.75,totalValue:0,lastRestocked:"2024-01-10T14:15:00Z",status:"out_of_stock"}])}catch(N){console.error("Error fetching inventory data:",N)}finally{r(!1)}},u=N=>{switch(N){case"in_stock":return"text-green-600 bg-green-100";case"low_stock":return"text-yellow-600 bg-yellow-100";case"out_of_stock":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},o=(N,p)=>Math.round(N/p*100),g=t.filter(N=>{const p=N.productName.toLowerCase().includes(n.toLowerCase())||N.sku.toLowerCase().includes(n.toLowerCase())||N.vanNumber.toLowerCase().includes(n.toLowerCase()),h=l==="all"||N.status===l;return p&&h}),m=t.reduce((N,p)=>N+p.totalValue,0),x=t.filter(N=>N.status==="low_stock").length,$=t.filter(N=>N.status==="out_of_stock").length;return s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Inventory Tracking"}),e.jsx("p",{className:"text-gray-600",children:"Monitor stock levels across all vans"})]}),e.jsxs(be,{children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),"Restock Van"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(te,{children:e.jsx(ae,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Ce,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Inventory Value"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Te(m)})]})]})})}),e.jsx(te,{children:e.jsx(ae,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(oe,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Items In Stock"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(N=>N.status==="in_stock").length})]})]})})}),e.jsx(te,{children:e.jsx(ae,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(we,{className:"h-6 w-6 text-yellow-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Low Stock Items"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x})]})]})})}),e.jsx(te,{children:e.jsx(ae,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(He,{className:"h-6 w-6 text-red-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Out of Stock"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:$})]})]})})})]}),e.jsx(te,{children:e.jsx(ae,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(ws,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search by product name, SKU, or van...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-transparent",value:n,onChange:N=>i(N.target.value)})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xt,{className:"h-4 w-4 text-gray-400"}),e.jsxs("select",{className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-transparent",value:l,onChange:N=>c(N.target.value),children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"in_stock",children:"In Stock"}),e.jsx("option",{value:"low_stock",children:"Low Stock"}),e.jsx("option",{value:"out_of_stock",children:"Out of Stock"})]})]})]})})}),e.jsxs(te,{children:[e.jsx(ps,{children:e.jsx(gs,{children:"Inventory Items"})}),e.jsx(ae,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Van"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock Level"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Value"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(N=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.productName}),e.jsxs("div",{className:"text-sm text-gray-500",children:["SKU: ",N.sku]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:N.vanNumber}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"text-sm text-gray-900",children:[N.currentStock," / ",N.maxCapacity]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-1",children:e.jsx("div",{className:`h-2 rounded-full ${o(N.currentStock,N.maxCapacity)>50?"bg-green-600":o(N.currentStock,N.maxCapacity)>25?"bg-yellow-600":"bg-red-600"}`,style:{width:`${o(N.currentStock,N.maxCapacity)}%`}})})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${u(N.status)}`,children:N.status.replace("_"," ")})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Te(N.unitPrice)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Te(N.totalValue)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(be,{variant:"outline",size:"sm",children:"Restock"}),e.jsx(be,{variant:"outline",size:"sm",children:"Transfer"})]})})]},N.id))})]})})})]})]})}function Do(){const[t,a]=y.useState({totalSpend:0,activePromotions:0,retailerParticipation:0,roi:0,marketShare:0,competitorAnalysis:0,channelPartners:0,tradeSpendEfficiency:0,volumeGrowth:0,priceRealization:0}),[s,r]=y.useState([]),[n,i]=y.useState([]),[l,c]=y.useState([]),[d,u]=y.useState(!0),[o,g]=y.useState("overview");y.useEffect(()=>{m()},[]);const m=async()=>{try{u(!0),a({totalSpend:125e3,activePromotions:8,retailerParticipation:85,roi:3.2,marketShare:24.5,competitorAnalysis:12,channelPartners:45,tradeSpendEfficiency:78.5,volumeGrowth:12.3,priceRealization:94.2}),r([{id:"1",name:"Summer Volume Incentive",type:"volume_incentive",status:"active",startDate:"2024-01-01",endDate:"2024-03-31",budget:5e4,spent:32e3,participatingRetailers:45,expectedROI:3.5,actualROI:3.8,category:"Beverages",channel:"Retail",performance:{volumeImpact:15.2,revenueImpact:18.7,marginImpact:12.4}},{id:"2",name:"New Product Launch Rebate",type:"rebate",status:"active",startDate:"2024-01-15",endDate:"2024-02-15",budget:25e3,spent:18500,participatingRetailers:28,expectedROI:2.8,actualROI:3.1,category:"Snacks",channel:"Wholesale",performance:{volumeImpact:22.1,revenueImpact:25.3,marginImpact:8.9}},{id:"3",name:"Holiday Display Program",type:"display_allowance",status:"planned",startDate:"2024-02-01",endDate:"2024-02-29",budget:35e3,spent:0,participatingRetailers:0,expectedROI:4.2,category:"Seasonal",channel:"Retail",performance:{volumeImpact:0,revenueImpact:0,marginImpact:0}}]),i([{id:"1",name:"SuperMart Distribution",type:"distributor",tier:"platinum",totalSpend:45e3,performance:92.5,programs:8},{id:"2",name:"FreshMart Retail Chain",type:"retailer",tier:"gold",totalSpend:32e3,performance:87.3,programs:5},{id:"3",name:"QuickStop Wholesale",type:"wholesaler",tier:"silver",totalSpend:18500,performance:78.9,programs:3}]),c([{competitor:"CompetitorA",marketShare:28.5,priceIndex:102.3,promotionalActivity:85.2,trend:"up"},{competitor:"CompetitorB",marketShare:22.1,priceIndex:98.7,promotionalActivity:72.4,trend:"down"},{competitor:"CompetitorC",marketShare:18.9,priceIndex:105.1,promotionalActivity:91.8,trend:"stable"}])}catch(p){console.error("Error fetching trade marketing data:",p)}finally{u(!1)}},x=p=>{switch(p){case"active":return"text-green-600 bg-green-100";case"planned":return"text-blue-600 bg-blue-100";case"completed":return"text-gray-600 bg-gray-100";case"paused":return"text-yellow-600 bg-yellow-100";default:return"text-gray-600 bg-gray-100"}},$=p=>{switch(p){case"discount":return"text-purple-600 bg-purple-100";case"rebate":return"text-blue-600 bg-blue-100";case"volume_incentive":return"text-green-600 bg-green-100";case"display_allowance":return"text-orange-600 bg-orange-100";default:return"text-gray-600 bg-gray-100"}},N=(p,h)=>Math.round(p/h*100);return d?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Trade Marketing"}),e.jsx("p",{className:"text-gray-600",children:"Manage trade promotions, retailer incentives, and market analysis"})]}),e.jsxs(be,{children:[e.jsx(cs,{className:"h-4 w-4 mr-2"}),"Create Promotion"]})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"overview",name:"Overview",icon:ye},{id:"promotions",name:"Promotions",icon:cs},{id:"channels",name:"Channel Partners",icon:Be},{id:"competitors",name:"Competitor Analysis",icon:oe}].map(p=>e.jsxs("button",{onClick:()=>g(p.id),className:`${o===p.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm flex items-center`,children:[e.jsx(p.icon,{className:"h-4 w-4 mr-2"}),p.name]},p.id))})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:[e.jsx(te,{children:e.jsx(ae,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx($e,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Trade Spend"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Te(t.totalSpend)}),e.jsx("p",{className:"text-xs text-green-600",children:"+12.5% vs last quarter"})]})]})})}),e.jsx(te,{children:e.jsx(ae,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(cs,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Programs"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.activePromotions}),e.jsxs("p",{className:"text-xs text-blue-600",children:[t.channelPartners," partners"]})]})]})})}),e.jsx(te,{children:e.jsx(ae,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(oe,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Trade ROI"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[t.roi,"x"]}),e.jsxs("p",{className:"text-xs text-green-600",children:["Efficiency: ",t.tradeSpendEfficiency,"%"]})]})]})})}),e.jsx(te,{children:e.jsx(ae,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(Nl,{className:"h-6 w-6 text-orange-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Volume Growth"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[t.volumeGrowth,"%"]}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Price realization: ",t.priceRealization,"%"]})]})]})})}),e.jsx(te,{children:e.jsx(ae,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(ye,{className:"h-6 w-6 text-red-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Market Share"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[t.marketShare,"%"]}),e.jsx("p",{className:"text-xs text-green-600",children:"+2.1% vs competitors"})]})]})})})]}),o==="overview"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(te,{children:[e.jsx(ps,{children:e.jsx(gs,{children:"Top Performing Programs"})}),e.jsx(ae,{children:e.jsx("div",{className:"space-y-4",children:s.slice(0,3).map(p=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:p.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:[p.category,"  ",p.channel]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-green-600",children:p.actualROI?`${p.actualROI}x ROI`:`${p.expectedROI}x Expected`}),e.jsxs("div",{className:"text-sm text-gray-500",children:[Te(p.spent)," spent"]})]})]},p.id))})})]}),e.jsxs(te,{children:[e.jsx(ps,{children:e.jsx(gs,{children:"Channel Performance"})}),e.jsx(ae,{children:e.jsx("div",{className:"space-y-4",children:n.map(p=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-3 h-3 rounded-full mr-3 ${p.tier==="platinum"?"bg-purple-500":p.tier==="gold"?"bg-yellow-500":p.tier==="silver"?"bg-gray-400":"bg-orange-500"}`}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:p.name}),e.jsxs("div",{className:"text-sm text-gray-500 capitalize",children:[p.type,"  ",p.tier]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-blue-600",children:[p.performance,"%"]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[p.programs," programs"]})]})]},p.id))})})]})]}),o==="promotions"&&e.jsxs(te,{children:[e.jsx(ps,{children:e.jsx(gs,{children:"Trade Marketing Programs"})}),e.jsx(ae,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Program Details"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type & Channel"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Budget & Spend"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Performance Impact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ROI"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(p=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:p.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:[new Date(p.startDate).toLocaleDateString()," - ",new Date(p.endDate).toLocaleDateString()]}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:p.category})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${$(p.type)}`,children:p.type.replace("_"," ")}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:p.channel})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${x(p.status)}`,children:p.status})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"text-sm text-gray-900",children:[Te(p.spent)," / ",Te(p.budget)]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-1",children:e.jsx("div",{className:`h-2 rounded-full ${N(p.spent,p.budget)>80?"bg-red-600":N(p.spent,p.budget)>60?"bg-yellow-600":"bg-green-600"}`,style:{width:`${N(p.spent,p.budget)}%`}})}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[N(p.spent,p.budget),"% utilized"]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsxs("div",{children:["Volume: +",p.performance.volumeImpact,"%"]}),e.jsxs("div",{children:["Revenue: +",p.performance.revenueImpact,"%"]}),e.jsxs("div",{children:["Margin: +",p.performance.marginImpact,"%"]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"text-sm text-gray-900",children:["Expected: ",p.expectedROI,"x"]}),p.actualROI&&e.jsxs("div",{className:`text-sm ${p.actualROI>=p.expectedROI?"text-green-600":"text-red-600"}`,children:["Actual: ",p.actualROI,"x"]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(be,{variant:"outline",size:"sm",children:"View Details"}),e.jsx(be,{variant:"outline",size:"sm",children:"Edit"})]})})]},p.id))})]})})})]}),o==="channels"&&e.jsxs(te,{children:[e.jsx(ps,{children:e.jsx(gs,{children:"Channel Partner Management"})}),e.jsx(ae,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(p=>e.jsx(te,{className:"border-l-4 border-l-blue-500",children:e.jsxs(ae,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-4 h-4 rounded-full mr-3 ${p.tier==="platinum"?"bg-purple-500":p.tier==="gold"?"bg-yellow-500":p.tier==="silver"?"bg-gray-400":"bg-orange-500"}`}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:p.name}),e.jsx("p",{className:"text-sm text-gray-500 capitalize",children:p.type})]})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full capitalize ${p.tier==="platinum"?"text-purple-600 bg-purple-100":p.tier==="gold"?"text-yellow-600 bg-yellow-100":p.tier==="silver"?"text-gray-600 bg-gray-100":"text-orange-600 bg-orange-100"}`,children:p.tier})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Spend"}),e.jsx("span",{className:"font-medium",children:Te(p.totalSpend)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Performance"}),e.jsxs("span",{className:"font-medium text-green-600",children:[p.performance,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Active Programs"}),e.jsx("span",{className:"font-medium",children:p.programs})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsx(be,{variant:"outline",size:"sm",className:"w-full",children:"Manage Programs"})})]})},p.id))})})]}),o==="competitors"&&e.jsxs(te,{children:[e.jsx(ps,{children:e.jsx(gs,{children:"Competitive Intelligence"})}),e.jsx(ae,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Competitor"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Market Share"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price Index"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Promotional Activity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Trend"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map((p,h)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:p.competitor})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"text-sm text-gray-900",children:[p.marketShare,"%"]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-1",children:e.jsx("div",{className:"h-2 rounded-full bg-blue-600",style:{width:`${p.marketShare/35*100}%`}})})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`text-sm ${p.priceIndex>100?"text-red-600":"text-green-600"}`,children:p.priceIndex})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"text-sm text-gray-900",children:[p.promotionalActivity,"%"]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-1",children:e.jsx("div",{className:"h-2 rounded-full bg-orange-600",style:{width:`${p.promotionalActivity}%`}})})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full ${p.trend==="up"?"text-green-600 bg-green-100":p.trend==="down"?"text-red-600 bg-red-100":"text-gray-600 bg-gray-100"}`,children:[p.trend==="up"?e.jsx(oe,{className:"h-3 w-3 mr-1"}):p.trend==="down"?e.jsx(He,{className:"h-3 w-3 mr-1"}):e.jsx(ye,{className:"h-3 w-3 mr-1"}),p.trend]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx(be,{variant:"outline",size:"sm",children:"View Analysis"})})]},h))})]})})})]})]})}function Oo(){const[t,a]=y.useState([]),[s,r]=y.useState({total_events:0,completed_events:0,active_events:0,cancelled_events:0,total_budget:0,avg_budget:0,total_participants:0,attendance_rate:0}),[n,i]=y.useState(!0),[l,c]=y.useState({status:"",type:"",start_date:"",end_date:""});y.useEffect(()=>{d(),u()},[l]);const d=async()=>{try{i(!0);const x=localStorage.getItem("token"),$=new URLSearchParams;l.status&&$.append("status",l.status),l.type&&$.append("type",l.type),l.start_date&&$.append("start_date",l.start_date),l.end_date&&$.append("end_date",l.end_date);const N=await fetch(`/api/events?${$.toString()}`,{headers:{Authorization:`Bearer ${x}`,"Content-Type":"application/json"}});if(N.ok){const p=await N.json();a(p.events||[])}else console.error("Failed to fetch events"),a([{id:"1",title:"Product Launch Event - Summer Collection",description:"Launch event for our new summer product line",type:"product_launch",status:"active",start_date:"2024-01-15T09:00:00Z",end_date:"2024-01-15T17:00:00Z",location:"Cape Town Convention Centre",budget:5e4,max_participants:200,expected_attendees:180,actual_attendees:165,organizer_name:"Sarah Johnson",participant_count:165,resource_count:8},{id:"2",title:"Sales Team Training Workshop",description:"Quarterly sales training and strategy session",type:"training",status:"completed",start_date:"2024-01-10T08:00:00Z",end_date:"2024-01-12T16:00:00Z",location:"Johannesburg Office",budget:25e3,max_participants:50,expected_attendees:45,actual_attendees:42,organizer_name:"Mike Chen",participant_count:42,resource_count:5},{id:"3",title:"Trade Show - Food & Beverage Expo",description:"Annual food and beverage industry trade show",type:"trade_show",status:"planned",start_date:"2024-02-20T08:00:00Z",end_date:"2024-02-22T18:00:00Z",location:"Durban ICC",budget:75e3,max_participants:300,expected_attendees:280,organizer_name:"Lisa Williams",participant_count:0,resource_count:12}])}catch(x){console.error("Error fetching events:",x)}finally{i(!1)}},u=async()=>{var x,$,N,p,h,S,A,w;try{const b=localStorage.getItem("token"),j=await fetch("/api/events/analytics/summary",{headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"}});if(j.ok){const T=await j.json();r({total_events:((x=T.event_stats)==null?void 0:x.total_events)||0,completed_events:(($=T.event_stats)==null?void 0:$.completed_events)||0,active_events:((N=T.event_stats)==null?void 0:N.active_events)||0,cancelled_events:((p=T.event_stats)==null?void 0:p.cancelled_events)||0,total_budget:((h=T.event_stats)==null?void 0:h.total_budget)||0,avg_budget:((S=T.event_stats)==null?void 0:S.avg_budget)||0,total_participants:((A=T.participation_stats)==null?void 0:A.total_participants)||0,attendance_rate:((w=T.participation_stats)==null?void 0:w.attendance_rate)||0})}else r({total_events:15,completed_events:8,active_events:4,cancelled_events:1,total_budget:45e4,avg_budget:3e4,total_participants:1250,attendance_rate:87.5})}catch(b){console.error("Error fetching metrics:",b)}},o=x=>{switch(x){case"active":return"text-green-600 bg-green-100";case"planned":return"text-blue-600 bg-blue-100";case"completed":return"text-gray-600 bg-gray-100";case"cancelled":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},g=x=>{switch(x){case"product_launch":return"text-purple-600 bg-purple-100";case"trade_show":return"text-blue-600 bg-blue-100";case"training":return"text-green-600 bg-green-100";case"meeting":return"text-orange-600 bg-orange-100";case"campaign":return"text-indigo-600 bg-indigo-100";default:return"text-gray-600 bg-gray-100"}},m=x=>new Date(x).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Events Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage product launches, trade shows, training sessions, and campaigns"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs(be,{variant:"outline",children:[e.jsx(xt,{className:"h-4 w-4 mr-2"}),"Filter"]}),e.jsxs(be,{children:[e.jsx(zs,{className:"h-4 w-4 mr-2"}),"Create Event"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-6 gap-6",children:[e.jsx(te,{children:e.jsx(ae,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Bs,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Events"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.total_events})]})]})})}),e.jsx(te,{children:e.jsx(ae,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Ze,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Events"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.active_events})]})]})})}),e.jsx(te,{children:e.jsx(ae,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(Be,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Participants"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.total_participants})]})]})})}),e.jsx(te,{children:e.jsx(ae,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(oe,{className:"h-6 w-6 text-orange-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Attendance Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[s.attendance_rate,"%"]})]})]})})}),e.jsx(te,{children:e.jsx(ae,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:e.jsx($e,{className:"h-6 w-6 text-indigo-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Budget"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Te(s.total_budget)})]})]})})}),e.jsx(te,{children:e.jsx(ae,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(Bs,{className:"h-6 w-6 text-red-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.completed_events})]})]})})})]}),e.jsxs(te,{children:[e.jsx(ps,{children:e.jsx(gs,{children:"Events Overview"})}),e.jsx(ae,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Event Details"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Participants"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Budget"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(x=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:x.title}),e.jsx("div",{className:"text-sm text-gray-500",children:x.description}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Organizer: ",x.organizer_name]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${g(x.type)}`,children:x.type.replace("_"," ")})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${o(x.status)}`,children:x.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-900",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Bs,{className:"h-4 w-4 mr-1 text-gray-400"}),m(x.start_date)]}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(Ke,{className:"h-4 w-4 mr-1 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-500",children:x.location})]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"text-sm text-gray-900",children:[x.actual_attendees||x.participant_count," / ",x.expected_attendees]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-1",children:e.jsx("div",{className:"h-2 rounded-full bg-blue-600",style:{width:`${Math.min(100,(x.actual_attendees||x.participant_count)/x.expected_attendees*100)}%`}})})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Te(x.budget)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(be,{variant:"outline",size:"sm",children:"View Details"}),e.jsx(be,{variant:"outline",size:"sm",children:"Edit"})]})})]},x.id))})]})})})]})]})}function Io(){const[t,a]=y.useState({totalCampaigns:0,activeCampaigns:0,totalReach:0,averageCTR:0,totalSpend:0,averageROI:0}),[s,r]=y.useState([]),[n,i]=y.useState(!0);y.useEffect(()=>{l()},[]);const l=async()=>{try{i(!0),a({totalCampaigns:24,activeCampaigns:8,totalReach:125e3,averageCTR:3.2,totalSpend:85e3,averageROI:4.5}),r([{id:"1",name:"Summer Product Launch",type:"multi_channel",status:"active",startDate:"2024-01-01",endDate:"2024-03-31",budget:25e3,spent:18500,reach:45e3,impressions:125e3,clicks:4200,conversions:320,ctr:3.36,roi:5.2,targetAudience:"Young Professionals"},{id:"2",name:"Brand Awareness Campaign",type:"social",status:"active",startDate:"2024-01-15",endDate:"2024-02-15",budget:15e3,spent:12800,reach:28e3,impressions:85e3,clicks:2550,conversions:180,ctr:3,roi:3.8,targetAudience:"General Consumers"},{id:"3",name:"Holiday Promotion",type:"email",status:"scheduled",startDate:"2024-02-01",endDate:"2024-02-29",budget:8e3,spent:0,reach:0,impressions:0,clicks:0,conversions:0,ctr:0,roi:0,targetAudience:"Existing Customers"}])}catch(o){console.error("Error fetching campaigns data:",o)}finally{i(!1)}},c=o=>{switch(o){case"active":return"text-green-600 bg-green-100";case"draft":return"text-gray-600 bg-gray-100";case"paused":return"text-yellow-600 bg-yellow-100";case"completed":return"text-blue-600 bg-blue-100";case"scheduled":return"text-purple-600 bg-purple-100";default:return"text-gray-600 bg-gray-100"}},d=o=>{switch(o){case"email":return"text-blue-600 bg-blue-100";case"social":return"text-pink-600 bg-pink-100";case"display":return"text-orange-600 bg-orange-100";case"search":return"text-green-600 bg-green-100";case"multi_channel":return"text-purple-600 bg-purple-100";default:return"text-gray-600 bg-gray-100"}},u=(o,g)=>g>0?Math.round(o/g*100):0;return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Campaign Management"}),e.jsx("p",{className:"text-gray-600",children:"Create, manage, and track marketing campaigns across all channels"})]}),e.jsxs(be,{children:[e.jsx(ar,{className:"h-4 w-4 mr-2"}),"Create Campaign"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-6",children:[e.jsx(te,{children:e.jsx(ae,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(ar,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Campaigns"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.totalCampaigns})]})]})})}),e.jsx(te,{children:e.jsx(ae,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Bs,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Campaigns"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.activeCampaigns})]})]})})}),e.jsx(te,{children:e.jsx(ae,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(Be,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Reach"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.totalReach.toLocaleString()})]})]})})}),e.jsx(te,{children:e.jsx(ae,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(bl,{className:"h-6 w-6 text-orange-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Average CTR"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[t.averageCTR,"%"]})]})]})})}),e.jsx(te,{children:e.jsx(ae,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(ns,{className:"h-6 w-6 text-red-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Spend"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Te(t.totalSpend)})]})]})})}),e.jsx(te,{children:e.jsx(ae,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:e.jsx(oe,{className:"h-6 w-6 text-indigo-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Average ROI"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[t.averageROI,"x"]})]})]})})})]}),e.jsxs(te,{children:[e.jsx(ps,{children:e.jsx(gs,{children:"Campaign Performance"})}),e.jsx(ae,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Campaign Details"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Budget"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Performance"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ROI"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(o=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:o.name}),e.jsx("div",{className:"text-sm text-gray-500",children:o.targetAudience}),e.jsxs("div",{className:"text-sm text-gray-500",children:[new Date(o.startDate).toLocaleDateString()," - ",new Date(o.endDate).toLocaleDateString()]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${d(o.type)}`,children:o.type.replace("_"," ")})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${c(o.status)}`,children:o.status})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"text-sm text-gray-900",children:[Te(o.spent)," / ",Te(o.budget)]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-1",children:e.jsx("div",{className:`h-2 rounded-full ${u(o.spent,o.budget)>80?"bg-red-600":u(o.spent,o.budget)>60?"bg-yellow-600":"bg-green-600"}`,style:{width:`${u(o.spent,o.budget)}%`}})})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"text-sm text-gray-900",children:["Reach: ",o.reach.toLocaleString()]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["CTR: ",o.ctr,"% | Conv: ",o.conversions]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:`text-sm font-medium ${o.roi>=3?"text-green-600":o.roi>=2?"text-yellow-600":"text-red-600"}`,children:o.roi>0?`${o.roi}x`:"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(be,{variant:"outline",size:"sm",children:"View Details"}),e.jsx(be,{variant:"outline",size:"sm",children:"Edit"})]})})]},o.id))})]})})})]})]})}function Mo({data:t,xKey:a,yKeys:s,title:r,height:n=300}){return e.jsxs("div",{className:"w-full",children:[r&&e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:r}),e.jsx(ne,{width:"100%",height:n,children:e.jsxs(At,{data:t,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(ue,{strokeDasharray:"3 3"}),e.jsx(pe,{dataKey:a}),e.jsx(xe,{}),e.jsx(le,{}),e.jsx(Ba,{}),s.map(i=>e.jsx(qs,{type:"monotone",dataKey:i.key,stroke:i.color,name:i.name,strokeWidth:2},i.key))]})})]})}function Vo({data:t,xKey:a,yKeys:s,title:r,height:n=300}){return e.jsxs("div",{className:"w-full",children:[r&&e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:r}),e.jsx(ne,{width:"100%",height:n,children:e.jsxs(ds,{data:t,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(ue,{strokeDasharray:"3 3"}),e.jsx(pe,{dataKey:a}),e.jsx(xe,{}),e.jsx(le,{}),e.jsx(Ba,{}),s.map(i=>e.jsx(os,{dataKey:i.key,fill:i.color,name:i.name},i.key))]})})]})}function Bo({data:t,title:a,height:s=300}){return e.jsxs("div",{className:"w-full",children:[a&&e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:a}),e.jsx(ne,{width:"100%",height:s,children:e.jsxs(Rs,{children:[e.jsx(Es,{data:t,cx:"50%",cy:"50%",labelLine:!1,label:({name:r,percent:n})=>`${r} ${(n*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:t.map((r,n)=>e.jsx(Ts,{fill:r.color},`cell-${n}`))}),e.jsx(le,{}),e.jsx(Ba,{})]})})]})}function ba({data:t,columns:a,title:s,searchable:r=!0,exportable:n=!0,pagination:i=!0,pageSize:l=10}){const[c,d]=y.useState(""),[u,o]=y.useState(null),[g,m]=y.useState(1),[x,$]=y.useState({}),N=y.useMemo(()=>{let b=t;return c&&(b=b.filter(j=>Object.values(j).some(T=>String(T).toLowerCase().includes(c.toLowerCase())))),Object.entries(x).forEach(([j,T])=>{T&&(b=b.filter(k=>String(k[j]).toLowerCase().includes(T.toLowerCase())))}),b},[t,c,x]),p=y.useMemo(()=>u?[...N].sort((b,j)=>{const T=b[u.key],k=j[u.key];return T<k?u.direction==="asc"?-1:1:T>k?u.direction==="asc"?1:-1:0}):N,[N,u]),h=y.useMemo(()=>{if(!i)return p;const b=(g-1)*l;return p.slice(b,b+l)},[p,g,l,i]),S=Math.ceil(p.length/l),A=b=>{o(j=>(j==null?void 0:j.key)===b?j.direction==="asc"?{key:b,direction:"desc"}:null:{key:b,direction:"asc"})},w=()=>{const b=[a.map(D=>D.title).join(","),...p.map(D=>a.map(R=>String(D[R.key]||"")).join(","))].join(`
`),j=new Blob([b],{type:"text/csv"}),T=URL.createObjectURL(j),k=document.createElement("a");k.href=T,k.download=`${s||"data"}.csv`,k.click(),URL.revokeObjectURL(T)};return e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[s&&e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:s}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",h.length," of ",p.length," entries"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[r&&e.jsxs("div",{className:"relative",children:[e.jsx(ws,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search...",className:"form-input pl-10 w-64",value:c,onChange:b=>d(b.target.value)})]}),n&&e.jsxs("button",{onClick:w,className:"btn-outline",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsx("tr",{children:a.map(b=>e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:b.title}),b.sortable&&e.jsx("button",{onClick:()=>A(b.key),className:"text-gray-400 hover:text-gray-600",children:(u==null?void 0:u.key)===b.key?u.direction==="asc"?e.jsx(wl,{className:"h-4 w-4"}):e.jsx(Zr,{className:"h-4 w-4"}):e.jsx(Zr,{className:"h-4 w-4 opacity-50"})}),b.filterable&&e.jsxs("div",{className:"relative",children:[e.jsx(xt,{className:"h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Filter...",className:"absolute top-6 left-0 w-32 text-xs border rounded px-2 py-1",value:x[b.key]||"",onChange:j=>$(T=>({...T,[b.key]:j.target.value}))})]})]})},b.key))})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map((b,j)=>e.jsx("tr",{className:"hover:bg-gray-50",children:a.map(T=>e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:T.render?T.render(b[T.key],b):b[T.key]},T.key))},j))})]})}),i&&S>1&&e.jsxs("div",{className:"px-6 py-3 flex items-center justify-between border-t border-gray-200",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>m(b=>Math.max(b-1,1)),disabled:g===1,className:"btn-outline",children:"Previous"}),e.jsx("button",{onClick:()=>m(b=>Math.min(b+1,S)),disabled:g===S,className:"btn-outline",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing page ",e.jsx("span",{className:"font-medium",children:g})," of"," ",e.jsx("span",{className:"font-medium",children:S})]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[e.jsx("button",{onClick:()=>m(b=>Math.max(b-1,1)),disabled:g===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),Array.from({length:Math.min(5,S)},(b,j)=>{const T=j+1;return e.jsx("button",{onClick:()=>m(T),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${g===T?"z-10 bg-primary-50 border-primary-500 text-primary-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:T},T)}),e.jsx("button",{onClick:()=>m(b=>Math.min(b+1,S)),disabled:g===S,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Next"})]})})]})]})]})}const Lt={totalAgents:45,activeToday:38,totalPlacements:156,totalDistributions:284,totalCommissions:12450,avgPerformance:87.5},Li=[{date:"2024-01-01",placements:12,distributions:28,commissions:850},{date:"2024-01-02",placements:15,distributions:32,commissions:920},{date:"2024-01-03",placements:18,distributions:35,commissions:1100},{date:"2024-01-04",placements:14,distributions:29,commissions:890},{date:"2024-01-05",placements:20,distributions:38,commissions:1200},{date:"2024-01-06",placements:16,distributions:31,commissions:980},{date:"2024-01-07",placements:22,distributions:42,commissions:1350}],Ko=[{id:1,name:"John Doe",email:"john@example.com",phone:"+44 7700 900123",status:"Active",location:"London, UK",todayPlacements:3,todayDistributions:8,monthlyCommission:1250,performance:92,lastActivity:"2 minutes ago",totalTransactions:156},{id:2,name:"Jane Smith",email:"jane@example.com",phone:"+44 7700 900124",status:"Active",location:"Manchester, UK",todayPlacements:2,todayDistributions:6,monthlyCommission:1100,performance:88,lastActivity:"15 minutes ago",totalTransactions:142},{id:3,name:"Mike Johnson",email:"mike@example.com",phone:"+44 7700 900125",status:"Offline",location:"Birmingham, UK",todayPlacements:0,todayDistributions:0,monthlyCommission:950,performance:75,lastActivity:"2 hours ago",totalTransactions:98}],qo=[{name:"Board Placement",value:45,color:"#8B5CF6"},{name:"Product Distribution",value:78,color:"#10B981"},{name:"Customer Visit",value:32,color:"#F59E0B"},{name:"Commission Earned",value:28,color:"#EF4444"}];function Di(){const[t,a]=y.useState("7d"),[s,r]=y.useState(null),n=({title:l,value:c,icon:d,change:u,color:o="primary"})=>e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:`p-3 rounded-lg bg-${o}-100`,children:e.jsx(d,{className:`h-6 w-6 text-${o}-600`})})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:l}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:c}),u&&e.jsxs("p",{className:`text-sm ${u>0?"text-green-600":"text-red-600"}`,children:[u>0?"+":"",u,"% vs last period"]})]})]})}),i=[{key:"name",title:"Agent",sortable:!0,filterable:!0,render:(l,c)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-8 w-8 bg-primary-100 rounded-full flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-sm font-medium text-primary-600",children:l.split(" ").map(d=>d[0]).join("")})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:l}),e.jsx("div",{className:"text-sm text-gray-500",children:c.email})]})]})},{key:"status",title:"Status",sortable:!0,filterable:!0,render:l=>e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${l==="Active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:l})},{key:"location",title:"Location",sortable:!0,filterable:!0},{key:"todayPlacements",title:"Today Placements",sortable:!0,render:l=>e.jsx("span",{className:"font-medium text-purple-600",children:l})},{key:"todayDistributions",title:"Today Distributions",sortable:!0,render:l=>e.jsx("span",{className:"font-medium text-green-600",children:l})},{key:"monthlyCommission",title:"Monthly Commission",sortable:!0,render:l=>e.jsxs("span",{className:"font-medium text-gray-900",children:["",l.toLocaleString()]})},{key:"performance",title:"Performance",sortable:!0,render:l=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 mr-2",children:e.jsx("div",{className:`h-2 rounded-full ${l>=90?"bg-green-500":l>=70?"bg-yellow-500":"bg-red-500"}`,style:{width:`${l}%`}})}),e.jsxs("span",{className:"text-sm font-medium",children:[l,"%"]})]})},{key:"totalTransactions",title:"Total Transactions",sortable:!0,render:l=>e.jsx("span",{className:"font-medium text-blue-600",children:l})},{key:"actions",title:"Actions",render:(l,c)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-800",children:e.jsx(ns,{className:"h-4 w-4"})}),e.jsx("button",{className:"text-green-600 hover:text-green-800",children:e.jsx(ot,{className:"h-4 w-4"})}),e.jsx("button",{className:"text-gray-600 hover:text-gray-800",children:e.jsx(jn,{className:"h-4 w-4"})})]})}];return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Field Agents Dashboard"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Comprehensive field agent management with real-time tracking and analytics"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("select",{value:t,onChange:l=>a(l.target.value),className:"form-select",children:[e.jsx("option",{value:"1d",children:"Last 24 Hours"}),e.jsx("option",{value:"7d",children:"Last 7 Days"}),e.jsx("option",{value:"30d",children:"Last 30 Days"}),e.jsx("option",{value:"90d",children:"Last 90 Days"})]}),e.jsxs("button",{className:"btn-primary",children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Add Agent"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-6",children:[e.jsx(n,{title:"Total Agents",value:Lt.totalAgents,icon:Be,change:8,color:"blue"}),e.jsx(n,{title:"Active Today",value:Lt.activeToday,icon:bs,change:12,color:"green"}),e.jsx(n,{title:"Board Placements",value:Lt.totalPlacements,icon:Ke,change:-5,color:"purple"}),e.jsx(n,{title:"Distributions",value:Lt.totalDistributions,icon:Ce,change:15,color:"orange"}),e.jsx(n,{title:"Total Commissions",value:`${Lt.totalCommissions.toLocaleString()}`,icon:$e,change:22,color:"green"}),e.jsx(n,{title:"Avg Performance",value:`${Lt.avgPerformance}%`,icon:oe,change:3,color:"blue"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Performance Trends"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Daily performance metrics over time"})]}),e.jsx(Mo,{data:Li,xKey:"date",yKeys:[{key:"placements",color:"#8B5CF6",name:"Board Placements"},{key:"distributions",color:"#10B981",name:"Product Distributions"}],height:300})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Commission Analysis"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Daily commission earnings"})]}),e.jsx(Vo,{data:Li,xKey:"date",yKeys:[{key:"commissions",color:"#F59E0B",name:"Daily Commissions ()"}],height:300})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Activity Distribution"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Breakdown of agent activities"})]}),e.jsx(Bo,{data:qo,height:250})]}),e.jsxs("div",{className:"card lg:col-span-2",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Real-time Activity Feed"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Live updates from field agents"})]}),e.jsx("div",{className:"space-y-4 max-h-64 overflow-y-auto",children:[{agent:"John Doe",action:"Placed Premium Billboard",location:"High Street, London",time:"2 min ago",name:"placement"},{agent:"Jane Smith",action:"Completed product delivery",location:"ABC Store, Manchester",time:"5 min ago",name:"distribution"},{agent:"Mike Johnson",action:"Started customer visit",location:"XYZ Corp, Birmingham",time:"12 min ago",name:"visit"},{agent:"Sarah Wilson",action:"Earned commission",location:"Multiple locations",time:"18 min ago",name:"commission"}].map((l,c)=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:`p-2 rounded-full ${l.name==="placement"?"bg-purple-100":l.name==="distribution"?"bg-green-100":l.name==="visit"?"bg-blue-100":"bg-yellow-100"}`,children:l.name==="placement"?e.jsx(Ke,{className:"h-4 w-4 text-purple-600"}):l.name==="distribution"?e.jsx(Ce,{className:"h-4 w-4 text-green-600"}):l.name==="visit"?e.jsx(Be,{className:"h-4 w-4 text-blue-600"}):e.jsx($e,{className:"h-4 w-4 text-yellow-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:l.agent}),e.jsx("p",{className:"text-sm text-gray-600",children:l.action}),e.jsxs("p",{className:"text-xs text-gray-500",children:[l.location,"  ",l.time]})]})]},c))})]})]}),e.jsx(ba,{data:Ko,columns:i,title:"Field Agent Details",searchable:!0,exportable:!0,pagination:!0,pageSize:10}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Transaction-Level Analytics"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Detailed breakdown of all field operations"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-purple-600",children:"Board Placements"}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:"156"})]}),e.jsx(Ke,{className:"h-8 w-8 text-purple-600"})]}),e.jsxs("div",{className:"mt-2 text-xs text-purple-600",children:[e.jsx("span",{className:"font-medium",children:"GPS Verified:"})," 154 (98.7%)"]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-600",children:"Product Distributions"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:"284"})]}),e.jsx(Ce,{className:"h-8 w-8 text-green-600"})]}),e.jsxs("div",{className:"mt-2 text-xs text-green-600",children:[e.jsx("span",{className:"font-medium",children:"Signature Captured:"})," 282 (99.3%)"]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Customer Visits"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:"128"})]}),e.jsx(Be,{className:"h-8 w-8 text-blue-600"})]}),e.jsxs("div",{className:"mt-2 text-xs text-blue-600",children:[e.jsx("span",{className:"font-medium",children:"Avg Duration:"})," 45 minutes"]})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-600",children:"Commission Events"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:"89"})]}),e.jsx($e,{className:"h-8 w-8 text-yellow-600"})]}),e.jsxs("div",{className:"mt-2 text-xs text-yellow-600",children:[e.jsx("span",{className:"font-medium",children:"Total Value:"})," 12,450"]})]})]})]})]})}class Yo extends ut{constructor(){super(...arguments);Xe(this,"baseUrl","/field-operations")}async getFieldAgents(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}/agents?${r.toString()}`)).data}async getFieldAgent(s){return(await this.get(`${this.baseUrl}/agents/${s}`)).data}async createFieldAgent(s){return(await this.post(`${this.baseUrl}/agents`,s)).data}async updateFieldAgent(s,r){return(await this.put(`${this.baseUrl}/agents/${s}`,r)).data}async deleteFieldAgent(s){return(await this.delete(`${this.baseUrl}/agents/${s}`)).data}async getAgentPerformance(s,r,n){const i=new URLSearchParams;return r&&i.append("start_date",r),n&&i.append("end_date",n),(await this.get(`${this.baseUrl}/agents/${s}/performance?${i.toString()}`)).data}async getAgentLocation(s){return(await this.get(`${this.baseUrl}/agents/${s}/location`)).data}async updateAgentLocation(s,r){return(await this.post(`${this.baseUrl}/agents/${s}/location`,r)).data}async getAgentLocationHistory(s,r,n){const i=new URLSearchParams;return r&&i.append("start_date",r),n&&i.append("end_date",n),(await this.get(`${this.baseUrl}/agents/${s}/location-history?${i.toString()}`)).data}async getFieldTasks(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}/tasks?${r.toString()}`)).data}async getFieldTask(s){return(await this.get(`${this.baseUrl}/tasks/${s}`)).data}async createFieldTask(s){return(await this.post(`${this.baseUrl}/tasks`,s)).data}async updateFieldTask(s,r){return(await this.put(`${this.baseUrl}/tasks/${s}`,r)).data}async deleteFieldTask(s){return(await this.delete(`${this.baseUrl}/tasks/${s}`)).data}async assignTask(s,r){return(await this.post(`${this.baseUrl}/tasks/${s}/assign`,{agent_id:r})).data}async startTask(s){return(await this.post(`${this.baseUrl}/tasks/${s}/start`)).data}async completeTask(s,r,n){const i=new FormData;return r&&i.append("notes",r),n&&n.forEach((c,d)=>{i.append(`attachment_${d}`,c)}),(await this.post(`${this.baseUrl}/tasks/${s}/complete`,i,{headers:{"Content-Type":"multipart/form-data"}})).data}async cancelTask(s,r){return(await this.post(`${this.baseUrl}/tasks/${s}/cancel`,{reason:r})).data}async getFieldVisits(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}/visits?${r.toString()}`)).data}async getFieldVisit(s){return(await this.get(`${this.baseUrl}/visits/${s}`)).data}async createFieldVisit(s){return(await this.post(`${this.baseUrl}/visits`,s)).data}async updateFieldVisit(s,r){return(await this.put(`${this.baseUrl}/visits/${s}`,r)).data}async checkInVisit(s,r){return(await this.post(`${this.baseUrl}/visits/${s}/check-in`,{location:r})).data}async checkOutVisit(s,r,n,i,l){const c=new FormData;return c.append("location",JSON.stringify(r)),c.append("outcomes",JSON.stringify(n)),i&&c.append("notes",i),l&&l.forEach((u,o)=>{c.append(`photo_${o}`,u)}),(await this.post(`${this.baseUrl}/visits/${s}/check-out`,c,{headers:{"Content-Type":"multipart/form-data"}})).data}async cancelVisit(s,r){return(await this.post(`${this.baseUrl}/visits/${s}/cancel`,{reason:r})).data}async getTeamPerformance(s,r,n){const i=new URLSearchParams;return s&&i.append("team_id",s),r&&i.append("start_date",r),n&&i.append("end_date",n),(await this.get(`${this.baseUrl}/teams/performance?${i.toString()}`)).data}async getTeamStats(s){const r=new URLSearchParams;return s&&r.append("team_id",s),(await this.get(`${this.baseUrl}/teams/stats?${r.toString()}`)).data}async getTerritories(){return(await this.get(`${this.baseUrl}/territories`)).data}async getTerritory(s){return(await this.get(`${this.baseUrl}/territories/${s}`)).data}async createTerritory(s){return(await this.post(`${this.baseUrl}/territories`,s)).data}async updateTerritory(s,r){return(await this.put(`${this.baseUrl}/territories/${s}`,r)).data}async deleteTerritory(s){return(await this.delete(`${this.baseUrl}/territories/${s}`)).data}async getFieldOperationsStats(s){const r=new URLSearchParams;return s!=null&&s.start_date&&r.append("start_date",s.start_date),s!=null&&s.end_date&&r.append("end_date",s.end_date),(await this.get(`${this.baseUrl}/stats?${r.toString()}`)).data}async getPerformanceAnalytics(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}/analytics/performance?${r.toString()}`)).data}async getProductivityAnalytics(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}/analytics/productivity?${r.toString()}`)).data}async exportFieldOperationsReport(s="pdf",r={}){const n=new URLSearchParams;Object.entries(r).forEach(([u,o])=>{o!=null&&o!==""&&n.append(u,String(o))}),n.append("format",s);const i=await this.get(`${this.baseUrl}/reports/operations?${n.toString()}`,{responseType:"blob"}),l=new Blob([i.data]),c=window.URL.createObjectURL(l),d=document.createElement("a");d.href=c,d.download=`field-operations-report-${Date.now()}.${s}`,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(c)}async getLiveAgentLocations(){return(await this.get(`${this.baseUrl}/live/agent-locations`)).data}async getActiveVisits(){return(await this.get(`${this.baseUrl}/live/active-visits`)).data}async getPendingTasks(){return(await this.get(`${this.baseUrl}/live/pending-tasks`)).data}async getRealtimeMetrics(){return(await this.get(`${this.baseUrl}/live/metrics`)).data}async bulkAssignTasks(s,r){return(await this.post(`${this.baseUrl}/tasks/bulk-assign`,{task_ids:s,agent_id:r})).data}async bulkUpdateTaskStatus(s,r){return(await this.post(`${this.baseUrl}/tasks/bulk-update-status`,{task_ids:s,status:r})).data}async getFieldOperationsAnalytics(s){const r=new URLSearchParams;return s.start_date&&r.append("start_date",s.start_date),s.end_date&&r.append("end_date",s.end_date),(await this.get(`${this.baseUrl}/analytics?${r.toString()}`)).data}async getFieldOperationsTrends(s){const r=new URLSearchParams;return s.start_date&&r.append("start_date",s.start_date),s.end_date&&r.append("end_date",s.end_date),(await this.get(`${this.baseUrl}/trends?${r.toString()}`)).data}async getRouteOptimization(s,r){return(await this.get(`${this.baseUrl}/routes/optimize?agent_id=${s}&date=${r}`)).data}async getFieldInsights(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}/insights?${r.toString()}`)).data}async getOperationalMetrics(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}/metrics?${r.toString()}`)).data}}const Aa=new Yo,Oi=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4"];function Ii(){var m,x,$,N,p,h,S,A,w,b;const[t,a]=y.useState({start_date:new Date(Date.now()-2592e6).toISOString().split("T")[0],end_date:new Date().toISOString().split("T")[0]}),{data:s,isLoading:r,refetch:n}=de({queryKey:["field-operations-dashboard-stats",t],queryFn:()=>Aa.getFieldOperationsStats(t),staleTime:1e3*60*5}),{data:i,isLoading:l}=de({queryKey:["field-operations-analytics",t],queryFn:()=>Aa.getFieldOperationsAnalytics(t),staleTime:1e3*60*5}),{data:c,isLoading:d}=de({queryKey:["field-operations-trends",t],queryFn:()=>Aa.getFieldOperationsTrends(t),staleTime:1e3*60*5}),u=r||l||d,o=()=>{n()},g=()=>{Aa.exportFieldOperationsReport("pdf",{...t,report_type:"dashboard"})};return u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Pe,{size:"lg"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Field Operations Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Monitor field agent performance and territory management"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"date",value:t.start_date,onChange:j=>a({...t,start_date:j.target.value}),className:"input text-sm"}),e.jsx("input",{type:"date",value:t.end_date,onChange:j=>a({...t,end_date:j.target.value}),className:"input text-sm"})]}),e.jsxs("button",{onClick:o,className:"btn-outline flex items-center space-x-2",children:[e.jsx(_s,{className:"w-4 h-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{onClick:g,className:"btn-primary flex items-center space-x-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsx("span",{children:"Export Report"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-blue-100",children:e.jsx(Be,{className:"h-6 w-6 text-blue-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Agents"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:J((s==null?void 0:s.total_agents)||0)}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsxs("span",{className:"text-green-600",children:[(s==null?void 0:s.active_agents)||0," active"]}),e.jsxs("span",{className:"text-gray-500 ml-1",children:[" ",(s==null?void 0:s.inactive_agents)||0," inactive"]})]})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-green-100",children:e.jsx(cs,{className:"h-6 w-6 text-green-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Tasks Completed"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:J((s==null?void 0:s.completed_tasks)||0)}),e.jsxs("div",{className:"flex items-center text-sm",children:[(s==null?void 0:s.task_completion_growth)>=0?e.jsx(oe,{className:"w-4 h-4 text-green-500 mr-1"}):e.jsx(He,{className:"w-4 h-4 text-red-500 mr-1"}),e.jsxs("span",{className:(s==null?void 0:s.task_completion_growth)>=0?"text-green-600":"text-red-600",children:[Math.abs((s==null?void 0:s.task_completion_growth)||0),"%"]})]})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-purple-100",children:e.jsx(Ke,{className:"h-6 w-6 text-purple-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Territories Covered"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:J((s==null?void 0:s.territories_covered)||0)}),e.jsxs("p",{className:"text-sm text-gray-500",children:[(s==null?void 0:s.coverage_percentage)||0,"% coverage"]})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-yellow-100",children:e.jsx(xa,{className:"h-6 w-6 text-yellow-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Avg. Performance"}),e.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:[(s==null?void 0:s.average_performance_score)||0,"%"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[(s==null?void 0:s.performance_trend)>0?"":(s==null?void 0:s.performance_trend)<0?"":""," ",Math.abs((s==null?void 0:s.performance_trend)||0).toFixed(1)," vs last period"]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Agent Performance Trends"}),e.jsx(ye,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"h-80",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(Ps,{data:(c==null?void 0:c.daily_performance)||[],children:[e.jsx(ue,{strokeDasharray:"3 3"}),e.jsx(pe,{dataKey:"date",tickFormatter:j=>H(j,{format:"short"})}),e.jsx(xe,{}),e.jsx(le,{labelFormatter:j=>H(j),formatter:j=>[`${j}%`,"Performance Score"]}),e.jsx(fs,{type:"monotone",dataKey:"performance_score",stroke:"#3B82F6",fill:"#3B82F6",fillOpacity:.1})]})})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Task Status Distribution"}),e.jsx(ea,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"h-80",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(Rs,{children:[e.jsx(Es,{data:(i==null?void 0:i.task_status_distribution)||[],cx:"50%",cy:"50%",labelLine:!1,label:({name:j,percent:T})=>`${j} ${(T*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"count",children:((i==null?void 0:i.task_status_distribution)||[]).map((j,T)=>e.jsx(Ts,{fill:Oi[T%Oi.length]},`cell-${T}`))}),e.jsx(le,{})]})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Territory Performance"}),e.jsx(Ke,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"h-80",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(ds,{data:(i==null?void 0:i.territory_performance)||[],layout:"horizontal",children:[e.jsx(ue,{strokeDasharray:"3 3"}),e.jsx(pe,{type:"number"}),e.jsx(xe,{dataKey:"territory_name",type:"category",width:100}),e.jsx(le,{formatter:j=>[`${j}%`,"Performance Score"]}),e.jsx(os,{dataKey:"performance_score",fill:"#10B981"})]})})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Agent Activity Levels"}),e.jsx(bs,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"h-80",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(At,{data:(c==null?void 0:c.agent_activity)||[],children:[e.jsx(ue,{strokeDasharray:"3 3"}),e.jsx(pe,{dataKey:"date",tickFormatter:j=>H(j,{format:"short"})}),e.jsx(xe,{}),e.jsx(le,{labelFormatter:j=>H(j),formatter:j=>[j,"Active Agents"]}),e.jsx(qs,{type:"monotone",dataKey:"active_agents",stroke:"#8B5CF6",strokeWidth:2})]})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Top Performing Agents"}),e.jsx(xa,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"space-y-3",children:((i==null?void 0:i.top_agents)||[]).slice(0,5).map((j,T)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${T===0?"bg-yellow-100 text-yellow-800":T===1?"bg-gray-100 text-gray-800":T===2?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"}`,children:T+1}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"font-medium text-gray-900",children:j.agent_name}),e.jsx("p",{className:"text-sm text-gray-500",children:j.territory_name})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[j.performance_score,"%"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[j.completed_tasks," tasks"]})]})]},j.agent_id))})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activities"}),e.jsx(bs,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"space-y-3",children:((i==null?void 0:i.recent_activities)||[]).slice(0,5).map(j=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-3 h-3 rounded-full mr-3 ${j.type==="task_completed"?"bg-green-500":j.type==="visit_completed"?"bg-blue-500":j.type==="territory_assigned"?"bg-purple-500":"bg-gray-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:j.agent_name}),e.jsx("p",{className:"text-sm text-gray-500",children:j.description})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:H(j.created_at)}),j.location&&e.jsx("p",{className:"text-xs text-gray-400",children:j.location})]})]},j.id))})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Territory Coverage"}),e.jsx(Pr,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:((i==null?void 0:i.territory_coverage)||[]).map(j=>e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:j.territory_name}),e.jsxs("span",{className:"text-sm text-gray-500",children:[j.agent_count," agents"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Coverage"}),e.jsxs("span",{className:"font-medium",children:[j.coverage_percentage,"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Performance"}),e.jsxs("span",{className:"font-medium",children:[j.performance_score,"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Tasks"}),e.jsx("span",{className:"font-medium",children:J(j.total_tasks)})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${j.coverage_percentage}%`}})})]})]},j.territory_id))})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Performance Metrics"}),e.jsx(ye,{className:"w-5 h-5 text-gray-400"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Task Completion Rate"}),e.jsx(Fe,{className:"w-4 h-4 text-green-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Current Period"}),e.jsxs("span",{className:"font-medium",children:[((m=i==null?void 0:i.metrics)==null?void 0:m.task_completion_rate)||0,"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Target"}),e.jsxs("span",{className:"font-medium",children:[">"," 85%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${(((x=i==null?void 0:i.metrics)==null?void 0:x.task_completion_rate)||0)>=85?"bg-green-500":"bg-yellow-500"}`,style:{width:`${(($=i==null?void 0:i.metrics)==null?void 0:$.task_completion_rate)||0}%`}})})]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Response Time"}),e.jsx(Ze,{className:"w-4 h-4 text-blue-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Average"}),e.jsxs("span",{className:"font-medium",children:[((N=i==null?void 0:i.metrics)==null?void 0:N.avg_response_time)||0,"h"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Target"}),e.jsxs("span",{className:"font-medium",children:["<"," 4h"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${(((p=i==null?void 0:i.metrics)==null?void 0:p.avg_response_time)||0)<=4?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min((((h=i==null?void 0:i.metrics)==null?void 0:h.avg_response_time)||0)*25,100)}%`}})})]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Territory Efficiency"}),e.jsx(ma,{className:"w-4 h-4 text-purple-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Current"}),e.jsxs("span",{className:"font-medium",children:[((S=i==null?void 0:i.metrics)==null?void 0:S.territory_efficiency)||0,"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Target"}),e.jsxs("span",{className:"font-medium",children:[">"," 75%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-purple-500 h-2 rounded-full",style:{width:`${((A=i==null?void 0:i.metrics)==null?void 0:A.territory_efficiency)||0}%`}})})]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Agent Utilization"}),e.jsx(Be,{className:"w-4 h-4 text-orange-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Current"}),e.jsxs("span",{className:"font-medium",children:[((w=i==null?void 0:i.metrics)==null?void 0:w.agent_utilization)||0,"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Target"}),e.jsxs("span",{className:"font-medium",children:[">"," 80%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-orange-500 h-2 rounded-full",style:{width:`${((b=i==null?void 0:i.metrics)==null?void 0:b.agent_utilization)||0}%`}})})]})]})]})]}),(i==null?void 0:i.insights)&&i.insights.length>0&&e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Insights & Recommendations"}),e.jsx(oe,{className:"w-5 h-5 text-blue-500"})]}),e.jsx("div",{className:"space-y-3",children:i.insights.map((j,T)=>e.jsxs("div",{className:"flex items-start p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx(oe,{className:"w-5 h-5 text-blue-500 mt-0.5 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900",children:j.title}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:j.description}),j.recommendation&&e.jsxs("p",{className:"text-sm text-blue-600 mt-2 font-medium",children:[" ",j.recommendation]})]})]},T))})]})]})}function Mi(){const[t,a]=y.useState([]),[s,r]=y.useState(null),[n,i]=y.useState([]),[l,c]=y.useState(!0),[d,u]=y.useState(null),[o,g]=y.useState(""),[m,x]=y.useState("all"),[$,N]=y.useState(!1);y.useEffect(()=>{p();const k=setInterval(()=>{$||h()},3e4);return()=>clearInterval(k)},[]);const p=async()=>{try{c(!0),u(null);const k=[{id:"1",name:"John Smith",phone:"+1-555-0101",email:"john.smith@company.com",status:"active",location:{lat:40.7128,lng:-74.006,address:"123 Main St, New York, NY",timestamp:new Date().toISOString()},route:{id:"route-1",name:"Manhattan North",customers_planned:12,customers_visited:8,progress:67},device:{battery_level:85,signal_strength:4,last_sync:new Date(Date.now()-5*60*1e3).toISOString()},performance:{visits_today:8,sales_today:2500,distance_traveled:45.2,efficiency_score:92}},{id:"2",name:"Sarah Johnson",phone:"+1-555-0102",email:"sarah.johnson@company.com",status:"active",location:{lat:40.7589,lng:-73.9851,address:"456 Broadway, New York, NY",timestamp:new Date().toISOString()},route:{id:"route-2",name:"Manhattan South",customers_planned:10,customers_visited:6,progress:60},device:{battery_level:92,signal_strength:5,last_sync:new Date(Date.now()-2*60*1e3).toISOString()},performance:{visits_today:6,sales_today:1800,distance_traveled:32.1,efficiency_score:88}},{id:"3",name:"Mike Davis",phone:"+1-555-0103",email:"mike.davis@company.com",status:"inactive",location:{lat:40.6892,lng:-74.0445,address:"789 Liberty St, Jersey City, NJ",timestamp:new Date(Date.now()-30*60*1e3).toISOString()},route:{id:"route-3",name:"Jersey City",customers_planned:8,customers_visited:3,progress:38},device:{battery_level:23,signal_strength:2,last_sync:new Date(Date.now()-45*60*1e3).toISOString()},performance:{visits_today:3,sales_today:950,distance_traveled:18.7,efficiency_score:65}}],D=[{id:"1",customer_name:"ABC Electronics",address:"100 Tech Ave, New York, NY",visit_time:"09:00 AM",status:"completed",duration:45,sales_amount:850,notes:"Successful sale, customer interested in new products"},{id:"2",customer_name:"XYZ Retail",address:"200 Commerce St, New York, NY",visit_time:"10:30 AM",status:"completed",duration:30,sales_amount:650,notes:"Regular order placed"},{id:"3",customer_name:"Tech Solutions Inc",address:"300 Innovation Blvd, New York, NY",visit_time:"12:00 PM",status:"in_progress",duration:0,sales_amount:0,notes:"Currently presenting new product line"},{id:"4",customer_name:"Global Distributors",address:"400 Trade Center, New York, NY",visit_time:"02:00 PM",status:"planned",duration:0,sales_amount:0,notes:"Scheduled for product demonstration"}];await new Promise(R=>setTimeout(R,1e3)),a(k),i(D),k.length>0&&r(k[0])}catch(k){u("Failed to load field agents data"),console.error("Error loading agents:",k)}finally{c(!1)}},h=async()=>{a(k=>k.map(D=>({...D,location:{...D.location,timestamp:new Date().toISOString()},device:{...D.device,last_sync:new Date().toISOString()}})))},S=async()=>{N(!0),await p(),N(!1)},A=k=>{switch(k){case"active":return"text-green-600 bg-green-100";case"inactive":return"text-yellow-600 bg-yellow-100";case"offline":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},w=k=>{switch(k){case"completed":return"text-green-600 bg-green-100";case"in_progress":return"text-blue-600 bg-blue-100";case"planned":return"text-gray-600 bg-gray-100";case"skipped":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},b=k=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(k),j=k=>new Date(k).toLocaleTimeString(),T=t.filter(k=>{const D=k.name.toLowerCase().includes(o.toLowerCase())||k.phone.includes(o)||k.route.name.toLowerCase().includes(o.toLowerCase()),R=m==="all"||k.status===m;return D&&R});return l?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Pe,{})}):d?e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Live Mapping"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Real-time field agent tracking and route management."})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(we,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Live Mapping"}),e.jsx("p",{className:"text-gray-600 mb-4",children:d}),e.jsx("button",{onClick:p,className:"btn-primary",children:"Try Again"})]})})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Live Mapping"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Real-time field agent tracking and route management with live location updates."})]}),e.jsx("div",{className:"mt-4 sm:mt-0 flex items-center space-x-3",children:e.jsx("button",{onClick:S,disabled:$,className:"btn-outline p-2",children:e.jsx(_s,{className:`h-4 w-4 ${$?"animate-spin":""}`})})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ws,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search agents by name, phone, or route...",value:o,onChange:k=>g(k.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),e.jsxs("select",{value:m,onChange:k=>x(k.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"offline",children:"Offline"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Field Agents (",T.length,")"]})}),e.jsx("div",{className:"divide-y divide-gray-200 max-h-96 overflow-y-auto",children:T.map(k=>e.jsxs("div",{onClick:()=>r(k),className:`p-4 cursor-pointer hover:bg-gray-50 ${(s==null?void 0:s.id)===k.id?"bg-primary-50 border-r-2 border-primary-500":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsx(rr,{className:"h-5 w-5 text-primary-600"})})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:k.name}),e.jsx("p",{className:"text-xs text-gray-500",children:k.route.name})]})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-1",children:[e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${A(k.status)}`,children:k.status}),e.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-500",children:[e.jsx(Jr,{className:"h-3 w-3"}),e.jsxs("span",{children:[k.device.battery_level,"%"]})]})]})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ke,{className:"h-3 w-3"}),e.jsxs("span",{children:["Last seen: ",j(k.location.timestamp)]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(cs,{className:"h-3 w-3"}),e.jsxs("span",{children:[k.route.customers_visited,"/",k.route.customers_planned]})]})]})]},k.id))})]})}),e.jsx("div",{className:"lg:col-span-2",children:s?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsx(rr,{className:"h-8 w-8 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:s.name}),e.jsx("p",{className:"text-gray-600",children:s.route.name}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[e.jsx(Xr,{className:"h-4 w-4"}),e.jsx("span",{children:s.phone})]}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${A(s.status)}`,children:s.status})]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"btn-outline p-2",children:e.jsx(Xr,{className:"h-4 w-4"})}),e.jsx("button",{className:"btn-outline p-2",children:e.jsx($r,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s.performance.visits_today}),e.jsx("div",{className:"text-sm text-gray-500",children:"Visits Today"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:b(s.performance.sales_today)}),e.jsx("div",{className:"text-sm text-gray-500",children:"Sales Today"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[s.performance.distance_traveled," km"]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Distance"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[s.performance.efficiency_score,"%"]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Efficiency"})]})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Route Progress"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ma,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[s.route.progress,"% Complete"]})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-4",children:e.jsx("div",{className:"bg-primary-600 h-2 rounded-full transition-all duration-300",style:{width:`${s.route.progress}%`}})}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[e.jsxs("span",{children:["Visited: ",s.route.customers_visited]}),e.jsxs("span",{children:["Remaining: ",s.route.customers_planned-s.route.customers_visited]}),e.jsxs("span",{children:["Total: ",s.route.customers_planned]})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Device Status"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Jr,{className:`h-5 w-5 ${s.device.battery_level>20?"text-green-500":"text-red-500"}`}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[s.device.battery_level,"%"]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Battery"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(_l,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[s.device.signal_strength,"/5"]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Signal"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ze,{className:"h-5 w-5 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:j(s.device.last_sync)}),e.jsx("div",{className:"text-xs text-gray-500",children:"Last Sync"})]})]})]})]})})]}):e.jsx("div",{className:"card",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ke,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select an Agent"}),e.jsx("p",{className:"text-gray-600",children:"Choose a field agent from the list to view their live location and details."})]})})})]}),s&&e.jsx("div",{className:"card",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-6",children:"Today's Customer Visits"}),e.jsx("div",{className:"space-y-4",children:n.map(k=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex-shrink-0",children:[k.status==="completed"&&e.jsx(Fe,{className:"h-5 w-5 text-green-500"}),k.status==="in_progress"&&e.jsx(Ze,{className:"h-5 w-5 text-blue-500"}),k.status==="planned"&&e.jsx(Bs,{className:"h-5 w-5 text-gray-500"}),k.status==="skipped"&&e.jsx(nt,{className:"h-5 w-5 text-red-500"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:k.customer_name}),e.jsx("div",{className:"text-xs text-gray-500",children:k.address}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:k.notes})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:k.visit_time}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${w(k.status)}`,children:k.status.replace("_"," ")}),k.sales_amount>0&&e.jsx("div",{className:"text-xs text-green-600 mt-1",children:b(k.sales_amount)})]})]},k.id))})]})})]})}function Vi(){const[t,a]=y.useState([]),[s,r]=y.useState([]),[n,i]=y.useState(null),[l,c]=y.useState(!0),[d,u]=y.useState(null),[o,g]=y.useState(""),[m,x]=y.useState("all"),[$,N]=y.useState("all"),[,p]=y.useState(!1),[h,S]=y.useState(!1);y.useEffect(()=>{A()},[]);const A=async()=>{try{c(!0),u(null);const R=[{id:"1",name:"Summer Sale 2024",client:"Fashion Retailer Inc",start_date:"2024-06-01",end_date:"2024-08-31",budget:5e4,boards_required:25,boards_placed:18,status:"active"},{id:"2",name:"Tech Product Launch",client:"TechCorp Solutions",start_date:"2024-07-15",end_date:"2024-09-15",budget:75e3,boards_required:30,boards_placed:22,status:"active"},{id:"3",name:"Holiday Promotion",client:"Retail Chain Ltd",start_date:"2024-11-01",end_date:"2024-12-31",budget:1e5,boards_required:50,boards_placed:0,status:"paused"}],se=[{id:"1",board_id:"BB-001",board_type:"billboard",location:{address:"123 Main St, New York, NY",lat:40.7128,lng:-74.006,landmark:"Near Central Station"},agent_id:"1",agent_name:"John Smith",placement_date:"2024-06-15T09:00:00Z",status:"active",photos:{before:"/api/photos/bb001-before.jpg",after:"/api/photos/bb001-after.jpg",current:"/api/photos/bb001-current.jpg"},campaign:{id:"1",name:"Summer Sale 2024",client:"Fashion Retailer Inc",budget:5e4},metrics:{visibility_score:92,foot_traffic:15e3,estimated_impressions:45e3,cost_per_impression:.12},notes:"High visibility location, excellent condition",verification_required:!1,last_verified:"2024-10-15T14:30:00Z"},{id:"2",board_id:"PO-002",board_type:"poster",location:{address:"456 Broadway, New York, NY",lat:40.7589,lng:-73.9851,landmark:"Times Square Area"},agent_id:"2",agent_name:"Sarah Johnson",placement_date:"2024-07-20T11:30:00Z",status:"active",photos:{after:"/api/photos/po002-after.jpg",current:"/api/photos/po002-current.jpg"},campaign:{id:"2",name:"Tech Product Launch",client:"TechCorp Solutions",budget:75e3},metrics:{visibility_score:88,foot_traffic:25e3,estimated_impressions:75e3,cost_per_impression:.08},notes:"Premium location with high foot traffic",verification_required:!0,last_verified:"2024-10-10T16:45:00Z"},{id:"3",board_id:"BN-003",board_type:"banner",location:{address:"789 5th Ave, New York, NY",lat:40.7614,lng:-73.9776,landmark:"Shopping District"},agent_id:"3",agent_name:"Mike Davis",placement_date:"2024-06-25T08:15:00Z",removal_date:"2024-08-25T17:00:00Z",status:"removed",photos:{before:"/api/photos/bn003-before.jpg",after:"/api/photos/bn003-after.jpg"},campaign:{id:"1",name:"Summer Sale 2024",client:"Fashion Retailer Inc",budget:5e4},metrics:{visibility_score:85,foot_traffic:12e3,estimated_impressions:36e3,cost_per_impression:.15},notes:"Campaign completed successfully, removed as scheduled",verification_required:!1,last_verified:"2024-08-25T17:00:00Z"},{id:"4",board_id:"DG-004",board_type:"digital",location:{address:"321 Park Ave, New York, NY",lat:40.7505,lng:-73.9934,landmark:"Business District"},agent_id:"1",agent_name:"John Smith",placement_date:"2024-08-01T10:00:00Z",status:"damaged",photos:{after:"/api/photos/dg004-after.jpg",current:"/api/photos/dg004-damaged.jpg"},campaign:{id:"2",name:"Tech Product Launch",client:"TechCorp Solutions",budget:75e3},metrics:{visibility_score:95,foot_traffic:2e4,estimated_impressions:6e4,cost_per_impression:.1},notes:"Digital display damaged by weather, requires repair",verification_required:!0,last_verified:"2024-10-12T09:20:00Z"}];await new Promise(q=>setTimeout(q,1e3)),a(se),r(R)}catch(R){u("Failed to load board placements data"),console.error("Error loading placements:",R)}finally{c(!1)}},w=async()=>{S(!0),await A(),S(!1)},b=R=>{switch(R){case"active":return"text-green-600 bg-green-100";case"removed":return"text-gray-600 bg-gray-100";case"damaged":return"text-red-600 bg-red-100";case"expired":return"text-yellow-600 bg-yellow-100";default:return"text-gray-600 bg-gray-100"}},j=R=>{switch(R){case"billboard":return"text-blue-600 bg-blue-100";case"poster":return"text-green-600 bg-green-100";case"banner":return"text-purple-600 bg-purple-100";case"digital":return"text-orange-600 bg-orange-100";default:return"text-gray-600 bg-gray-100"}},T=R=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(R),k=R=>new Date(R).toLocaleDateString(),D=t.filter(R=>{const se=R.board_id.toLowerCase().includes(o.toLowerCase())||R.location.address.toLowerCase().includes(o.toLowerCase())||R.agent_name.toLowerCase().includes(o.toLowerCase())||R.campaign.name.toLowerCase().includes(o.toLowerCase()),q=m==="all"||R.status===m,Z=$==="all"||R.campaign.id===$;return se&&q&&Z});return l?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Pe,{})}):d?e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Board Placement"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage advertising board placements and campaign tracking."})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(we,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Board Placements"}),e.jsx("p",{className:"text-gray-600 mb-4",children:d}),e.jsx("button",{onClick:A,className:"btn-primary",children:"Try Again"})]})})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Board Placement"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage advertising board placements, campaigns, and performance tracking."})]}),e.jsxs("div",{className:"mt-4 sm:mt-0 flex items-center space-x-3",children:[e.jsx("button",{onClick:w,disabled:h,className:"btn-outline p-2",children:e.jsx(_s,{className:`h-4 w-4 ${h?"animate-spin":""}`})}),e.jsxs("button",{onClick:()=>p(!0),className:"btn-primary flex items-center space-x-2",children:[e.jsx(zs,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Placement"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:s.filter(R=>R.status==="active").map(R=>e.jsx("div",{className:"card",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:R.name}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium text-green-600 bg-green-100",children:R.status})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Client:"}),e.jsx("span",{className:"font-medium text-gray-900",children:R.client})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Budget:"}),e.jsx("span",{className:"font-medium text-gray-900",children:T(R.budget)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Progress:"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[R.boards_placed,"/",R.boards_required]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary-600 h-2 rounded-full transition-all duration-300",style:{width:`${R.boards_placed/R.boards_required*100}%`}})}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:k(R.start_date)}),e.jsx("span",{children:k(R.end_date)})]})]})]})},R.id))}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ws,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by board ID, location, agent, or campaign...",value:o,onChange:R=>g(R.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),e.jsxs("select",{value:m,onChange:R=>x(R.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"removed",children:"Removed"}),e.jsx("option",{value:"damaged",children:"Damaged"}),e.jsx("option",{value:"expired",children:"Expired"})]}),e.jsxs("select",{value:$,onChange:R=>N(R.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Campaigns"}),s.map(R=>e.jsx("option",{value:R.id,children:R.name},R.id))]})]}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Board Details"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Campaign"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agent"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Performance"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:D.map(R=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center",children:e.jsx(cs,{className:"h-5 w-5 text-gray-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:R.board_id}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${j(R.board_type)}`,children:R.board_type})]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:R.location.address}),e.jsx("div",{className:"text-sm text-gray-500",children:R.location.landmark})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:R.campaign.name}),e.jsx("div",{className:"text-sm text-gray-500",children:R.campaign.client})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:R.agent_name}),e.jsx("div",{className:"text-sm text-gray-500",children:k(R.placement_date)})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${b(R.status)}`,children:R.status}),R.verification_required&&e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium text-yellow-600 bg-yellow-100",children:"Verification Required"})})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"text-sm text-gray-900",children:["Score: ",R.metrics.visibility_score,"%"]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[R.metrics.estimated_impressions.toLocaleString()," impressions"]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>i(R),className:"text-primary-600 hover:text-primary-900",children:e.jsx(ns,{className:"h-4 w-4"})}),e.jsx("button",{className:"text-gray-600 hover:text-gray-900",children:e.jsx(ot,{className:"h-4 w-4"})}),e.jsx("button",{className:"text-red-600 hover:text-red-900",children:e.jsx(mt,{className:"h-4 w-4"})})]})})]},R.id))})]})})}),n&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Board Placement Details - ",n.board_id]}),e.jsx("button",{onClick:()=>i(null),className:"text-gray-400 hover:text-gray-600",children:e.jsx(nt,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Board Type"}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${j(n.board_type)}`,children:n.board_type})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${b(n.status)}`,children:n.status})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-900",children:n.location.address}),e.jsx("div",{className:"text-sm text-gray-500",children:n.location.landmark})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Performance Metrics"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-primary-600",children:[n.metrics.visibility_score,"%"]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Visibility Score"})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:n.metrics.estimated_impressions.toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-500",children:"Est. Impressions"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Photos"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.photos.before&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-full h-24 bg-gray-100 rounded-lg flex items-center justify-center mb-2",children:e.jsx(Za,{className:"h-8 w-8 text-gray-400"})}),e.jsx("div",{className:"text-xs text-gray-500",children:"Before"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-full h-24 bg-gray-100 rounded-lg flex items-center justify-center mb-2",children:e.jsx(Za,{className:"h-8 w-8 text-gray-400"})}),e.jsx("div",{className:"text-xs text-gray-500",children:"After"})]}),n.photos.current&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-full h-24 bg-gray-100 rounded-lg flex items-center justify-center mb-2",children:e.jsx(Za,{className:"h-8 w-8 text-gray-400"})}),e.jsx("div",{className:"text-xs text-gray-500",children:"Current"})]})]})]}),n.notes&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),e.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:e.jsx("div",{className:"text-sm text-gray-900",children:n.notes})})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>i(null),className:"btn-outline",children:"Close"}),e.jsx("button",{className:"btn-primary",children:"Edit Placement"})]})]})})})]})}function Bi(){return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Product Distribution"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Product Distribution functionality coming soon."})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Product Distribution"}),e.jsx("p",{className:"text-gray-600",children:"This feature is under development."})]})})]})}function Ki(){return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Commission Tracking"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Commission Tracking functionality coming soon."})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Commission Tracking"}),e.jsx("p",{className:"text-gray-600",children:"This feature is under development."})]})})]})}class zo{constructor(){Xe(this,"api");this.api=new ut}async getBoards(a){return this.api.get("/boards",{params:a})}async getBoard(a){return this.api.get(`/boards/${a}`)}async createBoard(a){return this.api.post("/boards",a)}async updateBoard(a,s){return this.api.put(`/boards/${a}`,s)}async deleteBoard(a){return this.api.delete(`/boards/${a}`)}async getBoardInstallations(a){return this.api.get("/board-installations",{params:a})}async getBoardInstallation(a){return this.api.get(`/board-installations/${a}`)}async createBoardInstallation(a){return this.api.post("/board-installations",a)}async updateBoardInstallation(a,s){return this.api.put(`/board-installations/${a}`,s)}async calculateCoverage(a,s){return this.api.post(`/board-installations/${a}/calculate-coverage`,s)}async getProducts(a){return this.api.get("/products",{params:a})}async getProduct(a){return this.api.get(`/products/${a}`)}async createProduct(a){return this.api.post("/products",a)}async updateProduct(a,s){return this.api.put(`/products/${a}`,s)}async deleteProduct(a){return this.api.delete(`/products/${a}`)}async getProductDistributions(a){return this.api.get("/product-distributions",{params:a})}async getProductDistribution(a){return this.api.get(`/product-distributions/${a}`)}async createProductDistribution(a){return this.api.post("/product-distributions",a)}async updateProductDistribution(a,s){return this.api.put(`/product-distributions/${a}`,s)}async logGPSLocation(a){return this.api.post("/gps-location/log",a)}async verifyCustomerLocation(a){return this.api.post("/gps-location/verify-customer",a)}async getCustomerLocation(a){return this.api.get(`/gps-location/customer/${a}`)}async updateCustomerLocation(a,s){return this.api.put(`/gps-location/customer/${a}/update`,s)}async startVisit(a){return this.api.post("/field-agent-workflow/start-visit",a)}async generateVisitList(a){return this.api.post("/field-agent-workflow/generate-visit-list",a)}async getVisitList(a){return this.api.get(`/field-agent-workflow/visit-list/${a}`)}async completeVisitItem(a){return this.api.post("/field-agent-workflow/complete-visit-item",a)}async completeVisit(a){return this.api.post("/field-agent-workflow/complete-visit",a)}async getAgentSummary(a,s){return this.api.get("/field-agent-workflow/agent-summary",{params:{agent_id:a,...s}})}async getCommissions(a){return this.api.get("/field-commissions",{params:a})}async getCommission(a){return this.api.get(`/field-commissions/${a}`)}async approveCommission(a,s){return this.api.put(`/field-commissions/${a}/approve`,s)}async rejectCommission(a,s){return this.api.put(`/field-commissions/${a}/reject`,s)}async getAgentCommissionSummary(a,s){return this.api.get(`/field-commissions/agent/${a}/summary`,{params:s})}calculateDistance(a,s,r,n){const l=a*Math.PI/180,c=r*Math.PI/180,d=(r-a)*Math.PI/180,u=(n-s)*Math.PI/180,o=Math.sin(d/2)*Math.sin(d/2)+Math.cos(l)*Math.cos(c)*Math.sin(u/2)*Math.sin(u/2);return 6371e3*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))}getDistanceStatus(a){return a<=10?{status:"perfect_match",color:"green",message:`Within ${a.toFixed(1)}m - Perfect match!`}:a<=50?{status:"acceptable",color:"yellow",message:`${a.toFixed(1)}m away - Acceptable but verify location`}:{status:"requires_explanation",color:"red",message:`${a.toFixed(1)}m away - Location update may be required`}}async uploadPhoto(a,s){const r=new FormData;return r.append("file",a),r.append("type",s),(await this.api.post("/upload-photo",r)).data.url}}const ft=new zo;function Qo(){const[t,a]=y.useState([]),[s,r]=y.useState(!0),[n,i]=y.useState(""),[l,c]=y.useState("all"),[d,u]=y.useState(!1),[o,g]=y.useState(null),[m,x]=y.useState({brand_id:"",board_code:"",board_name:"",dimensions:{width:2,height:1.5,unit:"meters"},material_type:"vinyl",installation_type:"outdoor",commission_rate:0,min_coverage_percentage:5,total_available:0});y.useEffect(()=>{$()},[]);const $=async()=>{try{r(!0);const w=await ft.getBoards();a(w.data)}catch(w){console.error("Error loading boards:",w)}finally{r(!1)}},N=async w=>{w.preventDefault();try{await ft.createBoard(m),u(!1),S(),$()}catch(b){console.error("Error creating board:",b)}},p=async w=>{if(w.preventDefault(),!!o)try{await ft.updateBoard(o.id,m),u(!1),g(null),S(),$()}catch(b){console.error("Error updating board:",b)}},h=async w=>{if(window.confirm("Are you sure you want to delete this board?"))try{await ft.deleteBoard(w),$()}catch(b){console.error("Error deleting board:",b)}},S=()=>{x({brand_id:"",board_code:"",board_name:"",dimensions:{width:2,height:1.5,unit:"meters"},material_type:"vinyl",installation_type:"outdoor",commission_rate:0,min_coverage_percentage:5,total_available:0})},A=t.filter(w=>{const b=w.board_name.toLowerCase().includes(n.toLowerCase())||w.board_code.toLowerCase().includes(n.toLowerCase()),j=l==="all"||w.status===l;return b&&j});return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Board Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage brand boards for field installations"})]}),e.jsxs("button",{onClick:()=>{S(),g(null),u(!0)},className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[e.jsx(zs,{className:"w-5 h-5"}),"Create Board"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Boards"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]}),e.jsx(ye,{className:"w-10 h-10 text-blue-500"})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Boards"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:t.filter(w=>w.status==="active").length})]}),e.jsx(Fe,{className:"w-10 h-10 text-green-500"})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Available"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.reduce((w,b)=>w+b.total_available,0)})]})})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Installed"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:t.reduce((w,b)=>w+b.total_installed,0)})]})})})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ws,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search boards...",value:n,onChange:w=>i(w.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("select",{value:l,onChange:w=>c(w.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"discontinued",children:"Discontinued"})]})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:o?"Edit Board":"Create New Board"}),e.jsxs("form",{onSubmit:o?p:N,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Board Code *"}),e.jsx("input",{type:"text",required:!0,value:m.board_code,onChange:w=>x({...m,board_code:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Board Name *"}),e.jsx("input",{type:"text",required:!0,value:m.board_name,onChange:w=>x({...m,board_name:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Width (meters)"}),e.jsx("input",{type:"number",step:"0.1",value:m.dimensions.width,onChange:w=>x({...m,dimensions:{...m.dimensions,width:parseFloat(w.target.value)}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Height (meters)"}),e.jsx("input",{type:"number",step:"0.1",value:m.dimensions.height,onChange:w=>x({...m,dimensions:{...m.dimensions,height:parseFloat(w.target.value)}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Commission Rate"}),e.jsx("input",{type:"number",step:"0.01",value:m.commission_rate,onChange:w=>x({...m,commission_rate:parseFloat(w.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Material Type"}),e.jsxs("select",{value:m.material_type,onChange:w=>x({...m,material_type:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"vinyl",children:"Vinyl"}),e.jsx("option",{value:"metal",children:"Metal"}),e.jsx("option",{value:"digital",children:"Digital"}),e.jsx("option",{value:"led",children:"LED"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Installation Type"}),e.jsxs("select",{value:m.installation_type,onChange:w=>x({...m,installation_type:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"outdoor",children:"Outdoor"}),e.jsx("option",{value:"indoor",children:"Indoor"}),e.jsx("option",{value:"window",children:"Window"}),e.jsx("option",{value:"rooftop",children:"Rooftop"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Coverage %"}),e.jsx("input",{type:"number",step:"0.1",value:m.min_coverage_percentage,onChange:w=>x({...m,min_coverage_percentage:parseFloat(w.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Available"}),e.jsx("input",{type:"number",value:m.total_available,onChange:w=>x({...m,total_available:parseInt(w.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>{u(!1),g(null),S()},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:o?"Update Board":"Create Board"})]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Board"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dimensions"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Commission"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Inventory"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-4 text-center text-gray-500",children:"Loading boards..."})}):A.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-4 text-center text-gray-500",children:"No boards found"})}):A.map(w=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:w.board_name}),e.jsx("div",{className:"text-sm text-gray-500",children:w.board_code})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:w.dimensions?`${w.dimensions.width} x ${w.dimensions.height} m`:"N/A"}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900",children:w.material_type}),e.jsx("div",{className:"text-xs text-gray-500",children:w.installation_type})]}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-900",children:["$",w.commission_rate.toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsxs("div",{className:"text-sm text-gray-900",children:["Available: ",w.total_available]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Installed: ",w.total_installed]})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${w.status==="active"?"bg-green-100 text-green-800":w.status==="inactive"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:w.status})}),e.jsxs("td",{className:"px-6 py-4 text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>{g(w),x({brand_id:w.brand_id,board_code:w.board_code,board_name:w.board_name,dimensions:w.dimensions||{width:2,height:1.5,unit:"meters"},material_type:w.material_type||"vinyl",installation_type:w.installation_type||"outdoor",commission_rate:w.commission_rate,min_coverage_percentage:w.min_coverage_percentage,total_available:w.total_available}),u(!0)},className:"text-blue-600 hover:text-blue-900 mr-3",children:e.jsx(ot,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>h(w.id),className:"text-red-600 hover:text-red-900",children:e.jsx(mt,{className:"w-5 h-5"})})]})]},w.id))})]})})]})}function Wo(){const[t,a]=y.useState([]),[s,r]=y.useState(null),[n,i]=y.useState(!0),[l,c]=y.useState("all"),[d,u]=y.useState("all"),[o,g]=y.useState(null),[m,x]=y.useState(!1);y.useEffect(()=>{$()},[l,d]);const $=async()=>{try{i(!0);const A={};l!=="all"&&(A.status=l),d!=="all"&&(A.activity_type=d);const w=await ft.getCommissions(A);a(w.data);const b=w.data.filter(D=>D.status==="pending"),j=w.data.filter(D=>D.status==="approved"),T=w.data.filter(D=>D.status==="paid"),k=w.data.filter(D=>D.status==="rejected");r({total_pending:b.reduce((D,R)=>D+R.total_amount,0),total_approved:j.reduce((D,R)=>D+R.total_amount,0),total_paid:T.reduce((D,R)=>D+R.total_amount,0),total_rejected:k.reduce((D,R)=>D+R.total_amount,0),pending_commissions:b,approved_commissions:j,monthly_breakdown:[]})}catch(A){console.error("Error loading commissions:",A)}finally{i(!1)}},N=async A=>{if(window.confirm("Are you sure you want to approve this commission?"))try{await ft.approveCommission(A),$()}catch(w){console.error("Error approving commission:",w)}},p=async A=>{const w=window.prompt("Please enter rejection reason:");if(w)try{await ft.rejectCommission(A,{rejection_reason:w}),$()}catch(b){console.error("Error rejecting commission:",b)}},h=A=>{switch(A){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"paid":return"bg-blue-100 text-blue-800";case"rejected":return"bg-red-100 text-red-800";case"info_requested":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},S=A=>{switch(A){case"board_installation":return"Board Installation";case"product_distribution":return"Product Distribution";default:return A}};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Commission Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage and approve field agent commissions"})]}),e.jsxs("button",{className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[e.jsx(Ie,{className:"w-5 h-5"}),"Export Report"]})]}),s&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),e.jsxs("p",{className:"text-2xl font-bold text-yellow-600",children:["$",s.total_pending.toFixed(2)]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[s.pending_commissions.length," commissions"]})]}),e.jsx(Ze,{className:"w-10 h-10 text-yellow-500"})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Approved"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["$",s.total_approved.toFixed(2)]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[s.approved_commissions.length," commissions"]})]}),e.jsx(Fe,{className:"w-10 h-10 text-green-500"})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Paid"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["$",s.total_paid.toFixed(2)]})]}),e.jsx($e,{className:"w-10 h-10 text-blue-500"})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",(s.total_pending+s.total_approved+s.total_paid).toFixed(2)]})]}),e.jsx(oe,{className:"w-10 h-10 text-purple-500"})]})})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("select",{value:l,onChange:A=>c(A.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"info_requested",children:"Info Requested"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"paid",children:"Paid"})]}),e.jsxs("select",{value:d,onChange:A=>u(A.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"board_installation",children:"Board Installation"}),e.jsx("option",{value:"product_distribution",children:"Product Distribution"})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agent"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Activity Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:"Loading commissions..."})}):t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:"No commissions found"})}):t.map(A=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"font-medium text-gray-900",children:A.agent_name||"Unknown Agent"})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:S(A.activity_type)}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:new Date(A.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"font-medium text-gray-900",children:["$",A.total_amount.toFixed(2)]}),A.bonus_amount>0&&e.jsxs("div",{className:"text-xs text-green-600",children:["+$",A.bonus_amount.toFixed(2)," bonus"]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${h(A.status)}`,children:A.status})}),e.jsx("td",{className:"px-6 py-4 text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>{g(A),x(!0)},className:"text-blue-600 hover:text-blue-900",title:"View Details",children:e.jsx(ns,{className:"w-5 h-5"})}),A.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>N(A.id),className:"text-green-600 hover:text-green-900",title:"Approve",children:e.jsx(Fe,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>p(A.id),className:"text-red-600 hover:text-red-900",title:"Reject",children:e.jsx(nt,{className:"w-5 h-5"})})]})]})})]},A.id))})]})}),m&&o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Commission Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Agent"}),e.jsx("p",{className:"font-medium",children:o.agent_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Activity Type"}),e.jsx("p",{className:"font-medium",children:S(o.activity_type)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Base Amount"}),e.jsxs("p",{className:"font-medium",children:["$",o.base_amount.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Bonus Amount"}),e.jsxs("p",{className:"font-medium text-green-600",children:["$",o.bonus_amount.toFixed(2)]})]})]}),o.penalty_amount>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Penalty Amount"}),e.jsxs("p",{className:"font-medium text-red-600",children:["-$",o.penalty_amount.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",o.total_amount.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),e.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${h(o.status)}`,children:o.status})]}),o.calculation_details&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Calculation Details"}),e.jsx("pre",{className:"bg-gray-50 p-4 rounded-lg text-xs overflow-x-auto",children:JSON.stringify(o.calculation_details,null,2)})]}),o.notes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Notes"}),e.jsx("p",{className:"text-sm",children:o.notes})]}),o.rejection_reason&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Rejection Reason"}),e.jsx("p",{className:"text-sm text-red-600",children:o.rejection_reason})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-500",children:[e.jsx("div",{children:e.jsxs("p",{children:["Created: ",new Date(o.created_at).toLocaleString()]})}),o.approved_at&&e.jsx("div",{children:e.jsxs("p",{children:["Approved: ",new Date(o.approved_at).toLocaleString()]})})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[o.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{p(o.id),x(!1)},className:"px-4 py-2 border border-red-300 text-red-700 rounded-lg hover:bg-red-50",children:"Reject"}),e.jsx("button",{onClick:()=>{N(o.id),x(!1)},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Approve"})]}),e.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Close"})]})]})})]})}function qi(){const[t,a]=y.useState("overview"),s=[{id:"overview",label:"Overview",icon:un},{id:"boards",label:"Boards",icon:Ce},{id:"products",label:"Products",icon:Ce},{id:"commissions",label:"Commissions",icon:$e},{id:"installations",label:"Installations",icon:Ke}];return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex space-x-8",children:s.map(r=>{const n=r.icon;return e.jsxs("button",{onClick:()=>a(r.id),className:`flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors ${t===r.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(n,{className:"w-5 h-5"}),r.label]},r.id)})})})}),e.jsxs("div",{className:"max-w-7xl mx-auto",children:[t==="overview"&&e.jsx(Go,{}),t==="boards"&&e.jsx(Qo,{}),t==="products"&&e.jsx(Ho,{}),t==="commissions"&&e.jsx(Wo,{}),t==="installations"&&e.jsx(Zo,{})]})]})}function Go(){return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Field Marketing Overview"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Monitor field marketing activities and performance"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Boards"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:"0"})]}),e.jsx(Ce,{className:"w-10 h-10 text-blue-500"})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Installations"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:"0"})]}),e.jsx(Ke,{className:"w-10 h-10 text-green-500"})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Distributions"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:"0"})]}),e.jsx(ye,{className:"w-10 h-10 text-purple-500"})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Commissions"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:"$0.00"})]}),e.jsx($e,{className:"w-10 h-10 text-yellow-500"})]})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("button",{className:"flex items-center gap-3 p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors",children:[e.jsx(Ce,{className:"w-6 h-6 text-blue-600"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Create New Board"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Add a new board to inventory"})]})]}),e.jsxs("button",{className:"flex items-center gap-3 p-4 border-2 border-gray-200 rounded-lg hover:border-green-500 hover:bg-green-50 transition-colors",children:[e.jsx(Ke,{className:"w-6 h-6 text-green-600"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"View Installations"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Track board installations"})]})]}),e.jsxs("button",{className:"flex items-center gap-3 p-4 border-2 border-gray-200 rounded-lg hover:border-purple-500 hover:bg-purple-50 transition-colors",children:[e.jsx(ye,{className:"w-6 h-6 text-purple-600"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Product Distributions"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Track product distributions"})]})]}),e.jsxs("button",{className:"flex items-center gap-3 p-4 border-2 border-gray-200 rounded-lg hover:border-yellow-500 hover:bg-yellow-50 transition-colors",children:[e.jsx($e,{className:"w-6 h-6 text-yellow-600"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Review Commissions"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Approve pending commissions"})]})]})]})]})]})}function Ho(){return e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Product Management"}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsx("p",{className:"text-gray-600",children:"Product management interface coming soon..."})})]})}function Zo(){return e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Board Installations"}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsx("p",{className:"text-gray-600",children:"Installation tracking interface coming soon..."})})]})}class Jo extends ut{constructor(){super(...arguments);Xe(this,"baseUrl","/kyc")}async getKYCSubmissions(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}?${r.toString()}`)).data}async getKYCSubmission(s){return(await this.get(`${this.baseUrl}/${s}`)).data}async createKYCSubmission(s){return(await this.post(this.baseUrl,s)).data}async updateKYCSubmission(s,r){return(await this.put(`${this.baseUrl}/${s}`,r)).data}async deleteKYCSubmission(s){return(await this.delete(`${this.baseUrl}/${s}`)).data}async uploadKYCDocument(s,r,n){const i=new FormData;return i.append("file",r),i.append("document_type",n),(await this.post(`${this.baseUrl}/${s}/documents`,i,{headers:{"Content-Type":"multipart/form-data"}})).data}async deleteKYCDocument(s,r){return(await this.delete(`${this.baseUrl}/${s}/documents/${r}`)).data}async verifyKYCDocument(s,r,n,i){return(await this.post(`${this.baseUrl}/${s}/documents/${r}/verify`,{verified:n,reason:i})).data}async approveKYCSubmission(s,r){return(await this.post(`${this.baseUrl}/${s}/approve`,{notes:r})).data}async rejectKYCSubmission(s,r,n){return(await this.post(`${this.baseUrl}/${s}/reject`,{reason:r,notes:n})).data}async requestKYCUpdate(s,r,n){return(await this.post(`${this.baseUrl}/${s}/request-update`,{required_updates:r,notes:n})).data}async runCreditCheck(s){return(await this.post(`${this.baseUrl}/${s}/credit-check`)).data}async verifyReferences(s){return(await this.post(`${this.baseUrl}/${s}/verify-references`)).data}async getKYCTemplates(){return(await this.get(`${this.baseUrl}/templates`)).data}async createKYCTemplate(s){return(await this.post(`${this.baseUrl}/templates`,s)).data}async updateKYCTemplate(s,r){return(await this.put(`${this.baseUrl}/templates/${s}`,r)).data}async deleteKYCTemplate(s){return(await this.delete(`${this.baseUrl}/templates/${s}`)).data}async setDefaultKYCTemplate(s){return(await this.post(`${this.baseUrl}/templates/${s}/set-default`)).data}async exportKYCReport(s="pdf",r={}){const n=new URLSearchParams;Object.entries(r).forEach(([u,o])=>{o!=null&&o!==""&&n.append(u,String(o))}),n.append("format",s);const i=await this.get(`${this.baseUrl}/export?${n.toString()}`,{responseType:"blob"}),l=new Blob([i.data]),c=window.URL.createObjectURL(l),d=document.createElement("a");d.href=c,d.download=`kyc-report-${Date.now()}.${s}`,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(c)}async getCustomerKYCHistory(s){return(await this.get(`${this.baseUrl}/customer/${s}/history`)).data}async getAgentKYCSubmissions(s,r={}){const n=new URLSearchParams;return Object.entries(r).forEach(([l,c])=>{c!=null&&c!==""&&n.append(l,String(c))}),(await this.get(`${this.baseUrl}/agent/${s}?${n.toString()}`)).data}async bulkApproveKYC(s,r){return(await this.post(`${this.baseUrl}/bulk-approve`,{submission_ids:s,notes:r})).data}async bulkRejectKYC(s,r,n){return(await this.post(`${this.baseUrl}/bulk-reject`,{submission_ids:s,reason:r,notes:n})).data}async getKYCStats(s){const r=new URLSearchParams;return s!=null&&s.start_date&&r.append("start_date",s.start_date),s!=null&&s.end_date&&r.append("end_date",s.end_date),(await this.get(`${this.baseUrl}/stats?${r.toString()}`)).data}async getKYCAnalytics(s){const r=new URLSearchParams;return s!=null&&s.start_date&&r.append("start_date",s.start_date),s!=null&&s.end_date&&r.append("end_date",s.end_date),(await this.get(`${this.baseUrl}/analytics?${r.toString()}`)).data}async getKYCTrends(s){const r=new URLSearchParams;return s!=null&&s.start_date&&r.append("start_date",s.start_date),s!=null&&s.end_date&&r.append("end_date",s.end_date),(await this.get(`${this.baseUrl}/trends?${r.toString()}`)).data}async getKYCReports(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}/reports?${r.toString()}`)).data}async getKYCAgents(){return(await this.get(`${this.baseUrl}/agents`)).data}}const qe=new Jo,Yi=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4"];function zi(){const[t,a]=y.useState({start_date:new Date(Date.now()-2592e6).toISOString().split("T")[0],end_date:new Date().toISOString().split("T")[0]}),{data:s,isLoading:r,refetch:n}=de({queryKey:["kyc-dashboard-stats",t],queryFn:()=>qe.getKYCStats(t),staleTime:1e3*60*5}),{data:i,isLoading:l}=de({queryKey:["kyc-analytics",t],queryFn:()=>qe.getKYCAnalytics(t),staleTime:1e3*60*5}),{data:c,isLoading:d}=de({queryKey:["kyc-trends",t],queryFn:()=>qe.getKYCTrends(t),staleTime:1e3*60*5}),u=r||l||d,o=()=>{n()},g=()=>{qe.exportKYCReport("pdf",{...t})};return u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Pe,{size:"lg"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"KYC Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Know Your Customer compliance and verification overview"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"date",value:t.start_date,onChange:m=>a({...t,start_date:m.target.value}),className:"input text-sm"}),e.jsx("input",{type:"date",value:t.end_date,onChange:m=>a({...t,end_date:m.target.value}),className:"input text-sm"})]}),e.jsxs("button",{onClick:o,className:"btn-outline flex items-center space-x-2",children:[e.jsx(_s,{className:"w-4 h-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{onClick:g,className:"btn-primary flex items-center space-x-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsx("span",{children:"Export Report"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-blue-100",children:e.jsx(dt,{className:"h-6 w-6 text-blue-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Submissions"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:J((s==null?void 0:s.total_submissions)||0)}),e.jsxs("div",{className:"flex items-center text-sm",children:[(s==null?void 0:s.submissions_growth)>=0?e.jsx(oe,{className:"w-4 h-4 text-green-500 mr-1"}):e.jsx(He,{className:"w-4 h-4 text-red-500 mr-1"}),e.jsxs("span",{className:(s==null?void 0:s.submissions_growth)>=0?"text-green-600":"text-red-600",children:[Math.abs((s==null?void 0:s.submissions_growth)||0),"%"]}),e.jsx("span",{className:"text-gray-500 ml-1",children:"vs last period"})]})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-yellow-100",children:e.jsx(Ze,{className:"h-6 w-6 text-yellow-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Pending Review"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:J((s==null?void 0:s.pending_submissions)||0)}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Avg. processing: ",(s==null?void 0:s.average_processing_time)||0," days"]})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-green-100",children:e.jsx(Fe,{className:"h-6 w-6 text-green-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Approval Rate"}),e.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:[(s==null?void 0:s.approval_rate)||0,"%"]}),e.jsxs("div",{className:"flex items-center text-sm",children:[(s==null?void 0:s.approval_rate_change)>=0?e.jsx(oe,{className:"w-4 h-4 text-green-500 mr-1"}):e.jsx(He,{className:"w-4 h-4 text-red-500 mr-1"}),e.jsxs("span",{className:(s==null?void 0:s.approval_rate_change)>=0?"text-green-600":"text-red-600",children:[Math.abs((s==null?void 0:s.approval_rate_change)||0),"%"]})]})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-red-100",children:e.jsx(we,{className:"h-6 w-6 text-red-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"High Risk"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:J((s==null?void 0:s.high_risk_submissions)||0)}),e.jsxs("p",{className:"text-sm text-gray-500",children:[(((s==null?void 0:s.high_risk_submissions)||0)/((s==null?void 0:s.total_submissions)||1)*100).toFixed(1),"% of total"]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Submission Trends"}),e.jsx(ye,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"h-80",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(Ps,{data:(c==null?void 0:c.daily_submissions)||[],children:[e.jsx(ue,{strokeDasharray:"3 3"}),e.jsx(pe,{dataKey:"date",tickFormatter:m=>H(m,"MMM dd")}),e.jsx(xe,{}),e.jsx(le,{labelFormatter:m=>H(m),formatter:m=>[m,"Submissions"]}),e.jsx(fs,{type:"monotone",dataKey:"submissions",stroke:"#3B82F6",fill:"#3B82F6",fillOpacity:.1})]})})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Status Distribution"}),e.jsx(ea,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"h-80",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(Rs,{children:[e.jsx(Es,{data:(i==null?void 0:i.status_distribution)||[],cx:"50%",cy:"50%",labelLine:!1,label:({name:m,percent:x})=>`${m} ${(x*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"count",children:((i==null?void 0:i.status_distribution)||[]).map((m,x)=>e.jsx(Ts,{fill:Yi[x%Yi.length]},`cell-${x}`))}),e.jsx(le,{})]})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Risk Level Analysis"}),e.jsx(we,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"h-80",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(ds,{data:(i==null?void 0:i.risk_level_distribution)||[],children:[e.jsx(ue,{strokeDasharray:"3 3"}),e.jsx(pe,{dataKey:"risk_level"}),e.jsx(xe,{}),e.jsx(le,{}),e.jsx(os,{dataKey:"count",fill:"#3B82F6"})]})})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Processing Time Trends"}),e.jsx(Ze,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"h-80",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(At,{data:(c==null?void 0:c.processing_time_trends)||[],children:[e.jsx(ue,{strokeDasharray:"3 3"}),e.jsx(pe,{dataKey:"date",tickFormatter:m=>H(m,"MMM dd")}),e.jsx(xe,{}),e.jsx(le,{labelFormatter:m=>H(m),formatter:m=>[`${m} days`,"Avg. Processing Time"]}),e.jsx(qs,{type:"monotone",dataKey:"avg_processing_time",stroke:"#10B981",strokeWidth:2})]})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Submissions"}),e.jsx(Bs,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"space-y-3",children:((i==null?void 0:i.recent_submissions)||[]).slice(0,5).map(m=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:m.customer_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["by ",m.agent_name]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${m.status==="approved"?"bg-green-100 text-green-800":m.status==="rejected"?"bg-red-100 text-red-800":m.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:m.status.toUpperCase()}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:H(m.submission_date)})]})]},m.id))})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Top Performing Agents"}),e.jsx(Be,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"space-y-3",children:((i==null?void 0:i.top_agents)||[]).slice(0,5).map((m,x)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${x===0?"bg-yellow-100 text-yellow-800":x===1?"bg-gray-100 text-gray-800":x===2?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"}`,children:x+1}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"font-medium text-gray-900",children:m.agent_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[m.total_submissions," submissions"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[m.approval_rate,"%"]}),e.jsx("p",{className:"text-sm text-gray-500",children:"approval rate"})]})]},m.agent_id))})]})]}),(i==null?void 0:i.compliance_alerts)&&i.compliance_alerts.length>0&&e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Compliance Alerts"}),e.jsx(we,{className:"w-5 h-5 text-red-500"})]}),e.jsx("div",{className:"space-y-3",children:i.compliance_alerts.map((m,x)=>e.jsxs("div",{className:"flex items-start p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx(we,{className:"w-5 h-5 text-red-500 mt-0.5 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-900",children:m.title}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:m.description}),e.jsxs("p",{className:"text-xs text-red-600 mt-2",children:["Priority: ",m.priority," | Created: ",H(m.created_at)]})]})]},x))})]})]})}function Xo(){var je,_e;const[t,a]=y.useState({page:1,limit:20,sort_by:"created_at",sort_order:"desc"}),[s,r]=y.useState([]),[n,i]=y.useState(!1),[l,c]=y.useState(!1),[d,u]=y.useState(null),[o,g]=y.useState(!1),m=Pt(),{data:x,isLoading:$,error:N,refetch:p}=de({queryKey:["kyc-submissions",t],queryFn:()=>qe.getKYCSubmissions(t),staleTime:1e3*60*5}),{data:h}=de({queryKey:["kyc-stats"],queryFn:()=>qe.getKYCStats(),staleTime:1e3*60*10}),S=(x==null?void 0:x.submissions)||[];x!=null&&x.pagination;const A=Ge({mutationFn:({id:_,notes:P})=>qe.approveKYCSubmission(_,P),onSuccess:()=>{m.invalidateQueries({queryKey:["kyc-submissions"]}),m.invalidateQueries({queryKey:["kyc-stats"]}),K.success("KYC submission approved successfully")},onError:_=>{K.error(_.message||"Failed to approve KYC submission")}}),w=Ge({mutationFn:({id:_,reason:P,notes:re})=>qe.rejectKYCSubmission(_,P,re),onSuccess:()=>{m.invalidateQueries({queryKey:["kyc-submissions"]}),m.invalidateQueries({queryKey:["kyc-stats"]}),K.success("KYC submission rejected")},onError:_=>{K.error(_.message||"Failed to reject KYC submission")}}),b=Ge({mutationFn:_=>qe.deleteKYCSubmission(_),onSuccess:()=>{m.invalidateQueries({queryKey:["kyc-submissions"]}),m.invalidateQueries({queryKey:["kyc-stats"]}),K.success("KYC submission deleted successfully")},onError:_=>{K.error(_.message||"Failed to delete KYC submission")}}),j=_=>{const P={pending:{color:"bg-yellow-100 text-yellow-800",icon:Ze},under_review:{color:"bg-blue-100 text-blue-800",icon:ns},approved:{color:"bg-green-100 text-green-800",icon:Fe},rejected:{color:"bg-red-100 text-red-800",icon:nt},requires_update:{color:"bg-orange-100 text-orange-800",icon:we}},re=P[_]||P.pending,I=re.icon;return e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${re.color}`,children:[e.jsx(I,{className:"w-3 h-3 mr-1"}),_.replace("_"," ").toUpperCase()]})},T=_=>{const P={low:"bg-green-100 text-green-800",medium:"bg-yellow-100 text-yellow-800",high:"bg-red-100 text-red-800"};return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${P[_]||P.medium}`,children:_.toUpperCase()})},k=async _=>{try{const P=await qe.getKYCSubmission(_);u(P),g(!0)}catch{K.error("Failed to load submission details")}},D=_=>{const P=prompt("Add approval notes (optional):");A.mutate({id:_,notes:P||void 0})},R=_=>{const P=prompt("Rejection reason (required):");if(!P)return;const re=prompt("Additional notes (optional):");w.mutate({id:_,reason:P,notes:re||void 0})},se=_=>{window.confirm("Are you sure you want to delete this KYC submission?")&&b.mutate(_)},q=()=>{qe.exportKYCReport("excel",t),K.success("Export started - file will download shortly")},Z=()=>{if(s.length===0)return;const _=prompt("Add bulk approval notes (optional):");Promise.all(s.map(P=>qe.approveKYCSubmission(P,_||void 0))).then(()=>{m.invalidateQueries({queryKey:["kyc-submissions"]}),m.invalidateQueries({queryKey:["kyc-stats"]}),K.success(`${s.length} submissions approved`),r([])}).catch(()=>{K.error("Some submissions failed to approve")})},F=()=>{if(s.length===0)return;const _=prompt("Bulk rejection reason (required):");if(!_)return;const P=prompt("Additional notes (optional):");Promise.all(s.map(re=>qe.rejectKYCSubmission(re,_,P||void 0))).then(()=>{m.invalidateQueries({queryKey:["kyc-submissions"]}),m.invalidateQueries({queryKey:["kyc-stats"]}),K.success(`${s.length} submissions rejected`),r([])}).catch(()=>{K.error("Some submissions failed to reject")})},ce=[{key:"customer_name",title:"Customer",render:(_,P)=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:P.customer_name}),e.jsx("div",{className:"text-sm text-gray-500",children:P.customer_code})]})},{key:"agent_name",title:"Agent",render:(_,P)=>e.jsx("div",{className:"text-sm text-gray-900",children:P.agent_name})},{key:"status",title:"Status",render:(_,P)=>j(P.status)},{key:"risk_level",title:"Risk Level",render:(_,P)=>{var re;return T(((re=P.verification_status)==null?void 0:re.risk_level)||"medium")}},{key:"overall_score",title:"Score",render:(_,P)=>{var re;return e.jsxs("div",{className:"text-sm font-medium",children:[((re=P.verification_status)==null?void 0:re.overall_score)||0,"/100"]})}},{key:"submission_date",title:"Submitted",render:(_,P)=>e.jsx("div",{className:"text-sm text-gray-900",children:H(P.submission_date)})},{key:"actions",title:"Actions",render:(_,P)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>k(P.id),className:"text-blue-600 hover:text-blue-900",title:"View Details",children:e.jsx(ns,{className:"w-4 h-4"})}),P.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>D(P.id),className:"text-green-600 hover:text-green-900",title:"Approve",disabled:A.isPending,children:e.jsx(Fe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>R(P.id),className:"text-red-600 hover:text-red-900",title:"Reject",disabled:w.isPending,children:e.jsx(nt,{className:"w-4 h-4"})})]}),e.jsx("button",{onClick:()=>se(P.id),className:"text-red-600 hover:text-red-900",title:"Delete",disabled:b.isPending,children:e.jsx(mt,{className:"w-4 h-4"})})]})}];return $?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Pe,{size:"lg"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"KYC Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage customer Know Your Customer submissions"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>c(!l),className:"btn-outline flex items-center space-x-2",children:[e.jsx(xt,{className:"w-4 h-4"}),e.jsx("span",{children:"Filters"})]}),e.jsxs("button",{onClick:q,className:"btn-outline flex items-center space-x-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsx("span",{children:"Export"})]}),e.jsxs("button",{onClick:()=>i(!0),className:"btn-primary flex items-center space-x-2",children:[e.jsx(zs,{className:"w-4 h-4"}),e.jsx("span",{children:"New KYC"})]})]})]}),h&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-blue-100",children:e.jsx(dt,{className:"h-6 w-6 text-blue-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Submissions"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:h.total_submissions})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-yellow-100",children:e.jsx(Ze,{className:"h-6 w-6 text-yellow-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Pending Review"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:h.pending_submissions})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-green-100",children:e.jsx(Fe,{className:"h-6 w-6 text-green-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Approved"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:h.approved_submissions})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-red-100",children:e.jsx(nt,{className:"h-6 w-6 text-red-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Rejected"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:h.rejected_submissions})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-purple-100",children:e.jsx(pn,{className:"h-6 w-6 text-purple-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Approval Rate"}),e.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:[h.approval_rate,"%"]})]})]})})]}),l&&e.jsx("div",{className:"card",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(ws,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search customers, agents...",className:"input pl-10",value:t.search||"",onChange:_=>a({...t,search:_.target.value,page:1})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{className:"input",value:t.status||"",onChange:_=>a({...t,status:_.target.value||void 0,page:1}),children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"under_review",children:"Under Review"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"requires_update",children:"Requires Update"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Risk Level"}),e.jsxs("select",{className:"input",value:t.risk_level||"",onChange:_=>a({...t,risk_level:_.target.value||void 0,page:1}),children:[e.jsx("option",{value:"",children:"All Risk Levels"}),e.jsx("option",{value:"low",children:"Low Risk"}),e.jsx("option",{value:"medium",children:"Medium Risk"}),e.jsx("option",{value:"high",children:"High Risk"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date Range"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"date",className:"input text-sm",value:t.start_date||"",onChange:_=>a({...t,start_date:_.target.value||void 0,page:1})}),e.jsx("input",{type:"date",className:"input text-sm",value:t.end_date||"",onChange:_=>a({...t,end_date:_.target.value||void 0,page:1})})]})]})]})}),e.jsx("div",{className:"card",children:e.jsx(ba,{data:S,columns:ce,title:"KYC Submissions",searchable:!0,exportable:!0,pagination:!0,pageSize:t.limit||20})}),s.length>0&&e.jsx("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 bg-white rounded-lg shadow-lg border p-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[s.length," selected"]}),e.jsx("button",{onClick:Z,className:"btn-primary btn-sm",children:"Bulk Approve"}),e.jsx("button",{onClick:F,className:"btn-outline btn-sm",children:"Bulk Reject"}),e.jsx("button",{onClick:()=>r([]),className:"btn-outline btn-sm",children:"Clear Selection"})]})}),o&&d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"KYC Submission Details"}),e.jsx("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(nt,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Customer Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Name"}),e.jsx("p",{className:"text-gray-900",children:d.customer_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Code"}),e.jsx("p",{className:"text-gray-900",children:d.customer_code})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Status"}),e.jsx("div",{className:"mt-1",children:j(d.status)})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Verification Status"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Risk Level"}),e.jsx("div",{className:"mt-1",children:T(((je=d.verification_status)==null?void 0:je.risk_level)||"medium")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Overall Score"}),e.jsxs("p",{className:"text-gray-900",children:[((_e=d.verification_status)==null?void 0:_e.overall_score)||0,"/100"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Submitted By"}),e.jsx("p",{className:"text-gray-900",children:d.agent_name})]})]})]})]}),d.documents&&d.documents.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Documents"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.documents.map(_=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:_.document_type}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${_.verification_status==="verified"?"bg-green-100 text-green-800":_.verification_status==="rejected"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:_.verification_status})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:_.file_name}),e.jsx("button",{onClick:()=>window.open(_.file_url,"_blank"),className:"text-blue-600 hover:text-blue-800 text-sm",children:"View Document"})]},_.id))})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[d.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{D(d.id),g(!1)},className:"btn-primary",children:"Approve"}),e.jsx("button",{onClick:()=>{R(d.id),g(!1)},className:"btn-outline",children:"Reject"})]}),e.jsx("button",{onClick:()=>g(!1),className:"btn-outline",children:"Close"})]})]})})]})}const Qi=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4"];function em(){var g,m,x,$,N,p,h,S,A,w,b,j,T;const[t,a]=y.useState({start_date:new Date(Date.now()-2592e6).toISOString().split("T")[0],end_date:new Date().toISOString().split("T")[0],report_type:"summary"}),[s,r]=y.useState("summary"),{data:n,isLoading:i,refetch:l}=de({queryKey:["kyc-reports",t],queryFn:()=>qe.getKYCReports(t),staleTime:1e3*60*5}),{data:c}=de({queryKey:["kyc-agents"],queryFn:()=>qe.getKYCAgents(),staleTime:1e3*60*10}),d=k=>{qe.exportKYCReport(k,t),K.success(`${k.toUpperCase()} report export started`)},u=()=>{window.print()},o=[{id:"summary",name:"Summary Report",icon:ye,description:"Overview of KYC metrics and trends"},{id:"detailed",name:"Detailed Report",icon:dt,description:"Comprehensive submission details"},{id:"compliance",name:"Compliance Report",icon:Fe,description:"Regulatory compliance analysis"},{id:"performance",name:"Performance Report",icon:oe,description:"Agent and process performance"}];return i?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Pe,{size:"lg"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"KYC Reports"}),e.jsx("p",{className:"text-gray-600",children:"Comprehensive KYC compliance and performance reporting"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:u,className:"btn-outline flex items-center space-x-2",children:[e.jsx(yn,{className:"w-4 h-4"}),e.jsx("span",{children:"Print"})]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsxs("button",{onClick:()=>d("pdf"),className:"btn-outline flex items-center space-x-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsx("span",{children:"PDF"})]}),e.jsxs("button",{onClick:()=>d("excel"),className:"btn-outline flex items-center space-x-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsx("span",{children:"Excel"})]}),e.jsxs("button",{onClick:()=>d("excel"),className:"btn-outline flex items-center space-x-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsx("span",{children:"Excel"})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:o.map(k=>{const D=k.icon;return e.jsxs("button",{onClick:()=>{r(k.id),a({...t,report_type:k.id})},className:`p-4 rounded-lg border-2 text-left transition-all ${s===k.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(D,{className:`w-5 h-5 mr-2 ${s===k.id?"text-blue-600":"text-gray-400"}`}),e.jsx("h3",{className:`font-medium ${s===k.id?"text-blue-900":"text-gray-900"}`,children:k.name})]}),e.jsx("p",{className:"text-sm text-gray-600",children:k.description})]},k.id)})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",value:t.start_date,onChange:k=>a({...t,start_date:k.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",value:t.end_date,onChange:k=>a({...t,end_date:k.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Agent"}),e.jsxs("select",{value:t.agent_id||"",onChange:k=>a({...t,agent_id:k.target.value||void 0}),className:"input",children:[e.jsx("option",{value:"",children:"All Agents"}),(c||[]).map(k=>e.jsx("option",{value:k.id,children:k.name},k.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:t.status||"",onChange:k=>a({...t,status:k.target.value||void 0}),className:"input",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"under_review",children:"Under Review"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"requires_update",children:"Requires Update"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Risk Level"}),e.jsxs("select",{value:t.risk_level||"",onChange:k=>a({...t,risk_level:k.target.value||void 0}),className:"input",children:[e.jsx("option",{value:"",children:"All Risk Levels"}),e.jsx("option",{value:"low",children:"Low Risk"}),e.jsx("option",{value:"medium",children:"Medium Risk"}),e.jsx("option",{value:"high",children:"High Risk"})]})]})]})}),s==="summary"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-blue-100",children:e.jsx(dt,{className:"h-6 w-6 text-blue-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Submissions"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:J(((g=n==null?void 0:n.summary)==null?void 0:g.total_submissions)||0)})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-green-100",children:e.jsx(Fe,{className:"h-6 w-6 text-green-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Approved"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:J(((m=n==null?void 0:n.summary)==null?void 0:m.approved_submissions)||0)})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-yellow-100",children:e.jsx(Ze,{className:"h-6 w-6 text-yellow-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Avg. Processing Time"}),e.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:[((x=n==null?void 0:n.summary)==null?void 0:x.avg_processing_time)||0," days"]})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-purple-100",children:e.jsx(oe,{className:"h-6 w-6 text-purple-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Approval Rate"}),e.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:[(($=n==null?void 0:n.summary)==null?void 0:$.approval_rate)||0,"%"]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Submission Trends"}),e.jsx("div",{className:"h-80",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(Ps,{data:((N=n==null?void 0:n.charts)==null?void 0:N.submission_trends)||[],children:[e.jsx(ue,{strokeDasharray:"3 3"}),e.jsx(pe,{dataKey:"date",tickFormatter:k=>H(k,"MMM dd")}),e.jsx(xe,{}),e.jsx(le,{labelFormatter:k=>H(k)}),e.jsx(fs,{type:"monotone",dataKey:"submissions",stroke:"#3B82F6",fill:"#3B82F6",fillOpacity:.1})]})})})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Status Distribution"}),e.jsx("div",{className:"h-80",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(Rs,{children:[e.jsx(Es,{data:((p=n==null?void 0:n.charts)==null?void 0:p.status_distribution)||[],cx:"50%",cy:"50%",labelLine:!1,label:({name:k,percent:D})=>`${k} ${(D*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"count",children:(((h=n==null?void 0:n.charts)==null?void 0:h.status_distribution)||[]).map((k,D)=>e.jsx(Ts,{fill:Qi[D%Qi.length]},`cell-${D}`))}),e.jsx(le,{})]})})})]})]})]}),s==="detailed"&&e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Detailed Submissions"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agent"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Risk Level"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Score"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Submitted"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Processing Time"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(((S=n==null?void 0:n.detailed)==null?void 0:S.submissions)||[]).map(k=>{var D;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:k.customer_name}),e.jsx("div",{className:"text-sm text-gray-500",children:k.customer_code})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:k.agent_name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${k.status==="approved"?"bg-green-100 text-green-800":k.status==="rejected"?"bg-red-100 text-red-800":k.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:k.status.toUpperCase()})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${k.risk_level==="low"?"bg-green-100 text-green-800":k.risk_level==="high"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:(D=k.risk_level)==null?void 0:D.toUpperCase()})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[k.overall_score,"/100"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:H(k.submission_date)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[k.processing_time||0," days"]})]},k.id)})})]})})]}),s==="compliance"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Compliance Overview"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-green-600",children:[((A=n==null?void 0:n.compliance)==null?void 0:A.compliance_rate)||0,"%"]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Overall Compliance Rate"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-red-600",children:((w=n==null?void 0:n.compliance)==null?void 0:w.violations)||0}),e.jsx("div",{className:"text-sm text-gray-500",children:"Policy Violations"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:((b=n==null?void 0:n.compliance)==null?void 0:b.pending_reviews)||0}),e.jsx("div",{className:"text-sm text-gray-500",children:"Pending Reviews"})]})]})]}),((j=n==null?void 0:n.compliance)==null?void 0:j.violations_by_type)&&e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Violations by Type"}),e.jsx("div",{className:"h-80",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(ds,{data:n.compliance.violations_by_type,children:[e.jsx(ue,{strokeDasharray:"3 3"}),e.jsx(pe,{dataKey:"type"}),e.jsx(xe,{}),e.jsx(le,{}),e.jsx(os,{dataKey:"count",fill:"#EF4444"})]})})})]})]}),s==="performance"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Agent Performance"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agent"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Submissions"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Approval Rate"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Avg. Processing Time"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quality Score"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(((T=n==null?void 0:n.performance)==null?void 0:T.agents)||[]).map(k=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:k.agent_name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:k.total_submissions}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[k.approval_rate,"%"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[k.avg_processing_time," days"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[k.quality_score,"/100"]})]},k.agent_id))})]})})]})})]})}class sm extends ut{constructor(){super(...arguments);Xe(this,"baseUrl","/surveys")}async getSurveys(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}?${r.toString()}`)).data}async getSurvey(s){return(await this.get(`${this.baseUrl}/${s}`)).data}async createSurvey(s){return(await this.post(this.baseUrl,s)).data}async updateSurvey(s,r){return(await this.put(`${this.baseUrl}/${s}`,r)).data}async deleteSurvey(s){return(await this.delete(`${this.baseUrl}/${s}`)).data}async getSurveyResponses(s,r={}){const n=new URLSearchParams;return Object.entries(r).forEach(([l,c])=>{c!=null&&c!==""&&n.append(l,String(c))}),(await this.get(`${this.baseUrl}/${s}/responses?${n.toString()}`)).data}async submitSurveyResponse(s,r){return(await this.post(`${this.baseUrl}/${s}/responses`,r)).data}async exportSurveyResponses(s,r="csv"){const n=await this.get(`${this.baseUrl}/${s}/export?format=${r}`,{responseType:"blob"}),i=new Blob([n.data]),l=window.URL.createObjectURL(i),c=document.createElement("a");c.href=l,c.download=`survey-responses-${s}.${r}`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(l)}async duplicateSurvey(s){return(await this.post(`${this.baseUrl}/${s}/duplicate`)).data}async publishSurvey(s){return(await this.post(`${this.baseUrl}/${s}/publish`)).data}async archiveSurvey(s){return(await this.post(`${this.baseUrl}/${s}/archive`)).data}async getSurveyStats(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}/stats?${r.toString()}`)).data}async getSurveyAnalytics(s,r={}){const n=new URLSearchParams;return Object.entries(r).forEach(([l,c])=>{c!=null&&c!==""&&n.append(l,String(c))}),(await this.get(`${this.baseUrl}/${s}/analytics?${n.toString()}`)).data}async getSurveyTrends(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}/trends?${r.toString()}`)).data}async getSurveyInsights(s){return(await this.get(`${this.baseUrl}/${s}/insights`)).data}async getSurveyMetrics(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}/metrics?${r.toString()}`)).data}async getSurveyReports(s,r={}){const n=new URLSearchParams;return Object.entries(r).forEach(([l,c])=>{c!=null&&c!==""&&n.append(l,String(c))}),n.append("type",s),(await this.get(`${this.baseUrl}/reports?${n.toString()}`)).data}async activateSurvey(s){return(await this.post(`${this.baseUrl}/${s}/activate`)).data}async deactivateSurvey(s){return(await this.post(`${this.baseUrl}/${s}/deactivate`)).data}async exportSurveyReport(s,r="pdf"){const n=await this.get(`${this.baseUrl}/${s}/report?format=${r}`,{responseType:"blob"}),i=new Blob([n.data]),l=window.URL.createObjectURL(i),c=document.createElement("a");c.href=l,c.download=`survey-report-${s}-${Date.now()}.${r}`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(l)}}const as=new sm,Wi=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4"];function Gi(){const[t,a]=y.useState({start_date:new Date(Date.now()-2592e6).toISOString().split("T")[0],end_date:new Date().toISOString().split("T")[0]}),{data:s,isLoading:r,refetch:n}=de({queryKey:["surveys-dashboard-stats",t],queryFn:()=>as.getSurveyStats(t),staleTime:1e3*60*5}),{data:i,isLoading:l}=de({queryKey:["surveys-analytics",t],queryFn:()=>as.getSurveyAnalytics("all"),staleTime:1e3*60*5}),{data:c,isLoading:d}=de({queryKey:["surveys-trends",t],queryFn:()=>as.getSurveyTrends(t),staleTime:1e3*60*5}),u=r||l||d,o=()=>{n()},g=()=>{as.exportSurveyReport("pdf")};return u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Pe,{size:"lg"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Surveys Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Customer feedback and survey response analytics"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"date",value:t.start_date,onChange:m=>a({...t,start_date:m.target.value}),className:"input text-sm"}),e.jsx("input",{type:"date",value:t.end_date,onChange:m=>a({...t,end_date:m.target.value}),className:"input text-sm"})]}),e.jsxs("button",{onClick:o,className:"btn-outline flex items-center space-x-2",children:[e.jsx(_s,{className:"w-4 h-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{onClick:g,className:"btn-primary flex items-center space-x-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsx("span",{children:"Export Report"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-blue-100",children:e.jsx(dt,{className:"h-6 w-6 text-blue-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Surveys"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:J((s==null?void 0:s.total_surveys)||0)}),e.jsxs("div",{className:"flex items-center text-sm",children:[(s==null?void 0:s.surveys_growth)>=0?e.jsx(oe,{className:"w-4 h-4 text-green-500 mr-1"}):e.jsx(He,{className:"w-4 h-4 text-red-500 mr-1"}),e.jsxs("span",{className:(s==null?void 0:s.surveys_growth)>=0?"text-green-600":"text-red-600",children:[Math.abs((s==null?void 0:s.surveys_growth)||0),"%"]}),e.jsx("span",{className:"text-gray-500 ml-1",children:"vs last period"})]})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-green-100",children:e.jsx($r,{className:"h-6 w-6 text-green-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Responses"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:J((s==null?void 0:s.total_responses)||0)}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Avg. per survey: ",(((s==null?void 0:s.total_responses)||0)/((s==null?void 0:s.total_surveys)||1)).toFixed(1)]})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-purple-100",children:e.jsx(cs,{className:"h-6 w-6 text-purple-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Response Rate"}),e.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:[(s==null?void 0:s.response_rate)||0,"%"]}),e.jsxs("div",{className:"flex items-center text-sm",children:[(s==null?void 0:s.response_rate_change)>=0?e.jsx(oe,{className:"w-4 h-4 text-green-500 mr-1"}):e.jsx(He,{className:"w-4 h-4 text-red-500 mr-1"}),e.jsxs("span",{className:(s==null?void 0:s.response_rate_change)>=0?"text-green-600":"text-red-600",children:[Math.abs((s==null?void 0:s.response_rate_change)||0),"%"]})]})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-yellow-100",children:e.jsx(ei,{className:"h-6 w-6 text-yellow-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Avg. Satisfaction"}),e.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:[(s==null?void 0:s.average_satisfaction)||0,"/5"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[(s==null?void 0:s.satisfaction_trend)>0?"":(s==null?void 0:s.satisfaction_trend)<0?"":""," ",Math.abs((s==null?void 0:s.satisfaction_trend)||0).toFixed(1)," vs last period"]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Response Trends"}),e.jsx(ye,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"h-80",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(Ps,{data:(c==null?void 0:c.daily_responses)||[],children:[e.jsx(ue,{strokeDasharray:"3 3"}),e.jsx(pe,{dataKey:"date",tickFormatter:m=>H(m,"MMM dd")}),e.jsx(xe,{}),e.jsx(le,{labelFormatter:m=>H(m),formatter:m=>[m,"Responses"]}),e.jsx(fs,{type:"monotone",dataKey:"responses",stroke:"#3B82F6",fill:"#3B82F6",fillOpacity:.1})]})})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Survey Types"}),e.jsx(ea,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"h-80",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(Rs,{children:[e.jsx(Es,{data:(i==null?void 0:i.survey_types_distribution)||[],cx:"50%",cy:"50%",labelLine:!1,label:({name:m,percent:x})=>`${m} ${(x*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"count",children:((i==null?void 0:i.survey_types_distribution)||[]).map((m,x)=>e.jsx(Ts,{fill:Wi[x%Wi.length]},`cell-${x}`))}),e.jsx(le,{})]})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Satisfaction Scores"}),e.jsx(ei,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"h-80",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(ds,{data:(i==null?void 0:i.satisfaction_distribution)||[],children:[e.jsx(ue,{strokeDasharray:"3 3"}),e.jsx(pe,{dataKey:"rating"}),e.jsx(xe,{}),e.jsx(le,{}),e.jsx(os,{dataKey:"count",fill:"#F59E0B"})]})})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Response Rate Trends"}),e.jsx(cs,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"h-80",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(At,{data:(c==null?void 0:c.response_rate_trends)||[],children:[e.jsx(ue,{strokeDasharray:"3 3"}),e.jsx(pe,{dataKey:"date",tickFormatter:m=>H(m,"MMM dd")}),e.jsx(xe,{}),e.jsx(le,{labelFormatter:m=>H(m),formatter:m=>[`${m}%`,"Response Rate"]}),e.jsx(qs,{type:"monotone",dataKey:"response_rate",stroke:"#10B981",strokeWidth:2})]})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Surveys"}),e.jsx(Bs,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"space-y-3",children:((i==null?void 0:i.recent_surveys)||[]).slice(0,5).map(m=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:m.title}),e.jsxs("p",{className:"text-sm text-gray-500",children:["by ",m.created_by_name]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${m.status==="active"?"bg-green-100 text-green-800":m.status==="draft"?"bg-gray-100 text-gray-800":m.status==="completed"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:m.status.toUpperCase()}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[m.response_count," responses"]})]})]},m.id))})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Top Performing Surveys"}),e.jsx(xa,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"space-y-3",children:((i==null?void 0:i.top_surveys)||[]).slice(0,5).map((m,x)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${x===0?"bg-yellow-100 text-yellow-800":x===1?"bg-gray-100 text-gray-800":x===2?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"}`,children:x+1}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"font-medium text-gray-900",children:m.title}),e.jsxs("p",{className:"text-sm text-gray-500",children:[m.response_count," responses"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[m.response_rate,"%"]}),e.jsx("p",{className:"text-sm text-gray-500",children:"response rate"})]})]},m.id))})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Category Performance"}),e.jsx(ye,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:((i==null?void 0:i.category_performance)||[]).map(m=>e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:m.category}),e.jsxs("span",{className:"text-sm text-gray-500",children:[m.survey_count," surveys"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Avg. Response Rate"}),e.jsxs("span",{className:"font-medium",children:[m.avg_response_rate,"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Avg. Satisfaction"}),e.jsxs("span",{className:"font-medium",children:[m.avg_satisfaction,"/5"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Total Responses"}),e.jsx("span",{className:"font-medium",children:J(m.total_responses)})]})]})]},m.category))})]}),(i==null?void 0:i.insights)&&i.insights.length>0&&e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Insights & Recommendations"}),e.jsx(oe,{className:"w-5 h-5 text-blue-500"})]}),e.jsx("div",{className:"space-y-3",children:i.insights.map((m,x)=>e.jsxs("div",{className:"flex items-start p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx(oe,{className:"w-5 h-5 text-blue-500 mt-0.5 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900",children:m.title}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:m.description}),m.recommendation&&e.jsxs("p",{className:"text-sm text-blue-600 mt-2 font-medium",children:[" ",m.recommendation]})]})]},x))})]})]})}function tm(){const[t,a]=y.useState({page:1,limit:20,sort_by:"created_at",sort_order:"desc"}),[s,r]=y.useState([]),[n,i]=y.useState(!1),[l,c]=y.useState(!1),[d,u]=y.useState(null),[o,g]=y.useState(!1),m=Pt(),{data:x,isLoading:$,error:N,refetch:p}=de({queryKey:["surveys",t],queryFn:()=>as.getSurveys(t),staleTime:1e3*60*5}),{data:h}=de({queryKey:["surveys-stats"],queryFn:()=>as.getSurveyStats(),staleTime:1e3*60*10}),S=(x==null?void 0:x.surveys)||[];x!=null&&x.pagination;const A=Ge({mutationFn:_=>as.activateSurvey(_),onSuccess:()=>{m.invalidateQueries({queryKey:["surveys"]}),m.invalidateQueries({queryKey:["surveys-stats"]}),K.success("Survey activated successfully")},onError:_=>{K.error(_.message||"Failed to activate survey")}}),w=Ge({mutationFn:_=>as.deactivateSurvey(_),onSuccess:()=>{m.invalidateQueries({queryKey:["surveys"]}),m.invalidateQueries({queryKey:["surveys-stats"]}),K.success("Survey deactivated successfully")},onError:_=>{K.error(_.message||"Failed to deactivate survey")}}),b=Ge({mutationFn:_=>as.deleteSurvey(_),onSuccess:()=>{m.invalidateQueries({queryKey:["surveys"]}),m.invalidateQueries({queryKey:["surveys-stats"]}),K.success("Survey deleted successfully")},onError:_=>{K.error(_.message||"Failed to delete survey")}}),j=Ge({mutationFn:_=>as.duplicateSurvey(_),onSuccess:()=>{m.invalidateQueries({queryKey:["surveys"]}),K.success("Survey duplicated successfully")},onError:_=>{K.error(_.message||"Failed to duplicate survey")}}),T=_=>{const P={draft:{color:"bg-gray-100 text-gray-800",icon:Ze},active:{color:"bg-green-100 text-green-800",icon:Fe},paused:{color:"bg-yellow-100 text-yellow-800",icon:Ua},completed:{color:"bg-blue-100 text-blue-800",icon:Fe},archived:{color:"bg-gray-100 text-gray-600",icon:fn}},re=P[_]||P.draft,I=re.icon;return e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${re.color}`,children:[e.jsx(I,{className:"w-3 h-3 mr-1"}),_.toUpperCase()]})},k=_=>{const P={customer_satisfaction:"bg-blue-100 text-blue-800",product_feedback:"bg-green-100 text-green-800",market_research:"bg-purple-100 text-purple-800",employee_feedback:"bg-orange-100 text-orange-800",other:"bg-gray-100 text-gray-800"};return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${P[_]||P.other}`,children:_.replace("_"," ").toUpperCase()})},D=async _=>{try{const P=await as.getSurvey(_);u(P),g(!0)}catch{K.error("Failed to load survey details")}},R=_=>{A.mutate(_)},se=_=>{w.mutate(_)},q=_=>{window.confirm("Are you sure you want to delete this survey?")&&b.mutate(_)},Z=_=>{j.mutate(_)},F=()=>{as.exportSurveyReport("excel"),K.success("Export started - file will download shortly")},ce=()=>{s.length!==0&&Promise.all(s.map(_=>as.activateSurvey(_))).then(()=>{m.invalidateQueries({queryKey:["surveys"]}),m.invalidateQueries({queryKey:["surveys-stats"]}),K.success(`${s.length} surveys activated`),r([])}).catch(()=>{K.error("Some surveys failed to activate")})},je=()=>{s.length!==0&&Promise.all(s.map(_=>as.deactivateSurvey(_))).then(()=>{m.invalidateQueries({queryKey:["surveys"]}),m.invalidateQueries({queryKey:["surveys-stats"]}),K.success(`${s.length} surveys deactivated`),r([])}).catch(()=>{K.error("Some surveys failed to deactivate")})},_e=[{key:"title",title:"Survey",render:(_,P)=>{var re;return e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:P.title}),e.jsxs("div",{className:"text-sm text-gray-500",children:[(re=P.description)==null?void 0:re.substring(0,50),"..."]})]})}},{key:"type",title:"Type",render:(_,P)=>k(P.type)},{key:"status",title:"Status",render:(_,P)=>T(P.status)},{key:"response_count",title:"Responses",render:(_,P)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium text-gray-900",children:P.response_count||0}),e.jsx("div",{className:"text-xs text-gray-500",children:P.target_responses?`/ ${P.target_responses}`:""})]})},{key:"response_rate",title:"Response Rate",render:(_,P)=>e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-medium text-gray-900",children:[P.response_rate||0,"%"]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 mt-1",children:e.jsx("div",{className:"bg-blue-600 h-1.5 rounded-full",style:{width:`${Math.min(P.response_rate||0,100)}%`}})})]})},{key:"created_at",title:"Created",render:(_,P)=>e.jsx("div",{className:"text-sm text-gray-900",children:H(P.created_at)})},{key:"actions",title:"Actions",render:(_,P)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>D(P.id),className:"text-blue-600 hover:text-blue-900",title:"View Details",children:e.jsx(ns,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>window.open(`/surveys/${P.id}/results`,"_blank"),className:"text-green-600 hover:text-green-900",title:"View Results",children:e.jsx(ye,{className:"w-4 h-4"})}),P.status==="draft"||P.status==="paused"?e.jsx("button",{onClick:()=>R(P.id),className:"text-green-600 hover:text-green-900",title:"Activate",disabled:A.isPending,children:e.jsx(vn,{className:"w-4 h-4"})}):P.status==="active"?e.jsx("button",{onClick:()=>se(P.id),className:"text-yellow-600 hover:text-yellow-900",title:"Pause",disabled:w.isPending,children:e.jsx(Ua,{className:"w-4 h-4"})}):null,e.jsx("button",{onClick:()=>Z(P.id),className:"text-purple-600 hover:text-purple-900",title:"Duplicate",disabled:j.isPending,children:e.jsx(Nn,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>window.open(`/surveys/${P.id}/edit`,"_blank"),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:e.jsx(ot,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>q(P.id),className:"text-red-600 hover:text-red-900",title:"Delete",disabled:b.isPending,children:e.jsx(mt,{className:"w-4 h-4"})})]})}];return $?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Pe,{size:"lg"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Survey Management"}),e.jsx("p",{className:"text-gray-600",children:"Create, manage, and analyze customer surveys"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>c(!l),className:"btn-outline flex items-center space-x-2",children:[e.jsx(xt,{className:"w-4 h-4"}),e.jsx("span",{children:"Filters"})]}),e.jsxs("button",{onClick:F,className:"btn-outline flex items-center space-x-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsx("span",{children:"Export"})]}),e.jsxs("button",{onClick:()=>window.open("/surveys/create","_blank"),className:"btn-primary flex items-center space-x-2",children:[e.jsx(zs,{className:"w-4 h-4"}),e.jsx("span",{children:"Create Survey"})]})]})]}),h&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-blue-100",children:e.jsx(dt,{className:"h-6 w-6 text-blue-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Surveys"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:h.total_surveys})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-green-100",children:e.jsx(Fe,{className:"h-6 w-6 text-green-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Active Surveys"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:h.active_surveys})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-purple-100",children:e.jsx(Be,{className:"h-6 w-6 text-purple-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Responses"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:J(h.total_responses)})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-yellow-100",children:e.jsx(ye,{className:"h-6 w-6 text-yellow-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Avg. Response Rate"}),e.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:[h.average_response_rate,"%"]})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-orange-100",children:e.jsx(Bs,{className:"h-6 w-6 text-orange-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"This Month"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:h.surveys_this_month})]})]})})]}),l&&e.jsx("div",{className:"card",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(ws,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search surveys...",className:"input pl-10",value:t.search||"",onChange:_=>a({...t,search:_.target.value,page:1})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{className:"input",value:t.status||"",onChange:_=>a({...t,status:_.target.value||void 0,page:1}),children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"paused",children:"Paused"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"archived",children:"Archived"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),e.jsxs("select",{className:"input",value:t.type||"",onChange:_=>a({...t,type:_.target.value||void 0,page:1}),children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"customer_satisfaction",children:"Customer Satisfaction"}),e.jsx("option",{value:"product_feedback",children:"Product Feedback"}),e.jsx("option",{value:"market_research",children:"Market Research"}),e.jsx("option",{value:"employee_feedback",children:"Employee Feedback"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date Range"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"date",className:"input text-sm",value:t.start_date||"",onChange:_=>a({...t,start_date:_.target.value||void 0,page:1})}),e.jsx("input",{type:"date",className:"input text-sm",value:t.end_date||"",onChange:_=>a({...t,end_date:_.target.value||void 0,page:1})})]})]})]})}),e.jsx("div",{className:"card",children:e.jsx(ba,{data:S,columns:_e,title:"Surveys",searchable:!0,exportable:!0,pagination:!0,pageSize:t.limit})}),s.length>0&&e.jsx("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 bg-white rounded-lg shadow-lg border p-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[s.length," selected"]}),e.jsx("button",{onClick:ce,className:"btn-primary btn-sm",children:"Bulk Activate"}),e.jsx("button",{onClick:je,className:"btn-outline btn-sm",children:"Bulk Pause"}),e.jsx("button",{onClick:()=>r([]),className:"btn-outline btn-sm",children:"Clear Selection"})]})}),o&&d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Survey Details"}),e.jsx("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(ns,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Survey Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Title"}),e.jsx("p",{className:"text-gray-900",children:d.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Description"}),e.jsx("p",{className:"text-gray-900",children:d.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Type"}),e.jsx("div",{className:"mt-1",children:k(d.type)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Status"}),e.jsx("div",{className:"mt-1",children:T(d.status)})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance Metrics"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Response Count"}),e.jsx("p",{className:"text-gray-900",children:d.response_count||0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Target Responses"}),e.jsx("p",{className:"text-gray-900",children:d.target_responses||"No target set"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Response Rate"}),e.jsxs("p",{className:"text-gray-900",children:[d.response_rate||0,"%"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Created"}),e.jsx("p",{className:"text-gray-900",children:H(d.created_at)})]})]})]})]}),d.questions&&d.questions.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Questions (",d.questions.length,")"]}),e.jsxs("div",{className:"space-y-3",children:[d.questions.slice(0,5).map((_,P)=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["Q",P+1,": ",_.question_text]}),e.jsx("span",{className:"text-xs px-2 py-1 rounded bg-gray-100 text-gray-800",children:_.question_type})]}),_.options&&_.options.length>0&&e.jsxs("div",{className:"text-sm text-gray-600",children:["Options: ",_.options.map(re=>re.option_text).join(", ")]})]},_.id)),d.questions.length>5&&e.jsxs("p",{className:"text-sm text-gray-500 text-center",children:["... and ",d.questions.length-5," more questions"]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>window.open(`/surveys/${d.id}/results`,"_blank"),className:"btn-primary",children:"View Results"}),e.jsx("button",{onClick:()=>window.open(`/surveys/${d.id}/edit`,"_blank"),className:"btn-outline",children:"Edit Survey"}),e.jsx("button",{onClick:()=>g(!1),className:"btn-outline",children:"Close"})]})]})})]})}class am extends ut{constructor(){super(...arguments);Xe(this,"baseUrl","/inventory")}async getInventory(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}?${r.toString()}`)).data}async getInventoryItem(s,r){const n=r?`${this.baseUrl}/${s}?location_id=${r}`:`${this.baseUrl}/${s}`;return(await this.get(n)).data}async updateInventoryItem(s,r){return(await this.put(`${this.baseUrl}/${s}`,r)).data}async getStockMovements(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}/movements?${r.toString()}`)).data}async createStockMovement(s){return(await this.post(`${this.baseUrl}/movements`,s)).data}async adjustStock(s,r){return(await this.post(`${this.baseUrl}/adjustments`,{...r,product_id:s})).data}async getStockAdjustments(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}/adjustments?${r.toString()}`)).data}async createStockTransfer(s){return(await this.post(`${this.baseUrl}/transfers`,s)).data}async getStockTransfers(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}/transfers?${r.toString()}`)).data}async approveStockTransfer(s){return(await this.post(`${this.baseUrl}/transfers/${s}/approve`)).data}async completeStockTransfer(s,r){return(await this.post(`${this.baseUrl}/transfers/${s}/complete`,{items:r})).data}async cancelStockTransfer(s,r){return(await this.post(`${this.baseUrl}/transfers/${s}/cancel`,{reason:r})).data}async getLowStockItems(){return(await this.get(`${this.baseUrl}/low-stock`)).data}async getOutOfStockItems(){return(await this.get(`${this.baseUrl}/out-of-stock`)).data}async createStockCount(s){return(await this.post(`${this.baseUrl}/stock-counts`,s)).data}async getStockCounts(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}/stock-counts?${r.toString()}`)).data}async startStockCount(s){return(await this.post(`${this.baseUrl}/stock-counts/${s}/start`)).data}async updateStockCount(s,r){return(await this.put(`${this.baseUrl}/stock-counts/${s}`,{items:r})).data}async completeStockCount(s){return(await this.post(`${this.baseUrl}/stock-counts/${s}/complete`)).data}async exportInventoryReport(s="csv",r={}){const n=new URLSearchParams;Object.entries(r).forEach(([u,o])=>{o!=null&&o!==""&&n.append(u,String(o))}),n.append("format",s);const i=await this.get(`${this.baseUrl}/export?${n.toString()}`,{responseType:"blob"}),l=new Blob([i.data]),c=window.URL.createObjectURL(l),d=document.createElement("a");d.href=c,d.download=`inventory-report-${Date.now()}.${s}`,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(c)}async importInventoryData(s){const r=new FormData;return r.append("file",s),(await this.post(`${this.baseUrl}/import`,r,{headers:{"Content-Type":"multipart/form-data"}})).data}async getInventoryValuation(){return(await this.get(`${this.baseUrl}/valuation`)).data}async getStockMovementHistory(s,r=30){return(await this.get(`${this.baseUrl}/${s}/movements?days=${r}`)).data}async getInventoryTrends(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}/trends?${r.toString()}`)).data}async getStockAlerts(){return(await this.get(`${this.baseUrl}/alerts`)).data}async getInventoryReports(s,r={}){const n=new URLSearchParams;return Object.entries(r).forEach(([l,c])=>{c!=null&&c!==""&&n.append(l,String(c))}),n.append("type",s),(await this.get(`${this.baseUrl}/reports?${n.toString()}`)).data}async getStockLevels(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}/stock-levels?${r.toString()}`)).data}async getInventoryMetrics(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}/metrics?${r.toString()}`)).data}async getInventoryItems(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}/items?${r.toString()}`)).data}async getLocations(){return(await this.get(`${this.baseUrl}/locations`)).data}async deleteInventoryItem(s){return(await this.delete(`${this.baseUrl}/items/${s}`)).data}async bulkUpdateItems(s,r){return(await this.put(`${this.baseUrl}/items/bulk`,{ids:s,updates:r})).data}async importInventoryItems(s){return this.importInventoryData(s)}async getInventoryStats(s){const r=new URLSearchParams;return s!=null&&s.start_date&&r.append("start_date",s.start_date),s!=null&&s.end_date&&r.append("end_date",s.end_date),(await this.get(`${this.baseUrl}/stats?${r.toString()}`)).data}async getInventoryAnalytics(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}/analytics?${r.toString()}`)).data}}const Ye=new am,Hi=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4"];function Zi(){var m,x,$,N,p,h,S,A,w,b;const[t,a]=y.useState({start_date:new Date(Date.now()-2592e6).toISOString().split("T")[0],end_date:new Date().toISOString().split("T")[0]}),{data:s,isLoading:r,refetch:n}=de({queryKey:["inventory-dashboard-stats",t],queryFn:()=>Ye.getInventoryStats(t),staleTime:1e3*60*5}),{data:i,isLoading:l}=de({queryKey:["inventory-analytics",t],queryFn:()=>Ye.getInventoryAnalytics(t),staleTime:1e3*60*5}),{data:c,isLoading:d}=de({queryKey:["inventory-trends",t],queryFn:()=>Ye.getInventoryTrends(),staleTime:1e3*60*5}),u=r||l||d,o=()=>{n()},g=()=>{Ye.exportInventoryReport("excel",{})};return u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Pe,{size:"lg"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Inventory Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Real-time inventory tracking and stock management"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"date",value:t.start_date,onChange:j=>a({...t,start_date:j.target.value}),className:"input text-sm"}),e.jsx("input",{type:"date",value:t.end_date,onChange:j=>a({...t,end_date:j.target.value}),className:"input text-sm"})]}),e.jsxs("button",{onClick:o,className:"btn-outline flex items-center space-x-2",children:[e.jsx(_s,{className:"w-4 h-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{onClick:g,className:"btn-primary flex items-center space-x-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsx("span",{children:"Export Report"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-blue-100",children:e.jsx(Ce,{className:"h-6 w-6 text-blue-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Products"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:J((s==null?void 0:s.total_products)||0)}),e.jsxs("div",{className:"flex items-center text-sm",children:[(s==null?void 0:s.products_growth)>=0?e.jsx(oe,{className:"w-4 h-4 text-green-500 mr-1"}):e.jsx(He,{className:"w-4 h-4 text-red-500 mr-1"}),e.jsxs("span",{className:(s==null?void 0:s.products_growth)>=0?"text-green-600":"text-red-600",children:[Math.abs((s==null?void 0:s.products_growth)||0),"%"]}),e.jsx("span",{className:"text-gray-500 ml-1",children:"vs last period"})]})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-green-100",children:e.jsx($e,{className:"h-6 w-6 text-green-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Stock Value"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:G((s==null?void 0:s.total_stock_value)||0)}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Avg. per product: ",G(((s==null?void 0:s.total_stock_value)||0)/((s==null?void 0:s.total_products)||1))]})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-red-100",children:e.jsx(we,{className:"h-6 w-6 text-red-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Low Stock Items"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:J((s==null?void 0:s.low_stock_items)||0)}),e.jsxs("div",{className:"flex items-center text-sm",children:[(s==null?void 0:s.low_stock_change)<=0?e.jsx(He,{className:"w-4 h-4 text-green-500 mr-1"}):e.jsx(oe,{className:"w-4 h-4 text-red-500 mr-1"}),e.jsxs("span",{className:(s==null?void 0:s.low_stock_change)<=0?"text-green-600":"text-red-600",children:[Math.abs((s==null?void 0:s.low_stock_change)||0),"%"]})]})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-purple-100",children:e.jsx(bs,{className:"h-6 w-6 text-purple-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Stock Turnover"}),e.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:[(s==null?void 0:s.stock_turnover_ratio)||0,"x"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[(s==null?void 0:s.turnover_trend)>0?"":(s==null?void 0:s.turnover_trend)<0?"":""," ",Math.abs((s==null?void 0:s.turnover_trend)||0).toFixed(1)," vs last period"]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Stock Movement Trends"}),e.jsx(ye,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"h-80",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(Ps,{data:(c==null?void 0:c.daily_movements)||[],children:[e.jsx(ue,{strokeDasharray:"3 3"}),e.jsx(pe,{dataKey:"date",tickFormatter:j=>H(j,"MMM dd")}),e.jsx(xe,{}),e.jsx(le,{labelFormatter:j=>H(j),formatter:(j,T)=>[j,T==="inbound"?"Stock In":"Stock Out"]}),e.jsx(fs,{type:"monotone",dataKey:"inbound",stackId:"1",stroke:"#10B981",fill:"#10B981",fillOpacity:.6}),e.jsx(fs,{type:"monotone",dataKey:"outbound",stackId:"1",stroke:"#EF4444",fill:"#EF4444",fillOpacity:.6})]})})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Stock by Category"}),e.jsx(ea,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"h-80",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(Rs,{children:[e.jsx(Es,{data:(i==null?void 0:i.category_distribution)||[],cx:"50%",cy:"50%",labelLine:!1,label:({name:j,percent:T})=>`${j} ${(T*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:((i==null?void 0:i.category_distribution)||[]).map((j,T)=>e.jsx(Ts,{fill:Hi[T%Hi.length]},`cell-${T}`))}),e.jsx(le,{formatter:j=>[G(j),"Stock Value"]})]})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Top Moving Products"}),e.jsx(lt,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"h-80",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(ds,{data:(i==null?void 0:i.top_moving_products)||[],layout:"horizontal",children:[e.jsx(ue,{strokeDasharray:"3 3"}),e.jsx(pe,{type:"number"}),e.jsx(xe,{dataKey:"product_name",type:"category",width:100}),e.jsx(le,{formatter:j=>[j,"Units Moved"]}),e.jsx(os,{dataKey:"units_moved",fill:"#3B82F6"})]})})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Stock Levels by Location"}),e.jsx(Ce,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"h-80",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(ds,{data:(i==null?void 0:i.stock_by_location)||[],children:[e.jsx(ue,{strokeDasharray:"3 3"}),e.jsx(pe,{dataKey:"location"}),e.jsx(xe,{}),e.jsx(le,{formatter:j=>[G(j),"Stock Value"]}),e.jsx(os,{dataKey:"stock_value",fill:"#8B5CF6"})]})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Stock Alerts"}),e.jsx(we,{className:"w-5 h-5 text-red-500"})]}),e.jsx("div",{className:"space-y-3",children:((i==null?void 0:i.stock_alerts)||[]).slice(0,5).map(j=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(we,{className:"w-5 h-5 text-red-500 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-900",children:j.product_name}),e.jsx("p",{className:"text-sm text-red-700",children:j.location})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium text-red-900",children:j.current_stock}),e.jsxs("p",{className:"text-sm text-red-600",children:["Min: ",j.minimum_stock]})]})]},j.id))})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Movements"}),e.jsx(bs,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"space-y-3",children:((i==null?void 0:i.recent_movements)||[]).slice(0,5).map(j=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-3 h-3 rounded-full mr-3 ${j.movement_type==="inbound"?"bg-green-500":"bg-red-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:j.product_name}),e.jsx("p",{className:"text-sm text-gray-500",children:j.location})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`font-medium ${j.movement_type==="inbound"?"text-green-600":"text-red-600"}`,children:[j.movement_type==="inbound"?"+":"-",j.quantity]}),e.jsx("p",{className:"text-sm text-gray-500",children:H(j.movement_date)})]})]},j.id))})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Performance Metrics"}),e.jsx(ye,{className:"w-5 h-5 text-gray-400"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Stockout Rate"}),e.jsx(we,{className:"w-4 h-4 text-red-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Current Period"}),e.jsxs("span",{className:"font-medium",children:[((m=i==null?void 0:i.performance)==null?void 0:m.stockout_rate)||0,"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Target"}),e.jsxs("span",{className:"font-medium",children:["<"," 5%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${(((x=i==null?void 0:i.performance)==null?void 0:x.stockout_rate)||0)<5?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(((($=i==null?void 0:i.performance)==null?void 0:$.stockout_rate)||0)*2,100)}%`}})})]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Fill Rate"}),e.jsx(Fe,{className:"w-4 h-4 text-green-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Current Period"}),e.jsxs("span",{className:"font-medium",children:[((N=i==null?void 0:i.performance)==null?void 0:N.fill_rate)||0,"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Target"}),e.jsxs("span",{className:"font-medium",children:[">"," 95%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${((p=i==null?void 0:i.performance)==null?void 0:p.fill_rate)||0}%`}})})]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Inventory Accuracy"}),e.jsx(Fe,{className:"w-4 h-4 text-blue-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Current Period"}),e.jsxs("span",{className:"font-medium",children:[((h=i==null?void 0:i.performance)==null?void 0:h.inventory_accuracy)||0,"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Target"}),e.jsxs("span",{className:"font-medium",children:[">"," 98%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${((S=i==null?void 0:i.performance)==null?void 0:S.inventory_accuracy)||0}%`}})})]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Carrying Cost"}),e.jsx($e,{className:"w-4 h-4 text-purple-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Current Period"}),e.jsxs("span",{className:"font-medium",children:[((A=i==null?void 0:i.performance)==null?void 0:A.carrying_cost_rate)||0,"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Target"}),e.jsxs("span",{className:"font-medium",children:["<"," 25%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${(((w=i==null?void 0:i.performance)==null?void 0:w.carrying_cost_rate)||0)<25?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min((((b=i==null?void 0:i.performance)==null?void 0:b.carrying_cost_rate)||0)*4,100)}%`}})})]})]})]})]})]})}function rm(){const[t,a]=y.useState({page:1,limit:20,sort_by:"updated_at",sort_order:"desc"}),[s,r]=y.useState([]),[n,i]=y.useState(!1),[l,c]=y.useState(!1),[d,u]=y.useState(null),[o,g]=y.useState(!1),[m,x]=y.useState(!1),[$,N]=y.useState({type:"add",quantity:0,reason:""}),p=Pt(),{data:h,isLoading:S,error:A,refetch:w}=de({queryKey:["inventory-items",t],queryFn:()=>Ye.getInventoryItems(t),staleTime:1e3*60*5}),{data:b}=de({queryKey:["inventory-stats"],queryFn:()=>Ye.getInventoryStats(),staleTime:1e3*60*10}),{data:j}=de({queryKey:["inventory-locations"],queryFn:()=>Ye.getLocations(),staleTime:1e3*60*30}),T=(h==null?void 0:h.items)||[];h!=null&&h.pagination;const k=Ge({mutationFn:({id:I,adjustment:W})=>Ye.adjustStock(I,W),onSuccess:()=>{p.invalidateQueries({queryKey:["inventory-items"]}),p.invalidateQueries({queryKey:["inventory-stats"]}),K.success("Stock adjusted successfully"),x(!1),N({type:"add",quantity:0,reason:""})},onError:I=>{K.error(I.message||"Failed to adjust stock")}}),D=Ge({mutationFn:I=>Ye.deleteInventoryItem(I),onSuccess:()=>{p.invalidateQueries({queryKey:["inventory-items"]}),p.invalidateQueries({queryKey:["inventory-stats"]}),K.success("Item deleted successfully")},onError:I=>{K.error(I.message||"Failed to delete item")}}),R=Ge({mutationFn:({ids:I,updates:W})=>Ye.bulkUpdateItems(I,W),onSuccess:()=>{p.invalidateQueries({queryKey:["inventory-items"]}),K.success("Items updated successfully"),r([])},onError:I=>{K.error(I.message||"Failed to update items")}}),se=I=>{const W=I.current_stock||0,Je=I.minimum_stock||0,ms=I.maximum_stock||0;return W===0?e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(we,{className:"w-3 h-3 mr-1"}),"OUT OF STOCK"]}):W<=Je?e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(we,{className:"w-3 h-3 mr-1"}),"LOW STOCK"]}):ms&&W>=ms?e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"OVERSTOCK"}):e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"IN STOCK"})},q=I=>{const W=I.current_stock||0,Je=I.minimum_stock||0,ms=W-Je;return ms>Je*.5?e.jsx(oe,{className:"w-4 h-4 text-green-500"}):ms<0?e.jsx(He,{className:"w-4 h-4 text-red-500"}):e.jsx("div",{className:"w-4 h-4"})},Z=async I=>{try{const W=await Ye.getInventoryItem(I);u(W),g(!0)}catch{K.error("Failed to load item details")}},F=I=>{u(I),x(!0)},ce=I=>{window.confirm("Are you sure you want to delete this inventory item?")&&D.mutate(I)},je=()=>{Ye.exportInventoryReport("excel",t),K.success("Export started - file will download shortly")},_e=()=>{const I=document.createElement("input");I.type="file",I.accept=".csv,.xlsx",I.onchange=async W=>{var ms;const Je=(ms=W.target.files)==null?void 0:ms[0];if(Je)try{await Ye.importInventoryItems(Je),p.invalidateQueries({queryKey:["inventory-items"]}),K.success("Import completed successfully")}catch{K.error("Import failed")}},I.click()},_=()=>{if(s.length===0)return;const I=prompt("Enter stock adjustment (+/- quantity):");if(!I)return;const W=parseInt(I),Je=prompt("Reason for adjustment:")||"Bulk adjustment";R.mutate({ids:s,updates:{stock_adjustment:{quantity:W,reason:Je}}})},P=()=>{if(s.length===0)return;const I=prompt("Enter new location ID:");I&&R.mutate({ids:s,updates:{location_id:I}})},re=[{key:"product_name",title:"Product",render:(I,W)=>e.jsxs("div",{className:"flex items-center",children:[W.product_image&&e.jsx("img",{src:W.product_image,alt:W.product_name,className:"w-10 h-10 rounded-lg object-cover mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:W.product_name}),e.jsx("div",{className:"text-sm text-gray-500",children:W.product_code})]})]})},{key:"location_name",title:"Location",render:(I,W)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ke,{className:"w-4 h-4 text-gray-400 mr-1"}),e.jsx("span",{className:"text-sm text-gray-900",children:W.location_name||"N/A"})]})},{key:"current_stock",title:"Current Stock",render:(I,W)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium text-gray-900",children:J(W.current_stock||0)}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Min: ",W.minimum_stock||0," | Max: ",W.maximum_stock||"N/A"]})]})},{key:"stock_status",title:"Status",render:(I,W)=>se(W)},{key:"stock_value",title:"Value",render:(I,W)=>e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-medium text-gray-900",children:G((W.current_stock||0)*(W.unit_cost||0))}),e.jsxs("div",{className:"text-xs text-gray-500",children:["@ ",G(W.unit_cost||0),"/unit"]})]})},{key:"movement_trend",title:"Trend",render:(I,W)=>e.jsx("div",{className:"flex items-center justify-center",children:q(W)})},{key:"updated_at",title:"Last Updated",render:(I,W)=>e.jsx("div",{className:"text-sm text-gray-900",children:H(W.updated_at)})},{key:"actions",title:"Actions",render:(I,W)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Z(W.id),className:"text-blue-600 hover:text-blue-900",title:"View Details",children:e.jsx(ns,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>F(W),className:"text-green-600 hover:text-green-900",title:"Adjust Stock",children:e.jsx(Ce,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>window.open(`/inventory/${W.id}/movements`,"_blank"),className:"text-purple-600 hover:text-purple-900",title:"View Movements",children:e.jsx(ye,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>window.open(`/inventory/${W.id}/edit`,"_blank"),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:e.jsx(ot,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>ce(W.id),className:"text-red-600 hover:text-red-900",title:"Delete",disabled:D.isPending,children:e.jsx(mt,{className:"w-4 h-4"})})]})}];return S?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Pe,{size:"lg"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Inventory Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage stock levels, locations, and inventory movements"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>c(!l),className:"btn-outline flex items-center space-x-2",children:[e.jsx(xt,{className:"w-4 h-4"}),e.jsx("span",{children:"Filters"})]}),e.jsxs("button",{onClick:_e,className:"btn-outline flex items-center space-x-2",children:[e.jsx(bn,{className:"w-4 h-4"}),e.jsx("span",{children:"Import"})]}),e.jsxs("button",{onClick:je,className:"btn-outline flex items-center space-x-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsx("span",{children:"Export"})]}),e.jsxs("button",{onClick:()=>window.open("/inventory/create","_blank"),className:"btn-primary flex items-center space-x-2",children:[e.jsx(zs,{className:"w-4 h-4"}),e.jsx("span",{children:"Add Item"})]})]})]}),b&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-blue-100",children:e.jsx(Ce,{className:"h-6 w-6 text-blue-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Items"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:J(b.total_items)})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-green-100",children:e.jsx($e,{className:"h-6 w-6 text-green-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Value"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:G(b.total_value)})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-red-100",children:e.jsx(we,{className:"h-6 w-6 text-red-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Low Stock"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:J(b.low_stock_items)})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-yellow-100",children:e.jsx(Sl,{className:"h-6 w-6 text-yellow-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Out of Stock"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:J(b.out_of_stock_items)})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-purple-100",children:e.jsx(Ke,{className:"h-6 w-6 text-purple-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Locations"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:J(b.total_locations)})]})]})})]}),l&&e.jsx("div",{className:"card",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(ws,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search products...",className:"input pl-10",value:t.search||"",onChange:I=>a({...t,search:I.target.value,page:1})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),e.jsxs("select",{className:"input",value:t.location_id||"",onChange:I=>a({...t,location_id:I.target.value||void 0,page:1}),children:[e.jsx("option",{value:"",children:"All Locations"}),(j||[]).map(I=>e.jsx("option",{value:I.id,children:I.name},I.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock Status"}),e.jsxs("select",{className:"input",value:t.stock_status||"",onChange:I=>a({...t,stock_status:I.target.value||void 0,page:1}),children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"in_stock",children:"In Stock"}),e.jsx("option",{value:"low_stock",children:"Low Stock"}),e.jsx("option",{value:"out_of_stock",children:"Out of Stock"}),e.jsx("option",{value:"overstock",children:"Overstock"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsxs("select",{className:"input",value:t.category||"",onChange:I=>a({...t,category:I.target.value||void 0,page:1}),children:[e.jsx("option",{value:"",children:"All Categories"}),e.jsx("option",{value:"beverages",children:"Beverages"}),e.jsx("option",{value:"snacks",children:"Snacks"}),e.jsx("option",{value:"dairy",children:"Dairy"}),e.jsx("option",{value:"frozen",children:"Frozen"}),e.jsx("option",{value:"household",children:"Household"})]})]})]})}),e.jsx("div",{className:"card",children:e.jsx(ba,{data:T,columns:re,title:"Inventory Items",searchable:!0,exportable:!0,pagination:!0,pageSize:t.limit||20})}),s.length>0&&e.jsx("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 bg-white rounded-lg shadow-lg border p-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[s.length," selected"]}),e.jsx("button",{onClick:_,className:"btn-primary btn-sm",children:"Adjust Stock"}),e.jsx("button",{onClick:P,className:"btn-outline btn-sm",children:"Update Location"}),e.jsx("button",{onClick:()=>r([]),className:"btn-outline btn-sm",children:"Clear Selection"})]})}),m&&d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Adjust Stock"}),e.jsx("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-600",children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:d.product_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Current stock: ",d.current_stock]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Adjustment Type"}),e.jsxs("select",{className:"input",value:$.type,onChange:I=>N({...$,type:I.target.value}),children:[e.jsx("option",{value:"add",children:"Add Stock"}),e.jsx("option",{value:"remove",children:"Remove Stock"}),e.jsx("option",{value:"set",children:"Set Stock Level"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),e.jsx("input",{type:"number",className:"input",value:$.quantity,onChange:I=>N({...$,quantity:parseInt(I.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason"}),e.jsx("textarea",{className:"input",rows:3,value:$.reason,onChange:I=>N({...$,reason:I.target.value}),placeholder:"Reason for stock adjustment..."})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>x(!1),className:"btn-outline",children:"Cancel"}),e.jsx("button",{onClick:()=>k.mutate({id:d.id,adjustment:$}),className:"btn-primary",disabled:k.isPending,children:k.isPending?"Adjusting...":"Adjust Stock"})]})]})}),o&&d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Inventory Item Details"}),e.jsx("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600",children:""})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Product Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Product Name"}),e.jsx("p",{className:"text-gray-900",children:d.product_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Product Code"}),e.jsx("p",{className:"text-gray-900",children:d.product_code})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Location"}),e.jsx("p",{className:"text-gray-900",children:d.warehouse_name||d.van_code||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Status"}),e.jsx("div",{className:"mt-1",children:se(d)})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Stock Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Current Stock"}),e.jsx("p",{className:"text-gray-900",children:J(d.current_stock||0)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Minimum Stock"}),e.jsx("p",{className:"text-gray-900",children:J(d.minimum_stock||0)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Maximum Stock"}),e.jsx("p",{className:"text-gray-900",children:J(d.maximum_stock||0)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Unit Cost"}),e.jsx("p",{className:"text-gray-900",children:G(d.unit_cost||0)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Total Value"}),e.jsx("p",{className:"text-gray-900",children:G((d.current_stock||0)*(d.unit_cost||0))})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>F(d),className:"btn-primary",children:"Adjust Stock"}),e.jsx("button",{onClick:()=>window.open(`/inventory/${d.id}/movements`,"_blank"),className:"btn-outline",children:"View Movements"}),e.jsx("button",{onClick:()=>g(!1),className:"btn-outline",children:"Close"})]})]})})]})}const Ji=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4"];function im(){var g,m,x,$,N,p,h,S,A,w,b,j,T,k,D,R,se,q,Z;const[t,a]=y.useState({start_date:new Date(Date.now()-2592e6).toISOString().split("T")[0],end_date:new Date().toISOString().split("T")[0],report_type:"summary"}),[s,r]=y.useState("summary"),{data:n,isLoading:i,refetch:l}=de({queryKey:["inventory-reports",t],queryFn:()=>Ye.getInventoryReports("all"),staleTime:1e3*60*5}),{data:c}=de({queryKey:["inventory-locations"],queryFn:()=>Ye.getLocations(),staleTime:1e3*60*10}),d=F=>{Ye.exportInventoryReport(F,t),K.success(`${F.toUpperCase()} report export started`)},u=()=>{window.print()},o=[{id:"summary",name:"Summary Report",icon:ye,description:"Overview of inventory metrics and KPIs"},{id:"detailed",name:"Detailed Report",icon:dt,description:"Comprehensive item-by-item analysis"},{id:"movements",name:"Movement Report",icon:bs,description:"Stock movement and transaction history"},{id:"valuation",name:"Valuation Report",icon:$e,description:"Inventory valuation and cost analysis"},{id:"performance",name:"Performance Report",icon:oe,description:"Turnover and performance metrics"}];return i?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Pe,{size:"lg"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Inventory Reports"}),e.jsx("p",{className:"text-gray-600",children:"Comprehensive inventory analysis and reporting"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:u,className:"btn-outline flex items-center space-x-2",children:[e.jsx(yn,{className:"w-4 h-4"}),e.jsx("span",{children:"Print"})]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsxs("button",{onClick:()=>d("excel"),className:"btn-outline flex items-center space-x-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsx("span",{children:"Excel"})]}),e.jsxs("button",{onClick:()=>d("csv"),className:"btn-outline flex items-center space-x-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsx("span",{children:"CSV"})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:o.map(F=>{const ce=F.icon;return e.jsxs("button",{onClick:()=>{r(F.id),a({...t,report_type:F.id})},className:`p-4 rounded-lg border-2 text-left transition-all ${s===F.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(ce,{className:`w-5 h-5 mr-2 ${s===F.id?"text-blue-600":"text-gray-400"}`}),e.jsx("h3",{className:`font-medium ${s===F.id?"text-blue-900":"text-gray-900"}`,children:F.name})]}),e.jsx("p",{className:"text-sm text-gray-600",children:F.description})]},F.id)})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",value:t.start_date,onChange:F=>a({...t,start_date:F.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",value:t.end_date,onChange:F=>a({...t,end_date:F.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),e.jsxs("select",{value:t.location_id||"",onChange:F=>a({...t,location_id:F.target.value||void 0}),className:"input",children:[e.jsx("option",{value:"",children:"All Locations"}),(c||[]).map(F=>e.jsx("option",{value:F.id,children:F.name},F.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsxs("select",{value:t.category||"",onChange:F=>a({...t,category:F.target.value||void 0}),className:"input",children:[e.jsx("option",{value:"",children:"All Categories"}),e.jsx("option",{value:"beverages",children:"Beverages"}),e.jsx("option",{value:"snacks",children:"Snacks"}),e.jsx("option",{value:"dairy",children:"Dairy"}),e.jsx("option",{value:"frozen",children:"Frozen"}),e.jsx("option",{value:"household",children:"Household"})]})]})]})}),s==="summary"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-blue-100",children:e.jsx(Ce,{className:"h-6 w-6 text-blue-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Items"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:J(((g=n==null?void 0:n.summary)==null?void 0:g.total_items)||0)})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-green-100",children:e.jsx($e,{className:"h-6 w-6 text-green-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Value"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:G(((m=n==null?void 0:n.summary)==null?void 0:m.total_value)||0)})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-red-100",children:e.jsx(we,{className:"h-6 w-6 text-red-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Low Stock Items"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:J(((x=n==null?void 0:n.summary)==null?void 0:x.low_stock_items)||0)})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-purple-100",children:e.jsx(bs,{className:"h-6 w-6 text-purple-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Turnover Rate"}),e.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:[(($=n==null?void 0:n.summary)==null?void 0:$.turnover_rate)||0,"x"]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Stock Value by Category"}),e.jsx("div",{className:"h-80",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(Rs,{children:[e.jsx(Es,{data:((N=n==null?void 0:n.charts)==null?void 0:N.category_distribution)||[],cx:"50%",cy:"50%",labelLine:!1,label:({name:F,percent:ce})=>`${F} ${(ce*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:(((p=n==null?void 0:n.charts)==null?void 0:p.category_distribution)||[]).map((F,ce)=>e.jsx(Ts,{fill:Ji[ce%Ji.length]},`cell-${ce}`))}),e.jsx(le,{formatter:F=>[G(F),"Value"]})]})})})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Stock Levels by Location"}),e.jsx("div",{className:"h-80",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(ds,{data:((h=n==null?void 0:n.charts)==null?void 0:h.location_distribution)||[],children:[e.jsx(ue,{strokeDasharray:"3 3"}),e.jsx(pe,{dataKey:"location"}),e.jsx(xe,{}),e.jsx(le,{formatter:F=>[G(F),"Stock Value"]}),e.jsx(os,{dataKey:"value",fill:"#3B82F6"})]})})})]})]})]}),s==="detailed"&&e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Detailed Inventory Items"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Stock"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Min/Max Stock"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Cost"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Value"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(((S=n==null?void 0:n.detailed)==null?void 0:S.items)||[]).map(F=>{var ce;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:F.product_name}),e.jsx("div",{className:"text-sm text-gray-500",children:F.product_code})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:F.location_name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:J(F.current_stock)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[F.minimum_stock," / ",F.maximum_stock||"N/A"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:G(F.unit_cost)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:G(F.current_stock*F.unit_cost)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${F.stock_status==="in_stock"?"bg-green-100 text-green-800":F.stock_status==="low_stock"?"bg-yellow-100 text-yellow-800":F.stock_status==="out_of_stock"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:(ce=F.stock_status)==null?void 0:ce.replace("_"," ").toUpperCase()})})]},F.id)})})]})})]}),s==="movements"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Stock Movement Trends"}),e.jsx("div",{className:"h-80",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(Ps,{data:((A=n==null?void 0:n.movements)==null?void 0:A.daily_movements)||[],children:[e.jsx(ue,{strokeDasharray:"3 3"}),e.jsx(pe,{dataKey:"date",tickFormatter:F=>H(F,{format:"short"})}),e.jsx(xe,{}),e.jsx(le,{labelFormatter:F=>H(F),formatter:(F,ce)=>[F,ce==="inbound"?"Stock In":"Stock Out"]}),e.jsx(fs,{type:"monotone",dataKey:"inbound",stackId:"1",stroke:"#10B981",fill:"#10B981",fillOpacity:.6}),e.jsx(fs,{type:"monotone",dataKey:"outbound",stackId:"1",stroke:"#EF4444",fill:"#EF4444",fillOpacity:.6})]})})})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Stock Movements"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reason"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(((w=n==null?void 0:n.movements)==null?void 0:w.recent_movements)||[]).map(F=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:H(F.movement_date)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:F.product_name}),e.jsx("div",{className:"text-sm text-gray-500",children:F.product_code})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${F.movement_type==="inbound"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:F.movement_type.toUpperCase()})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[F.movement_type==="inbound"?"+":"-",J(F.quantity)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:F.location_name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:F.reason})]},F.id))})]})})]})]}),s==="valuation"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:G(((b=n==null?void 0:n.valuation)==null?void 0:b.total_inventory_value)||0)}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total Inventory Value"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:G(((j=n==null?void 0:n.valuation)==null?void 0:j.average_unit_cost)||0)}),e.jsx("div",{className:"text-sm text-gray-500",children:"Average Unit Cost"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-600",children:((T=n==null?void 0:n.valuation)==null?void 0:T.cost_method)||"FIFO"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Valuation Method"})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Valuation by Category"}),e.jsx("div",{className:"h-80",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(ds,{data:((k=n==null?void 0:n.valuation)==null?void 0:k.category_values)||[],children:[e.jsx(ue,{strokeDasharray:"3 3"}),e.jsx(pe,{dataKey:"category"}),e.jsx(xe,{tickFormatter:F=>G(F,{compact:!0})}),e.jsx(le,{formatter:F=>[G(F),"Value"]}),e.jsx(os,{dataKey:"value",fill:"#8B5CF6"})]})})})]})]}),s==="performance"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-green-600",children:[((D=n==null?void 0:n.performance)==null?void 0:D.inventory_turnover)||0,"x"]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Inventory Turnover"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:((R=n==null?void 0:n.performance)==null?void 0:R.days_sales_inventory)||0}),e.jsx("div",{className:"text-sm text-gray-500",children:"Days Sales in Inventory"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-yellow-600",children:[((se=n==null?void 0:n.performance)==null?void 0:se.stockout_rate)||0,"%"]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Stockout Rate"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-purple-600",children:[((q=n==null?void 0:n.performance)==null?void 0:q.fill_rate)||0,"%"]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Fill Rate"})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Performing Products"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Turnover Rate"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Units Sold"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Revenue"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Avg. Stock Level"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(((Z=n==null?void 0:n.performance)==null?void 0:Z.top_products)||[]).map(F=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:F.product_name}),e.jsx("div",{className:"text-sm text-gray-500",children:F.product_code})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[F.turnover_rate,"x"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:J(F.units_sold)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:G(F.revenue)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:J(F.avg_stock_level)})]},F.product_id))})]})})]})]})]})}class nm extends ut{constructor(){super(...arguments);Xe(this,"baseUrl","/promotions")}async getPromotions(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}?${r.toString()}`)).data}async getPromotion(s){return(await this.get(`${this.baseUrl}/${s}`)).data}async createPromotion(s){return(await this.post(this.baseUrl,s)).data}async updatePromotion(s,r){return(await this.put(`${this.baseUrl}/${s}`,r)).data}async deletePromotion(s){return(await this.delete(`${this.baseUrl}/${s}`)).data}async activatePromotion(s){return(await this.post(`${this.baseUrl}/${s}/activate`)).data}async deactivatePromotion(s){return(await this.post(`${this.baseUrl}/${s}/deactivate`)).data}async pausePromotion(s){return(await this.post(`${this.baseUrl}/${s}/pause`)).data}async getPromotionStats(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}/stats?${r.toString()}`)).data}async getPromotionAnalytics(s,r={}){const n=new URLSearchParams;return Object.entries(r).forEach(([l,c])=>{c!=null&&c!==""&&n.append(l,String(c))}),(await this.get(`${this.baseUrl}/${s}/analytics?${n.toString()}`)).data}async getPromotionTrends(s={}){const r=new URLSearchParams;return Object.entries(s).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,String(l))}),(await this.get(`${this.baseUrl}/trends?${r.toString()}`)).data}async duplicatePromotion(s){return(await this.post(`${this.baseUrl}/${s}/duplicate`)).data}async bulkUpdatePromotions(s,r){return(await this.put(`${this.baseUrl}/bulk`,{ids:s,updates:r})).data}async bulkDeletePromotions(s){return(await this.delete(`${this.baseUrl}/bulk`,{data:{ids:s}})).data}async exportPromotions(s="excel",r={}){const n=new URLSearchParams;Object.entries(r).forEach(([u,o])=>{o!=null&&o!==""&&n.append(u,String(o))}),n.append("format",s);const i=await this.get(`${this.baseUrl}/export?${n.toString()}`,{responseType:"blob"}),l=new Blob([i.data]),c=window.URL.createObjectURL(l),d=document.createElement("a");d.href=c,d.download=`promotions-export-${Date.now()}.${s}`,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(c)}async importPromotions(s){const r=new FormData;return r.append("file",s),(await this.post(`${this.baseUrl}/import`,r,{headers:{"Content-Type":"multipart/form-data"}})).data}async validatePromotion(s){return(await this.post(`${this.baseUrl}/validate`,s)).data}async getPromotionTemplates(){return(await this.get(`${this.baseUrl}/templates`)).data}async createFromTemplate(s,r){return(await this.post(`${this.baseUrl}/templates/${s}/create`,r)).data}async exportPromotionReport(s="excel",r={}){const n=new URLSearchParams;n.append("format",s),Object.entries(r).forEach(([u,o])=>{o!=null&&o!==""&&n.append(u,String(o))});const i=await this.get(`${this.baseUrl}/export?${n.toString()}`,{responseType:"blob"}),l=new Blob([i.data]),c=window.URL.createObjectURL(l),d=document.createElement("a");return d.href=c,d.download=`promotions-report.${s}`,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(c),i.data}}const rs=new nm,Xi=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4"];function en(){var m,x,$,N,p;const[t,a]=y.useState({start_date:new Date(Date.now()-2592e6).toISOString().split("T")[0],end_date:new Date().toISOString().split("T")[0]}),{data:s,isLoading:r,refetch:n}=de({queryKey:["promotions-dashboard-stats",t],queryFn:()=>rs.getPromotionStats(t),staleTime:1e3*60*5}),{data:i,isLoading:l}=de({queryKey:["promotions-analytics",t],queryFn:()=>rs.getPromotionAnalytics("all"),staleTime:1e3*60*5}),{data:c,isLoading:d}=de({queryKey:["promotions-trends",t],queryFn:()=>rs.getPromotionTrends(t),staleTime:1e3*60*5}),u=r||l||d,o=()=>{n()},g=()=>{rs.exportPromotionReport("pdf",{...t,report_type:"dashboard"})};return u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Pe,{size:"lg"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Promotions Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Track promotion performance and customer engagement"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"date",value:t.start_date,onChange:h=>a({...t,start_date:h.target.value}),className:"input text-sm"}),e.jsx("input",{type:"date",value:t.end_date,onChange:h=>a({...t,end_date:h.target.value}),className:"input text-sm"})]}),e.jsxs("button",{onClick:o,className:"btn-outline flex items-center space-x-2",children:[e.jsx(_s,{className:"w-4 h-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{onClick:g,className:"btn-primary flex items-center space-x-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsx("span",{children:"Export Report"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-blue-100",children:e.jsx(Ta,{className:"h-6 w-6 text-blue-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Active Promotions"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:J((s==null?void 0:s.active_promotions)||0)}),e.jsxs("div",{className:"flex items-center text-sm",children:[(s==null?void 0:s.promotions_growth)>=0?e.jsx(oe,{className:"w-4 h-4 text-green-500 mr-1"}):e.jsx(He,{className:"w-4 h-4 text-red-500 mr-1"}),e.jsxs("span",{className:(s==null?void 0:s.promotions_growth)>=0?"text-green-600":"text-red-600",children:[Math.abs((s==null?void 0:s.promotions_growth)||0),"%"]}),e.jsx("span",{className:"text-gray-500 ml-1",children:"vs last period"})]})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-green-100",children:e.jsx($e,{className:"h-6 w-6 text-green-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Promotion Revenue"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:G((s==null?void 0:s.promotion_revenue)||0)}),e.jsxs("p",{className:"text-sm text-gray-500",children:[(((s==null?void 0:s.promotion_revenue)||0)/((s==null?void 0:s.total_revenue)||1)*100).toFixed(1),"% of total revenue"]})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-purple-100",children:e.jsx(Be,{className:"h-6 w-6 text-purple-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Customers Engaged"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:J((s==null?void 0:s.customers_engaged)||0)}),e.jsxs("div",{className:"flex items-center text-sm",children:[(s==null?void 0:s.engagement_growth)>=0?e.jsx(oe,{className:"w-4 h-4 text-green-500 mr-1"}):e.jsx(He,{className:"w-4 h-4 text-red-500 mr-1"}),e.jsxs("span",{className:(s==null?void 0:s.engagement_growth)>=0?"text-green-600":"text-red-600",children:[Math.abs((s==null?void 0:s.engagement_growth)||0),"%"]})]})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-yellow-100",children:e.jsx(cs,{className:"h-6 w-6 text-yellow-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Avg. Conversion Rate"}),e.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:[(s==null?void 0:s.average_conversion_rate)||0,"%"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[(s==null?void 0:s.conversion_trend)>0?"":(s==null?void 0:s.conversion_trend)<0?"":""," ",Math.abs((s==null?void 0:s.conversion_trend)||0).toFixed(1)," vs last period"]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Promotion Performance"}),e.jsx(ye,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"h-80",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(Ps,{data:(c==null?void 0:c.daily_performance)||[],children:[e.jsx(ue,{strokeDasharray:"3 3"}),e.jsx(pe,{dataKey:"date",tickFormatter:h=>H(h,{format:"short"})}),e.jsx(xe,{yAxisId:"left"}),e.jsx(xe,{yAxisId:"right",orientation:"right"}),e.jsx(le,{labelFormatter:h=>H(h),formatter:(h,S)=>[S==="revenue"?G(h):J(h),S==="revenue"?"Revenue":"Conversions"]}),e.jsx(fs,{yAxisId:"left",type:"monotone",dataKey:"revenue",stroke:"#3B82F6",fill:"#3B82F6",fillOpacity:.1}),e.jsx(qs,{yAxisId:"right",type:"monotone",dataKey:"conversions",stroke:"#10B981",strokeWidth:2})]})})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Promotion Types"}),e.jsx(ea,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"h-80",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(Rs,{children:[e.jsx(Es,{data:(i==null?void 0:i.promotion_types_distribution)||[],cx:"50%",cy:"50%",labelLine:!1,label:({name:h,percent:S})=>`${h} ${(S*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"count",children:((i==null?void 0:i.promotion_types_distribution)||[]).map((h,S)=>e.jsx(Ts,{fill:Xi[S%Xi.length]},`cell-${S}`))}),e.jsx(le,{})]})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Top Performing Promotions"}),e.jsx(xa,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"h-80",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(ds,{data:(i==null?void 0:i.top_promotions)||[],layout:"horizontal",children:[e.jsx(ue,{strokeDasharray:"3 3"}),e.jsx(pe,{type:"number"}),e.jsx(xe,{dataKey:"name",type:"category",width:120}),e.jsx(le,{formatter:h=>[G(h),"Revenue"]}),e.jsx(os,{dataKey:"revenue",fill:"#10B981"})]})})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Conversion Rate Trends"}),e.jsx(kl,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"h-80",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(At,{data:(c==null?void 0:c.conversion_rate_trends)||[],children:[e.jsx(ue,{strokeDasharray:"3 3"}),e.jsx(pe,{dataKey:"date",tickFormatter:h=>H(h,{format:"short"})}),e.jsx(xe,{}),e.jsx(le,{labelFormatter:h=>H(h),formatter:h=>[`${h}%`,"Conversion Rate"]}),e.jsx(qs,{type:"monotone",dataKey:"conversion_rate",stroke:"#F59E0B",strokeWidth:2})]})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Active Promotions"}),e.jsx(Ta,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"space-y-3",children:((i==null?void 0:i.active_promotions)||[]).slice(0,5).map(h=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:h.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[h.type,"  ",h.discount_value,"% off"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium text-gray-900",children:G(h.revenue)}),e.jsxs("p",{className:"text-sm text-gray-500",children:[h.conversions," conversions"]})]})]},h.id))})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activity"}),e.jsx(bs,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"space-y-3",children:((i==null?void 0:i.recent_activity)||[]).slice(0,5).map(h=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-3 h-3 rounded-full mr-3 ${h.type==="conversion"?"bg-green-500":h.type==="view"?"bg-blue-500":"bg-gray-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:h.customer_name}),e.jsx("p",{className:"text-sm text-gray-500",children:h.promotion_name})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:`font-medium ${h.type==="conversion"?"text-green-600":"text-gray-900"}`,children:h.type==="conversion"?G(h.value):h.type}),e.jsx("p",{className:"text-sm text-gray-500",children:H(h.created_at)})]})]},h.id))})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Category Performance"}),e.jsx(ye,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:((i==null?void 0:i.category_performance)||[]).map(h=>e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:h.category}),e.jsxs("span",{className:"text-sm text-gray-500",children:[h.promotion_count," promotions"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Revenue"}),e.jsx("span",{className:"font-medium",children:G(h.revenue)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Conversion Rate"}),e.jsxs("span",{className:"font-medium",children:[h.conversion_rate,"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Customers"}),e.jsx("span",{className:"font-medium",children:J(h.customers_engaged)})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${Math.min(h.conversion_rate,100)}%`}})})]})]},h.category))})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"ROI Analysis"}),e.jsx($e,{className:"w-5 h-5 text-gray-400"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-green-600",children:[((m=i==null?void 0:i.roi_analysis)==null?void 0:m.total_roi)||0,"%"]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Overall ROI"}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Revenue: ",G(((x=i==null?void 0:i.roi_analysis)==null?void 0:x.total_revenue)||0)]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:G((($=i==null?void 0:i.roi_analysis)==null?void 0:$.cost_per_conversion)||0)}),e.jsx("div",{className:"text-sm text-gray-500",children:"Cost per Conversion"}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Total conversions: ",J(((N=i==null?void 0:i.roi_analysis)==null?void 0:N.total_conversions)||0)]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-600",children:G(((p=i==null?void 0:i.roi_analysis)==null?void 0:p.average_order_value)||0)}),e.jsx("div",{className:"text-sm text-gray-500",children:"Avg. Order Value"}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"From promoted orders"})]})]})]}),(i==null?void 0:i.insights)&&i.insights.length>0&&e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Insights & Recommendations"}),e.jsx(oe,{className:"w-5 h-5 text-blue-500"})]}),e.jsx("div",{className:"space-y-3",children:i.insights.map((h,S)=>e.jsxs("div",{className:"flex items-start p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx(oe,{className:"w-5 h-5 text-blue-500 mt-0.5 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900",children:h.title}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:h.description}),h.recommendation&&e.jsxs("p",{className:"text-sm text-blue-600 mt-2 font-medium",children:[" ",h.recommendation]})]})]},S))})]})]})}function lm(){const[t,a]=y.useState({page:1,limit:20,sort_by:"created_at",sort_order:"desc"}),[s,r]=y.useState([]),[n,i]=y.useState(!1),[l,c]=y.useState(!1),[d,u]=y.useState(null),[o,g]=y.useState(!1),m=Pt(),{data:x,isLoading:$,error:N,refetch:p}=de({queryKey:["promotions",t],queryFn:()=>rs.getPromotions(t),staleTime:1e3*60*5}),{data:h}=de({queryKey:["promotions-stats"],queryFn:()=>rs.getPromotionStats(),staleTime:1e3*60*10}),S=(x==null?void 0:x.promotions)||[];x!=null&&x.pagination;const A=Ge({mutationFn:_=>rs.activatePromotion(_),onSuccess:()=>{m.invalidateQueries({queryKey:["promotions"]}),m.invalidateQueries({queryKey:["promotions-stats"]}),K.success("Promotion activated successfully")},onError:_=>{K.error(_.message||"Failed to activate promotion")}}),w=Ge({mutationFn:_=>rs.deactivatePromotion(_),onSuccess:()=>{m.invalidateQueries({queryKey:["promotions"]}),m.invalidateQueries({queryKey:["promotions-stats"]}),K.success("Promotion deactivated successfully")},onError:_=>{K.error(_.message||"Failed to deactivate promotion")}}),b=Ge({mutationFn:_=>rs.deletePromotion(_),onSuccess:()=>{m.invalidateQueries({queryKey:["promotions"]}),m.invalidateQueries({queryKey:["promotions-stats"]}),K.success("Promotion deleted successfully")},onError:_=>{K.error(_.message||"Failed to delete promotion")}}),j=Ge({mutationFn:_=>rs.duplicatePromotion(_),onSuccess:()=>{m.invalidateQueries({queryKey:["promotions"]}),K.success("Promotion duplicated successfully")},onError:_=>{K.error(_.message||"Failed to duplicate promotion")}}),T=_=>{const P={draft:{color:"bg-gray-100 text-gray-800",icon:Ze},active:{color:"bg-green-100 text-green-800",icon:Fe},paused:{color:"bg-yellow-100 text-yellow-800",icon:Ua},expired:{color:"bg-red-100 text-red-800",icon:we},scheduled:{color:"bg-blue-100 text-blue-800",icon:Bs}},re=P[_]||P.draft,I=re.icon;return e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${re.color}`,children:[e.jsx(I,{className:"w-3 h-3 mr-1"}),_.toUpperCase()]})},k=_=>{const P={percentage:"bg-blue-100 text-blue-800",fixed_amount:"bg-green-100 text-green-800",buy_one_get_one:"bg-purple-100 text-purple-800",bundle:"bg-orange-100 text-orange-800",loyalty:"bg-pink-100 text-pink-800"};return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${P[_]||P.percentage}`,children:_.replace("_"," ").toUpperCase()})},D=async _=>{try{const P=await rs.getPromotion(_);u(P),g(!0)}catch{K.error("Failed to load promotion details")}},R=_=>{A.mutate(_)},se=_=>{w.mutate(_)},q=_=>{window.confirm("Are you sure you want to delete this promotion?")&&b.mutate(_)},Z=_=>{j.mutate(_)},F=()=>{rs.exportPromotionReport("excel",t),K.success("Export started - file will download shortly")},ce=()=>{s.length!==0&&Promise.all(s.map(_=>rs.activatePromotion(_))).then(()=>{m.invalidateQueries({queryKey:["promotions"]}),m.invalidateQueries({queryKey:["promotions-stats"]}),K.success(`${s.length} promotions activated`),r([])}).catch(()=>{K.error("Some promotions failed to activate")})},je=()=>{s.length!==0&&Promise.all(s.map(_=>rs.deactivatePromotion(_))).then(()=>{m.invalidateQueries({queryKey:["promotions"]}),m.invalidateQueries({queryKey:["promotions-stats"]}),K.success(`${s.length} promotions deactivated`),r([])}).catch(()=>{K.error("Some promotions failed to deactivate")})},_e=[{key:"name",title:"Promotion",render:(_,P)=>{var re;return e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:P.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:[(re=P.description)==null?void 0:re.substring(0,50),"..."]})]})}},{key:"type",title:"Type",render:(_,P)=>k(P.type)},{key:"discount_value",title:"Discount",render:(_,P)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium text-gray-900",children:P.type==="percentage"?`${P.discount_value}%`:P.type==="fixed_amount"?G(P.discount_value):P.discount_value}),P.max_discount_amount&&e.jsxs("div",{className:"text-xs text-gray-500",children:["Max: ",G(P.max_discount_amount)]})]})},{key:"status",title:"Status",render:(_,P)=>T(P.status)},{key:"performance",title:"Performance",render:(_,P)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium text-gray-900",children:P.usage_count||0}),e.jsx("div",{className:"text-xs text-gray-500",children:"uses"}),e.jsx("div",{className:"text-xs text-green-600",children:G(P.total_revenue||0)})]})},{key:"duration",title:"Duration",render:(_,P)=>e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"text-gray-900",children:H(P.start_date,"short")}),e.jsxs("div",{className:"text-gray-500",children:["to ",H(P.end_date,"short")]})]})},{key:"actions",title:"Actions",render:(_,P)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>D(P.id),className:"text-blue-600 hover:text-blue-900",title:"View Details",children:e.jsx(ns,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>window.open(`/promotions/${P.id}/analytics`,"_blank"),className:"text-green-600 hover:text-green-900",title:"View Analytics",children:e.jsx(ye,{className:"w-4 h-4"})}),P.status==="draft"||P.status==="paused"?e.jsx("button",{onClick:()=>R(P.id),className:"text-green-600 hover:text-green-900",title:"Activate",disabled:A.isPending,children:e.jsx(vn,{className:"w-4 h-4"})}):P.status==="active"?e.jsx("button",{onClick:()=>se(P.id),className:"text-yellow-600 hover:text-yellow-900",title:"Pause",disabled:w.isPending,children:e.jsx(Ua,{className:"w-4 h-4"})}):null,e.jsx("button",{onClick:()=>Z(P.id),className:"text-purple-600 hover:text-purple-900",title:"Duplicate",disabled:j.isPending,children:e.jsx(Nn,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>window.open(`/promotions/${P.id}/edit`,"_blank"),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:e.jsx(ot,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>q(P.id),className:"text-red-600 hover:text-red-900",title:"Delete",disabled:b.isPending,children:e.jsx(mt,{className:"w-4 h-4"})})]})}];return $?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Pe,{size:"lg"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Promotions Management"}),e.jsx("p",{className:"text-gray-600",children:"Create, manage, and track promotional campaigns"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>c(!l),className:"btn-outline flex items-center space-x-2",children:[e.jsx(xt,{className:"w-4 h-4"}),e.jsx("span",{children:"Filters"})]}),e.jsxs("button",{onClick:F,className:"btn-outline flex items-center space-x-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsx("span",{children:"Export"})]}),e.jsxs("button",{onClick:()=>window.open("/promotions/create","_blank"),className:"btn-primary flex items-center space-x-2",children:[e.jsx(zs,{className:"w-4 h-4"}),e.jsx("span",{children:"Create Promotion"})]})]})]}),h&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-blue-100",children:e.jsx(Ta,{className:"h-6 w-6 text-blue-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Promotions"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:h.total_promotions})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-green-100",children:e.jsx(Fe,{className:"h-6 w-6 text-green-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Active Promotions"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:h.active_promotions})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-purple-100",children:e.jsx($e,{className:"h-6 w-6 text-purple-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:G(h.total_revenue)})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-yellow-100",children:e.jsx(Be,{className:"h-6 w-6 text-yellow-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Customers Engaged"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:J(h.customers_engaged)})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-orange-100",children:e.jsx(cs,{className:"h-6 w-6 text-orange-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Avg. Conversion"}),e.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:[h.average_conversion_rate,"%"]})]})]})})]}),l&&e.jsx("div",{className:"card",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(ws,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search promotions...",className:"input pl-10",value:t.search||"",onChange:_=>a({...t,search:_.target.value,page:1})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{className:"input",value:t.status||"",onChange:_=>a({...t,status:_.target.value||void 0,page:1}),children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"paused",children:"Paused"}),e.jsx("option",{value:"expired",children:"Expired"}),e.jsx("option",{value:"scheduled",children:"Scheduled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),e.jsxs("select",{className:"input",value:t.type||"",onChange:_=>a({...t,type:_.target.value||void 0,page:1}),children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"percentage",children:"Percentage"}),e.jsx("option",{value:"fixed_amount",children:"Fixed Amount"}),e.jsx("option",{value:"buy_one_get_one",children:"BOGO"}),e.jsx("option",{value:"bundle",children:"Bundle"}),e.jsx("option",{value:"loyalty",children:"Loyalty"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date Range"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"date",className:"input text-sm",value:t.start_date||"",onChange:_=>a({...t,start_date:_.target.value||void 0,page:1})}),e.jsx("input",{type:"date",className:"input text-sm",value:t.end_date||"",onChange:_=>a({...t,end_date:_.target.value||void 0,page:1})})]})]})]})}),e.jsx("div",{className:"card",children:e.jsx(ba,{data:S,columns:_e,title:"Promotions",searchable:!0,exportable:!0,pagination:!0,pageSize:t.limit||20})}),s.length>0&&e.jsx("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 bg-white rounded-lg shadow-lg border p-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[s.length," selected"]}),e.jsx("button",{onClick:ce,className:"btn-primary btn-sm",children:"Bulk Activate"}),e.jsx("button",{onClick:je,className:"btn-outline btn-sm",children:"Bulk Pause"}),e.jsx("button",{onClick:()=>r([]),className:"btn-outline btn-sm",children:"Clear Selection"})]})}),o&&d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Promotion Details"}),e.jsx("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600",children:""})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Promotion Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Name"}),e.jsx("p",{className:"text-gray-900",children:d.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Description"}),e.jsx("p",{className:"text-gray-900",children:d.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Type"}),e.jsx("div",{className:"mt-1",children:k(d.type)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Status"}),e.jsx("div",{className:"mt-1",children:T(d.status)})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance Metrics"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Usage Count"}),e.jsx("p",{className:"text-gray-900",children:d.usage_count||0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Total Revenue"}),e.jsx("p",{className:"text-gray-900",children:G(0)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Conversion Rate"}),e.jsx("p",{className:"text-gray-900",children:"0%"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Duration"}),e.jsxs("p",{className:"text-gray-900",children:[H(d.start_date)," - ",H(d.end_date)]})]})]})]})]}),d.conditions&&d.conditions.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Conditions"}),e.jsx("div",{className:"space-y-2",children:d.conditions.map((_,P)=>e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-900",children:_.description})},P))})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[d.status==="draft"||d.status==="paused"?e.jsx("button",{onClick:()=>{R(d.id),g(!1)},className:"btn-primary",children:"Activate"}):d.status==="active"?e.jsx("button",{onClick:()=>{se(d.id),g(!1)},className:"btn-outline",children:"Pause"}):null,e.jsx("button",{onClick:()=>window.open(`/promotions/${d.id}/analytics`,"_blank"),className:"btn-outline",children:"View Analytics"}),e.jsx("button",{onClick:()=>g(!1),className:"btn-outline",children:"Close"})]})]})})]})}class cm{constructor(){Xe(this,"baseUrl","/api/customers")}async getCustomers(a){var s,r;try{const n=await ee.get(this.baseUrl,{params:a});return{customers:((s=n.data.data)==null?void 0:s.customers)||n.data.data||[],pagination:((r=n.data.data)==null?void 0:r.pagination)||{}}}catch(n){throw console.error("Failed to fetch customers:",n),n}}async getCustomer(a){try{return(await ee.get(`${this.baseUrl}/${a}`)).data.data}catch(s){return console.error("Failed to fetch customer:",s),null}}async createCustomer(a){try{return(await ee.post(this.baseUrl,a)).data.data}catch(s){throw console.error("Failed to create customer:",s),s}}async updateCustomer(a,s){try{return(await ee.put(`${this.baseUrl}/${a}`,s)).data.data}catch(r){throw console.error("Failed to update customer:",r),r}}async deleteCustomer(a){try{await ee.delete(`${this.baseUrl}/${a}`)}catch(s){throw console.error("Failed to delete customer:",s),s}}async getCustomerStats(){try{return(await ee.get(`${this.baseUrl}/stats`)).data.data}catch(a){return console.error("Failed to fetch customer stats:",a),this.getMockStats()}}async getCustomerOrders(a,s){try{return(await ee.get(`${this.baseUrl}/${a}/orders`,{params:s})).data.data||[]}catch(r){return console.error("Failed to fetch customer orders:",r),[]}}async getCustomerTransactions(a,s){try{return(await ee.get(`${this.baseUrl}/${a}/transactions`,{params:s})).data.data||[]}catch(r){return console.error("Failed to fetch customer transactions:",r),[]}}async getCustomerVisits(a,s){try{return(await ee.get(`${this.baseUrl}/${a}/visits`,{params:s})).data.data||[]}catch(r){return console.error("Failed to fetch customer visits:",r),[]}}async exportCustomers(a,s="csv"){try{return(await ee.get(`${this.baseUrl}/export`,{params:{...a,format:s},responseType:"blob"})).data}catch(r){throw console.error("Failed to export customers:",r),r}}async bulkUpdateCustomers(a){try{return(await ee.put(`${this.baseUrl}/bulk`,{updates:a})).data.data}catch(s){throw console.error("Failed to bulk update customers:",s),s}}async importCustomers(a){try{const s=new FormData;return s.append("file",a),(await ee.post(`${this.baseUrl}/import`,s,{headers:{"Content-Type":"multipart/form-data"}})).data.data}catch(s){throw console.error("Failed to import customers:",s),s}}getMockStats(){return{total_customers:3,active_customers:3,inactive_customers:0,total_sales:150,average_order_value:150,top_customers:[],customers_by_type:{retail:2,wholesale:1,distributor:0},customers_by_region:[{region:"North Region",count:3,sales:150}]}}}const tr=new cm;function dm(){const[t,a]=y.useState({page:1,limit:10,sort_by:"created_at",sort_order:"desc"}),[s,r]=y.useState([]),[n,i]=y.useState(!1),[l,c]=y.useState(!1),d=Pt(),{data:u,isLoading:o,error:g,refetch:m}=de({queryKey:["customers",t],queryFn:()=>tr.getCustomers(t),staleTime:1e3*60*5}),{data:x}=de({queryKey:["customer-stats"],queryFn:()=>tr.getCustomerStats(),staleTime:1e3*60*10}),$=(u==null?void 0:u.customers)||[],N=(u==null?void 0:u.pagination)||{},p=Ge({mutationFn:j=>tr.deleteCustomer(j),onSuccess:()=>{d.invalidateQueries({queryKey:["customers"]}),d.invalidateQueries({queryKey:["customer-stats"]})}}),h=j=>{const T={active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",suspended:"bg-red-100 text-red-800"};return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${T[j]||"bg-gray-100 text-gray-800"}`,children:j.charAt(0).toUpperCase()+j.slice(1)})},S=j=>{const T={retail:"bg-blue-100 text-blue-800",wholesale:"bg-purple-100 text-purple-800",distributor:"bg-orange-100 text-orange-800"};return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${T[j]||"bg-gray-100 text-gray-800"}`,children:j.charAt(0).toUpperCase()+j.slice(1)})},A=j=>{r(j?$.map(T=>T.id):[])},w=(j,T)=>{r(T?[...s,j]:s.filter(k=>k!==j))},b=async j=>{if(window.confirm("Are you sure you want to delete this customer?"))try{await p.mutateAsync(j)}catch(T){console.error("Failed to delete customer:",T)}};return o?e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Customers"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage your customer database and relationships"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[...Array(4)].map((j,T)=>e.jsxs("div",{className:"card animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-1"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]},T))}),e.jsxs("div",{className:"card animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-4/6"})]})]})]}):g?e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Customers"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage your customer database and relationships"})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx("svg",{className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Customers"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"There was an error loading the customer data."}),e.jsx("button",{onClick:()=>m(),className:"btn btn-primary",children:"Try Again"})]})})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Customers"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:["Manage your customer database and relationships (",N.total||0," total)"]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>c(!0),className:"btn btn-secondary",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"})}),"Import"]}),e.jsx("div",{className:"relative",children:e.jsxs("button",{className:"btn btn-secondary dropdown-toggle",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export"]})}),e.jsxs("button",{onClick:()=>i(!0),className:"btn btn-primary",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"New Customer"]})]})]}),x&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Customers"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:x.total_customers}),e.jsxs("p",{className:"text-sm text-green-600",children:[x.active_customers," active"]})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Sales"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:G(x.total_sales)}),e.jsx("p",{className:"text-sm text-gray-500",children:"All time"})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Order Value"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:G(x.average_order_value)}),e.jsx("p",{className:"text-sm text-gray-500",children:"Per order"})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-4m-5 0H9m0 0H5m4 0V9a2 2 0 011-1h4a2 2 0 011 1v12m-6 0h6"})})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Customer Types"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:x.customers_by_type.retail+x.customers_by_type.wholesale}),e.jsxs("p",{className:"text-sm text-gray-500",children:[x.customers_by_type.retail," retail, ",x.customers_by_type.wholesale," wholesale"]})]})]})})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),e.jsx("input",{type:"text",placeholder:"Search customers...",value:t.search||"",onChange:j=>a({...t,search:j.target.value||void 0,page:1}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),e.jsxs("select",{value:t.type||"",onChange:j=>a({...t,type:j.target.value||void 0,page:1}),className:"input",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"retail",children:"Retail"}),e.jsx("option",{value:"wholesale",children:"Wholesale"}),e.jsx("option",{value:"distributor",children:"Distributor"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:t.status||"",onChange:j=>a({...t,status:j.target.value||void 0,page:1}),className:"input",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"suspended",children:"Suspended"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort By"}),e.jsxs("select",{value:t.sort_by||"created_at",onChange:j=>a({...t,sort_by:j.target.value,page:1}),className:"input",children:[e.jsx("option",{value:"created_at",children:"Date Created"}),e.jsx("option",{value:"name",children:"Name"}),e.jsx("option",{value:"total_sales",children:"Total Sales"}),e.jsx("option",{value:"total_orders",children:"Total Orders"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order"}),e.jsxs("select",{value:t.sort_order||"desc",onChange:j=>a({...t,sort_order:j.target.value,page:1}),className:"input",children:[e.jsx("option",{value:"desc",children:"Descending"}),e.jsx("option",{value:"asc",children:"Ascending"})]})]})]})}),e.jsx("div",{className:"card overflow-hidden",children:$.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No customers found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"No customers match your current filters."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:s.length===$.length,onChange:j=>A(j.target.checked),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Route"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sales"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"relative px-6 py-3",children:e.jsx("span",{className:"sr-only",children:"Actions"})})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:$.map(j=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:s.includes(j.id),onChange:T=>w(j.id,T.target.checked),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:j.name}),e.jsx("div",{className:"text-sm text-gray-500",children:j.code})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S(j.type)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[j.phone&&e.jsx("div",{className:"text-sm text-gray-900",children:Po(j.phone)}),j.email&&e.jsx("div",{className:"text-sm text-gray-500",children:j.email})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-900",children:j.route_name||"No Route"}),e.jsx("div",{className:"text-sm text-gray-500",children:j.area_name})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:G(j.total_sales)}),e.jsxs("div",{className:"text-sm text-gray-500",children:[j.total_orders," orders"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:h(j.status)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"View"}),e.jsx("button",{className:"text-gray-600 hover:text-gray-900 mr-3",children:"Edit"}),e.jsx("button",{onClick:()=>b(j.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},j.id))})]})})}),N.totalPages>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",((N.page||1)-1)*(N.limit||10)+1," to"," ",Math.min((N.page||1)*(N.limit||10),N.total||0)," of ",N.total||0," results"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>a({...t,page:(t.page||1)-1}),disabled:(t.page||1)<=1,className:"btn btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:()=>a({...t,page:(t.page||1)+1}),disabled:(t.page||1)>=(N.totalPages||1),className:"btn btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})}function om(){return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Customer Details"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Customer Details functionality coming soon."})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Customer Details"}),e.jsx("p",{className:"text-gray-600",children:"This feature is under development."})]})})]})}class mm{constructor(){Xe(this,"baseUrl","/api/orders")}async getOrders(a){var s,r,n,i;try{const l=await ee.get(this.baseUrl,{params:a});return{orders:((s=l.data.data)==null?void 0:s.orders)||l.data.data||[],total:((n=(r=l.data.data)==null?void 0:r.pagination)==null?void 0:n.total)||((i=l.data.data)==null?void 0:i.length)||0}}catch(l){return console.error("Failed to fetch orders:",l),this.getMockOrders(a)}}async getOrder(a){try{return(await ee.get(`${this.baseUrl}/${a}`)).data}catch(s){return console.error("Failed to fetch order:",s),null}}async createOrder(a){try{return(await ee.post(this.baseUrl,a)).data}catch(s){throw console.error("Failed to create order:",s),s}}async updateOrder(a,s){try{return(await ee.put(`${this.baseUrl}/${a}`,s)).data}catch(r){throw console.error("Failed to update order:",r),r}}async deleteOrder(a){try{await ee.delete(`${this.baseUrl}/${a}`)}catch(s){throw console.error("Failed to delete order:",s),s}}async getOrderItems(a){try{return(await ee.get(`${this.baseUrl}/${a}/items`)).data}catch(s){return console.error("Failed to fetch order items:",s),[]}}getMockOrders(a){const s=[{id:"132222ef28591ab877b2ca90263ed8bb",tenant_id:"demo",order_number:"ORD-001",customer_id:"c874a76dc577e314126efbc7ef6e36a9",order_date:"2025-10-06",subtotal:150,tax_amount:0,discount_amount:0,total_amount:150,payment_status:"pending",order_status:"pending",created_at:"2025-10-06T06:30:34Z",customer:{id:"c874a76dc577e314126efbc7ef6e36a9",name:"Demo Customer",email:"customer@demo.com",phone:"+44 123 456 7890"},items:[{id:"7e03b0a0041b4c94342f326bd3056096",order_id:"132222ef28591ab877b2ca90263ed8bb",product_id:"76f4d483-bdaa-40e9-94e1-65b8dcdca410",quantity:2,unit_price:75,discount_amount:0,tax_amount:0,total_amount:150,product:{id:"76f4d483-bdaa-40e9-94e1-65b8dcdca410",name:"Premium Product",sku:"PROD-001"}}]}];let r=s;a&&(r=s.filter(d=>!(a.status&&d.order_status!==a.status||a.payment_status&&d.payment_status!==a.payment_status||a.customer_id&&d.customer_id!==a.customer_id)));const n=(a==null?void 0:a.limit)||10,l=(((a==null?void 0:a.page)||1)-1)*n,c=l+n;return{orders:r.slice(l,c),total:r.length}}}const xm=new mm;function hm(){const[t,a]=y.useState({page:1,limit:10}),{data:s,isLoading:r,error:n,refetch:i}=de({queryKey:["orders",t],queryFn:()=>xm.getOrders(t),staleTime:1e3*60*5}),l=(s==null?void 0:s.orders)||[],c=(s==null?void 0:s.total)||0,d=o=>{const g={pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",delivered:"bg-purple-100 text-purple-800"};return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${g[o]||"bg-gray-100 text-gray-800"}`,children:o.charAt(0).toUpperCase()+o.slice(1)})},u=o=>{const g={pending:"bg-yellow-100 text-yellow-800",paid:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",refunded:"bg-gray-100 text-gray-800"};return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${g[o]||"bg-gray-100 text-gray-800"}`,children:o.charAt(0).toUpperCase()+o.slice(1)})};return r?e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Orders"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage customer orders and transactions"})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-4/6"})]})]})})]}):n?e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Orders"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage customer orders and transactions"})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx("svg",{className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Orders"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"There was an error loading the orders data."}),e.jsx("button",{onClick:()=>i(),className:"btn btn-primary",children:"Try Again"})]})})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Orders"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:["Manage customer orders and transactions (",c," total)"]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{className:"btn btn-secondary",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export"]}),e.jsxs("button",{className:"btn btn-primary",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"New Order"]})]})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order Status"}),e.jsxs("select",{value:t.status||"",onChange:o=>a({...t,status:o.target.value||void 0,page:1}),className:"input",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"}),e.jsx("option",{value:"delivered",children:"Delivered"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Status"}),e.jsxs("select",{value:t.payment_status||"",onChange:o=>a({...t,payment_status:o.target.value||void 0,page:1}),className:"input",children:[e.jsx("option",{value:"",children:"All Payment Statuses"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"failed",children:"Failed"}),e.jsx("option",{value:"refunded",children:"Refunded"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date From"}),e.jsx("input",{type:"date",value:t.date_from||"",onChange:o=>a({...t,date_from:o.target.value||void 0,page:1}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date To"}),e.jsx("input",{type:"date",value:t.date_to||"",onChange:o=>a({...t,date_to:o.target.value||void 0,page:1}),className:"input"})]})]})}),e.jsx("div",{className:"card overflow-hidden",children:l.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No orders found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"No orders match your current filters."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Items"}),e.jsx("th",{className:"relative px-6 py-3",children:e.jsx("span",{className:"sr-only",children:"Actions"})})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(o=>{var g,m,x;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:o.order_number}),e.jsxs("div",{className:"text-sm text-gray-500",children:[o.id.substring(0,8),"..."]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:((g=o.customer)==null?void 0:g.name)||"Unknown Customer"}),e.jsx("div",{className:"text-sm text-gray-500",children:(m=o.customer)==null?void 0:m.email})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:H(o.order_date)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:G(o.total_amount)}),o.discount_amount>0&&e.jsxs("div",{className:"text-sm text-gray-500",children:["-",G(o.discount_amount)," discount"]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d(o.order_status)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u(o.payment_status)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[((x=o.items)==null?void 0:x.length)||0," items"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"View"}),e.jsx("button",{className:"text-gray-600 hover:text-gray-900",children:"Edit"})]})]},o.id)})})]})})}),c>(t.limit||10)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",((t.page||1)-1)*(t.limit||10)+1," to"," ",Math.min((t.page||1)*(t.limit||10),c)," of ",c," results"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>a({...t,page:(t.page||1)-1}),disabled:(t.page||1)<=1,className:"btn btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:()=>a({...t,page:(t.page||1)+1}),disabled:(t.page||1)*(t.limit||10)>=c,className:"btn btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})}function um(){return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Order Details"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Order Details functionality coming soon."})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Order Details"}),e.jsx("p",{className:"text-gray-600",children:"This feature is under development."})]})})]})}class pm{constructor(){Xe(this,"baseUrl","/api/products")}async getProducts(a){var s,r,n,i;try{const l=await ee.get(this.baseUrl,{params:a});return{products:((s=l.data.data)==null?void 0:s.products)||l.data.data||[],categories:((r=l.data.data)==null?void 0:r.categories)||[],brands:((n=l.data.data)==null?void 0:n.brands)||[],pagination:((i=l.data.data)==null?void 0:i.pagination)||{}}}catch(l){throw console.error("Failed to fetch products:",l),l}}async getProduct(a){try{return(await ee.get(`${this.baseUrl}/${a}`)).data.data}catch(s){return console.error("Failed to fetch product:",s),null}}async createProduct(a){try{return(await ee.post(this.baseUrl,a)).data.data}catch(s){throw console.error("Failed to create product:",s),s}}async updateProduct(a,s){try{return(await ee.put(`${this.baseUrl}/${a}`,s)).data.data}catch(r){throw console.error("Failed to update product:",r),r}}async deleteProduct(a){try{await ee.delete(`${this.baseUrl}/${a}`)}catch(s){throw console.error("Failed to delete product:",s),s}}async getProductStats(){try{return(await ee.get(`${this.baseUrl}/stats`)).data.data}catch(a){return console.error("Failed to fetch product stats:",a),this.getMockStats()}}async getCategories(){try{return(await ee.get("/api/categories")).data.data||[]}catch(a){return console.error("Failed to fetch categories:",a),[]}}async getBrands(){try{return(await ee.get("/api/brands")).data.data||[]}catch(a){return console.error("Failed to fetch brands:",a),[]}}async updateStock(a,s){try{return(await ee.post(`${this.baseUrl}/${a}/stock`,s)).data.data}catch(r){throw console.error("Failed to update stock:",r),r}}async getStockMovements(a,s){try{return(await ee.get(`${this.baseUrl}/${a}/movements`,{params:s})).data.data||[]}catch(r){return console.error("Failed to fetch stock movements:",r),[]}}async exportProducts(a,s="csv"){try{return(await ee.get(`${this.baseUrl}/export`,{params:{...a,format:s},responseType:"blob"})).data}catch(r){throw console.error("Failed to export products:",r),r}}async bulkUpdateProducts(a){try{return(await ee.put(`${this.baseUrl}/bulk`,{updates:a})).data.data}catch(s){throw console.error("Failed to bulk update products:",s),s}}async importProducts(a){try{const s=new FormData;return s.append("file",a),(await ee.post(`${this.baseUrl}/import`,s,{headers:{"Content-Type":"multipart/form-data"}})).data.data}catch(s){throw console.error("Failed to import products:",s),s}}async uploadProductImage(a,s){try{const r=new FormData;return r.append("image",s),(await ee.post(`${this.baseUrl}/${a}/image`,r,{headers:{"Content-Type":"multipart/form-data"}})).data.data.image_url}catch(r){throw console.error("Failed to upload product image:",r),r}}getMockStats(){return{total_products:3,active_products:3,inactive_products:0,total_value:21e3,low_stock_products:0,out_of_stock_products:0,top_selling_products:[],products_by_category:[{category:"Beverages",count:3,value:21e3}],products_by_brand:[{brand:"Premium Brand",count:3,value:21e3}]}}}const sn=new pm;function gm(){const[t,a]=y.useState([]),[s,r]=y.useState(null),[n,i]=y.useState(!0),[l,c]=y.useState(null),[d,u]=y.useState(""),[o,g]=y.useState(""),[m,x]=y.useState(""),[$,N]=y.useState(""),[p,h]=y.useState(""),[S,A]=y.useState("name"),[w,b]=y.useState("asc"),[j,T]=y.useState(1),[k]=y.useState(20),[D,R]=y.useState([]),[se,q]=y.useState(!1),[Z,F]=y.useState([]),[ce,je]=y.useState([]);y.useEffect(()=>{_e(),_()},[]);const _e=async()=>{try{i(!0),c(null);const L=await sn.getProducts();a(L.products);const Se=[...new Set(L.products.map(Le=>Le.category_name||Le.category).filter(Boolean))],ve=[...new Set(L.products.map(Le=>Le.brand_name||Le.brand).filter(Boolean))];F(Se),je(ve)}catch(L){c("Failed to load products"),console.error("Error loading products:",L)}finally{i(!1)}},_=async()=>{try{const L=await sn.getProductStats();r(L)}catch(L){console.error("Error loading product stats:",L)}},P=t.filter(L=>{const Se=L.name.toLowerCase().includes(d.toLowerCase())||L.code.toLowerCase().includes(d.toLowerCase())||L.description&&L.description.toLowerCase().includes(d.toLowerCase()),ve=!o||L.category_name===o,Le=!m||L.brand_name===m,wa=!$||L.status===$;let Et=!0;return p==="low"?Et=L.min_stock_level?L.total_stock<=L.min_stock_level:!1:p==="out"?Et=L.total_stock===0:p==="in"&&(Et=L.total_stock>0),Se&&ve&&Le&&wa&&Et}).sort((L,Se)=>{let ve=L[S],Le=Se[S];return ve===void 0&&(ve=""),Le===void 0&&(Le=""),typeof ve=="string"&&(ve=ve.toLowerCase()),typeof Le=="string"&&(Le=Le.toLowerCase()),w==="asc"?ve<Le?-1:ve>Le?1:0:ve>Le?-1:ve<Le?1:0}),re=Math.ceil(P.length/k),I=(j-1)*k,W=P.slice(I,I+k),Je=L=>{R(Se=>Se.includes(L)?Se.filter(ve=>ve!==L):[...Se,L])},ms=()=>{D.length===W.length?R([]):R(W.map(L=>L.id))},ra=L=>L.total_stock===0?"out":L.min_stock_level&&L.total_stock<=L.min_stock_level?"low":"in",Qa=L=>{switch(L){case"out":return"text-red-600 bg-red-100";case"low":return"text-yellow-600 bg-yellow-100";case"in":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}},Rt=L=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP"}).format(L);return n?e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Products"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage your product inventory and catalog"})]}),e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Pe,{size:"lg"})})]}):l?e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Products"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage your product inventory and catalog"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(we,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Products"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"There was an error loading the product data."}),e.jsx("button",{onClick:_e,className:"btn-primary",children:"Try Again"})]})})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Products"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage your product inventory and catalog"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{className:"btn-outline flex items-center space-x-2",children:[e.jsx(bn,{className:"h-4 w-4"}),e.jsx("span",{children:"Import"})]}),e.jsxs("button",{className:"btn-outline flex items-center space-x-2",children:[e.jsx(Ie,{className:"h-4 w-4"}),e.jsx("span",{children:"Export"})]}),e.jsxs("button",{className:"btn-primary flex items-center space-x-2",children:[e.jsx(zs,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Product"})]})]})]}),s&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-blue-100",children:e.jsx(Ce,{className:"h-6 w-6 text-blue-600"})})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Products"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:s.total_products.toLocaleString()}),e.jsxs("p",{className:"text-sm text-blue-600",children:[s.active_products," active"]})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-green-100",children:e.jsx(Fe,{className:"h-6 w-6 text-green-600"})})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"In Stock"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:(s.total_products-s.out_of_stock_products).toLocaleString()}),e.jsx("p",{className:"text-sm text-green-600",children:"Available for sale"})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-yellow-100",children:e.jsx(we,{className:"h-6 w-6 text-yellow-600"})})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Low Stock"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:s.low_stock_products}),e.jsx("p",{className:"text-sm text-yellow-600",children:"Needs attention"})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 rounded-lg bg-purple-100",children:e.jsx($e,{className:"h-6 w-6 text-purple-600"})})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Value"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Rt(s.total_value)}),e.jsx("p",{className:"text-sm text-purple-600",children:"Inventory worth"})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsx("div",{className:"flex-1 max-w-lg",children:e.jsxs("div",{className:"relative",children:[e.jsx(ws,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search products by name, code, or description...",value:d,onChange:L=>u(L.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:()=>q(!se),className:"btn-outline flex items-center space-x-2",children:[e.jsx(xt,{className:"h-4 w-4"}),e.jsx("span",{children:"Filters"})]}),e.jsxs("select",{value:S,onChange:L=>A(L.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"name",children:"Sort by Name"}),e.jsx("option",{value:"code",children:"Sort by Code"}),e.jsx("option",{value:"selling_price",children:"Sort by Price"}),e.jsx("option",{value:"total_stock",children:"Sort by Stock"}),e.jsx("option",{value:"created_at",children:"Sort by Date"})]}),e.jsx("button",{onClick:()=>b(w==="asc"?"desc":"asc"),className:"btn-outline p-2",children:w==="asc"?e.jsx(oe,{className:"h-4 w-4"}):e.jsx(He,{className:"h-4 w-4"})})]})]}),se&&e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),e.jsxs("select",{value:o,onChange:L=>g(L.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Categories"}),Z.map(L=>e.jsx("option",{value:L,children:L},L))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Brand"}),e.jsxs("select",{value:m,onChange:L=>x(L.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Brands"}),ce.map(L=>e.jsx("option",{value:L,children:L},L))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:$,onChange:L=>N(L.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"discontinued",children:"Discontinued"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stock Level"}),e.jsxs("select",{value:p,onChange:L=>h(L.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Stock Levels"}),e.jsx("option",{value:"in",children:"In Stock"}),e.jsx("option",{value:"low",children:"Low Stock"}),e.jsx("option",{value:"out",children:"Out of Stock"})]})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Products (",P.length,")"]}),D.length>0&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[D.length," selected"]}),e.jsx("button",{className:"btn-outline btn-sm",children:"Bulk Edit"}),e.jsx("button",{className:"btn-outline btn-sm text-red-600 hover:text-red-700",children:"Delete Selected"})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:D.length===W.length&&W.length>0,onChange:ms,className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:W.map(L=>{const Se=ra(L);return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:D.includes(L.id),onChange:()=>Je(L.id),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:L.image_url?e.jsx("img",{className:"h-10 w-10 rounded-lg object-cover",src:L.image_url,alt:L.name}):e.jsx("div",{className:"h-10 w-10 rounded-lg bg-gray-200 flex items-center justify-center",children:e.jsx(Ce,{className:"h-5 w-5 text-gray-400"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:L.name}),L.description&&e.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:L.description})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:L.code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:L.category_name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Rt(L.selling_price)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm text-gray-900",children:[L.total_stock," ",L.unit_of_measure||"units"]}),e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Qa(Se)}`,children:[Se==="out"&&e.jsx(nt,{className:"h-3 w-3 mr-1"}),Se==="low"&&e.jsx(we,{className:"h-3 w-3 mr-1"}),Se==="in"&&e.jsx(Fe,{className:"h-3 w-3 mr-1"}),Se==="out"?"Out of Stock":Se==="low"?"Low Stock":"In Stock"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${L.status==="active"?"bg-green-100 text-green-800":L.status==="inactive"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:L.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:e.jsx(ns,{className:"h-4 w-4"})}),e.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:e.jsx(ot,{className:"h-4 w-4"})}),e.jsx("button",{className:"text-gray-400 hover:text-red-600",children:e.jsx(mt,{className:"h-4 w-4"})}),e.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:e.jsx(jn,{className:"h-4 w-4"})})]})})]},L.id)})})]})}),re>1&&e.jsx("div",{className:"px-6 py-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",I+1," to ",Math.min(I+k,P.length)," of ",P.length," products"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>T(Math.max(1,j-1)),disabled:j===1,className:"btn-outline btn-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),Array.from({length:Math.min(5,re)},(L,Se)=>{const ve=Se+1;return e.jsx("button",{onClick:()=>T(ve),className:`btn-sm ${j===ve?"btn-primary":"btn-outline"}`,children:ve},ve)}),e.jsx("button",{onClick:()=>T(Math.min(re,j+1)),disabled:j===re,className:"btn-outline btn-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})})]})]})}function fm(){return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Product Details"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Product Details functionality coming soon."})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Product Details"}),e.jsx("p",{className:"text-gray-600",children:"This feature is under development."})]})})]})}function jm(){return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Admin functionality coming soon."})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Admin"}),e.jsx("p",{className:"text-gray-600",children:"This feature is under development."})]})})]})}function ym(){return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"User Management functionality coming soon."})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"User Management"}),e.jsx("p",{className:"text-gray-600",children:"This feature is under development."})]})})]})}const vm=({onCurrencyChange:t})=>{const[a,s]=y.useState(Xt()),[r,n]=y.useState(!1);y.useEffect(()=>{s(Xt())},[]);const i=async c=>{n(!0);try{Co(c),s(c),t==null||t(c),console.log(`Currency changed to ${Ao(c)}`)}catch(d){console.error("Failed to update currency:",d)}finally{n(!1)}},l=1234.56;return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Currency Settings"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Choose your preferred currency for displaying amounts throughout the application."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Currency"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:Object.entries(aa).map(([c,d])=>e.jsx("div",{className:`
                  relative rounded-lg border-2 cursor-pointer transition-all duration-200
                  ${a===c?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 bg-white"}
                  ${r?"opacity-50 cursor-not-allowed":""}
                `,onClick:()=>!r&&i(c),children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`
                        w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold
                        ${a===c?"bg-blue-500 text-white":"bg-gray-100 text-gray-600"}
                      `,children:d.symbol}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:d.code}),e.jsx("div",{className:"text-sm text-gray-500",children:d.name})]})]}),a===c&&e.jsx("div",{className:"text-blue-500",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})]})})},c))})]}),e.jsx("div",{className:"border-t pt-4",children:e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Preview"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Standard format:"}),e.jsx("span",{className:"font-medium text-gray-900",children:Te(l,a)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Compact format:"}),e.jsx("span",{className:"font-medium text-gray-900",children:Te(l,a,{compact:!0})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Symbol only:"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[$o(a),l.toFixed(2)]})]})]})]})}),r&&e.jsxs("div",{className:"flex items-center justify-center py-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Updating currency..."})]})]}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"text-blue-500 mt-0.5",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-blue-900",children:"Currency Information"}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Your currency preference is saved locally and will be remembered across sessions. All amounts throughout the application will be displayed in your selected currency."})]})]})})]})};function Nm(){const[t,a]=y.useState("currency"),s=[{id:"currency",name:"Currency",icon:""},{id:"general",name:"General",icon:""},{id:"notifications",name:"Notifications",icon:""},{id:"security",name:"Security",icon:""}],r=n=>{console.log("Currency changed to:",n)};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"System Settings"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Configure system-wide settings and preferences."})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8 px-6","aria-label":"Tabs",children:s.map(n=>e.jsxs("button",{onClick:()=>a(n.id),className:`
                  whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2
                  ${t===n.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                `,children:[e.jsx("span",{children:n.icon}),e.jsx("span",{children:n.name})]},n.id))})}),e.jsxs("div",{className:"p-6",children:[t==="currency"&&e.jsx(vm,{onCurrencyChange:r}),t==="general"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"General Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Application Name"}),e.jsx("input",{type:"text",defaultValue:"SalesSync",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Zone"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"UTC",children:"UTC"}),e.jsx("option",{value:"Africa/Johannesburg",selected:!0,children:"Africa/Johannesburg (SAST)"}),e.jsx("option",{value:"America/New_York",children:"America/New_York (EST)"}),e.jsx("option",{value:"Europe/London",children:"Europe/London (GMT)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Format"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"DD/MM/YYYY",selected:!0,children:"DD/MM/YYYY"}),e.jsx("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),e.jsx("option",{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]})]})]})}),t==="notifications"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Notification Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Receive notifications via email"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Push Notifications"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Receive push notifications in browser"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"SMS Notifications"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Receive notifications via SMS"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]})}),t==="security"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Security Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Timeout (minutes)"}),e.jsx("input",{type:"number",defaultValue:"30",min:"5",max:"480",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Require 2FA for all users"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Password Complexity"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Enforce strong password requirements"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]})})]}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end",children:e.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Save Changes"})})]})]})}function bm(){return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Audit Logs"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Audit Logs functionality coming soon."})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Audit Logs"}),e.jsx("p",{className:"text-gray-600",children:"This feature is under development."})]})})]})}function na({children:t,requiredRole:a,requiredPermission:s,fallback:r}){const{isAuthenticated:n,user:i}=Fs(),l=Sn();return!n||!i?e.jsx(Dt,{to:"/auth/login",state:{from:l},replace:!0}):a&&!Zn(a)?r?e.jsx(e.Fragment,{children:r}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6 text-center",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"You don't have permission to access this page."}),e.jsx("button",{onClick:()=>window.history.back(),className:"btn-primary",children:"Go Back"})]})}):s&&!Or(s)?r?e.jsx(e.Fragment,{children:r}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6 text-center",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Insufficient Permissions"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"You don't have the required permissions to access this feature."}),e.jsx("button",{onClick:()=>window.history.back(),className:"btn-primary",children:"Go Back"})]})}):e.jsx(e.Fragment,{children:t})}function wm(){const{isAuthenticated:t,isLoading:a,initialize:s}=Fs();return y.useEffect(()=>{s()},[s]),a?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsx(Pe,{size:"lg"})}):e.jsx(Hd,{children:e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs(Pl,{children:[e.jsxs(z,{path:"/auth/*",element:t?e.jsx(Dt,{to:"/dashboard",replace:!0}):e.jsx(Yd,{}),children:[e.jsx(z,{path:"login",element:e.jsx(wo,{})}),e.jsx(z,{path:"forgot-password",element:e.jsx(_o,{})}),e.jsx(z,{path:"reset-password",element:e.jsx(So,{})}),e.jsx(z,{index:!0,element:e.jsx(Dt,{to:"login",replace:!0})})]}),e.jsxs(z,{path:"/*",element:e.jsx(na,{children:e.jsx(Gd,{})}),children:[e.jsx(z,{path:"dashboard",element:e.jsx(Ro,{})}),e.jsx(z,{path:"analytics",element:e.jsx(Eo,{})}),e.jsx(z,{path:"van-sales",element:e.jsx(Ui,{})}),e.jsx(z,{path:"van-sales/dashboard",element:e.jsx(Ui,{})}),e.jsx(z,{path:"van-sales/management",element:e.jsx(To,{})}),e.jsx(z,{path:"van-sales/routes",element:e.jsx(Uo,{})}),e.jsx(z,{path:"van-sales/inventory",element:e.jsx(Lo,{})}),e.jsx(z,{path:"field-operations",element:e.jsx(Ii,{})}),e.jsx(z,{path:"field-operations/dashboard",element:e.jsx(Ii,{})}),e.jsx(z,{path:"field-operations/agents",element:e.jsx(Di,{})}),e.jsx(z,{path:"field-operations/mapping",element:e.jsx(Mi,{})}),e.jsx(z,{path:"field-operations/boards",element:e.jsx(Vi,{})}),e.jsx(z,{path:"field-operations/products",element:e.jsx(Bi,{})}),e.jsx(z,{path:"field-operations/commission",element:e.jsx(Ki,{})}),e.jsx(z,{path:"field-marketing",element:e.jsx(qi,{})}),e.jsx(z,{path:"field-marketing/dashboard",element:e.jsx(qi,{})}),e.jsx(z,{path:"kyc",element:e.jsx(zi,{})}),e.jsx(z,{path:"kyc/dashboard",element:e.jsx(zi,{})}),e.jsx(z,{path:"kyc/management",element:e.jsx(Xo,{})}),e.jsx(z,{path:"kyc/reports",element:e.jsx(em,{})}),e.jsx(z,{path:"surveys",element:e.jsx(Gi,{})}),e.jsx(z,{path:"surveys/dashboard",element:e.jsx(Gi,{})}),e.jsx(z,{path:"surveys/management",element:e.jsx(tm,{})}),e.jsx(z,{path:"inventory",element:e.jsx(Zi,{})}),e.jsx(z,{path:"inventory/dashboard",element:e.jsx(Zi,{})}),e.jsx(z,{path:"inventory/management",element:e.jsx(rm,{})}),e.jsx(z,{path:"inventory/reports",element:e.jsx(im,{})}),e.jsx(z,{path:"promotions",element:e.jsx(en,{})}),e.jsx(z,{path:"promotions/dashboard",element:e.jsx(en,{})}),e.jsx(z,{path:"promotions/management",element:e.jsx(lm,{})}),e.jsx(z,{path:"trade-marketing",element:e.jsx(Do,{})}),e.jsx(z,{path:"events",element:e.jsx(Oo,{})}),e.jsx(z,{path:"campaigns",element:e.jsx(Io,{})}),e.jsx(z,{path:"field-agents",element:e.jsx(Di,{})}),e.jsx(z,{path:"field-agents/mapping",element:e.jsx(Mi,{})}),e.jsx(z,{path:"field-agents/boards",element:e.jsx(Vi,{})}),e.jsx(z,{path:"field-agents/products",element:e.jsx(Bi,{})}),e.jsx(z,{path:"field-agents/commission",element:e.jsx(Ki,{})}),e.jsx(z,{path:"customers",element:e.jsx(dm,{})}),e.jsx(z,{path:"customers/:id",element:e.jsx(om,{})}),e.jsx(z,{path:"orders",element:e.jsx(hm,{})}),e.jsx(z,{path:"orders/:id",element:e.jsx(um,{})}),e.jsx(z,{path:"products",element:e.jsx(gm,{})}),e.jsx(z,{path:"products/:id",element:e.jsx(fm,{})}),e.jsx(z,{path:"admin",element:e.jsx(na,{requiredRole:"admin",children:e.jsx(jm,{})})}),e.jsx(z,{path:"admin/users",element:e.jsx(na,{requiredRole:"admin",children:e.jsx(ym,{})})}),e.jsx(z,{path:"admin/settings",element:e.jsx(na,{requiredRole:"admin",children:e.jsx(Nm,{})})}),e.jsx(z,{path:"admin/audit",element:e.jsx(na,{requiredRole:"admin",children:e.jsx(bm,{})})}),e.jsx(z,{index:!0,element:e.jsx(Dt,{to:"dashboard",replace:!0})})]}),e.jsx(z,{path:"*",element:t?e.jsx(Dt,{to:"/dashboard",replace:!0}):e.jsx(Dt,{to:"/auth/login",replace:!0})})]})})})}const _m=new ac({defaultOptions:{queries:{staleTime:1e3*60*5,gcTime:1e3*60*30,retry:(t,a)=>{var s,r;return((s=a==null?void 0:a.response)==null?void 0:s.status)>=400&&((r=a==null?void 0:a.response)==null?void 0:r.status)<500?!1:t<3}},mutations:{retry:1}}});cr.createRoot(document.getElementById("root")).render(e.jsx(Ee.StrictMode,{children:e.jsxs(rc,{client:_m,children:[e.jsxs(Rl,{children:[e.jsx(wm,{}),e.jsx(nd,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#10b981",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]}),e.jsx(jc,{initialIsOpen:!1})]})}));
//# sourceMappingURL=index-B9yz8ZF4.js.map
