# ═══════════════════════════════════════════════════════════════
# SalesSync Backend - Production Configuration
# DEPLOYMENT OPTION 1: Same Server with Reverse Proxy
# ═══════════════════════════════════════════════════════════════

# Server Configuration
NODE_ENV=production
PORT=3000
HOST=0.0.0.0

# ═══════════════════════════════════════════════════════════════
# Database Configuration
# ═══════════════════════════════════════════════════════════════
DB_TYPE=postgres
DB_HOST=localhost
DB_PORT=5432
DB_NAME=salessync
DB_USER=salessync_user
DB_PASSWORD=CHANGE_ME_your_secure_database_password

# Connection Pool Settings
DB_POOL_MIN=2
DB_POOL_MAX=10

# ═══════════════════════════════════════════════════════════════
# JWT Configuration
# GENERATE SECURE RANDOM STRINGS FOR PRODUCTION!
# Example: openssl rand -base64 32
# ═══════════════════════════════════════════════════════════════
JWT_SECRET=CHANGE_ME_generate_random_string_here
JWT_REFRESH_SECRET=CHANGE_ME_generate_different_random_string_here
JWT_EXPIRES_IN=1h
JWT_REFRESH_EXPIRES_IN=7d

# ═══════════════════════════════════════════════════════════════
# CORS Configuration
# For Option 1 (same server), set to your domain
# No need for localhost since frontend is served from same domain
# ═══════════════════════════════════════════════════════════════
CORS_ORIGIN=https://ss.gonxt.tech,https://www.ss.gonxt.tech

# ═══════════════════════════════════════════════════════════════
# File Upload Configuration
# ═══════════════════════════════════════════════════════════════
UPLOAD_DIR=/opt/salessync/uploads
MAX_FILE_SIZE=10485760

# ═══════════════════════════════════════════════════════════════
# Logging Configuration
# ═══════════════════════════════════════════════════════════════
LOG_LEVEL=info
LOG_DIR=/opt/salessync/logs

# ═══════════════════════════════════════════════════════════════
# Security Configuration
# ═══════════════════════════════════════════════════════════════
# Rate limiting
RATE_LIMIT_WINDOW=15
RATE_LIMIT_MAX_REQUESTS=100
AUTH_RATE_LIMIT_MAX=5
AUTH_RATE_LIMIT_WINDOW=15

# Session
SESSION_SECRET=CHANGE_ME_generate_session_secret_here

# ═══════════════════════════════════════════════════════════════
# Email Configuration (Optional)
# ═══════════════════════════════════════════════════════════════
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
EMAIL_FROM=noreply@ss.gonxt.tech

# ═══════════════════════════════════════════════════════════════
# External Services (Optional)
# ═══════════════════════════════════════════════════════════════
# Google Maps API Key (for location features)
GOOGLE_MAPS_API_KEY=your_google_maps_api_key_here

# Twilio (for SMS notifications)
TWILIO_ACCOUNT_SID=your_twilio_account_sid
TWILIO_AUTH_TOKEN=your_twilio_auth_token
TWILIO_PHONE_NUMBER=your_twilio_phone_number

# ═══════════════════════════════════════════════════════════════
# AI Configuration (Optional)
# ═══════════════════════════════════════════════════════════════
OPENAI_API_KEY=your_openai_api_key_here
AI_MODEL=gpt-4

# ═══════════════════════════════════════════════════════════════
# Monitoring & Analytics (Optional)
# ═══════════════════════════════════════════════════════════════
SENTRY_DSN=your_sentry_dsn_here
ANALYTICS_TRACKING_ID=your_google_analytics_id

# ═══════════════════════════════════════════════════════════════
# IMPORTANT NOTES FOR OPTION 1 DEPLOYMENT:
# ═══════════════════════════════════════════════════════════════
# 1. Backend listens on localhost:3000 (not exposed to internet)
# 2. Nginx reverse proxy handles external traffic
# 3. Nginx proxies /api/* to this backend
# 4. CORS_ORIGIN should match your Nginx server_name
# 5. No need for localhost in CORS (same domain)
# 6. Set HOST=0.0.0.0 to allow Nginx to connect
# 7. Make sure to generate secure random strings for secrets!
# ═══════════════════════════════════════════════════════════════

# ═══════════════════════════════════════════════════════════════
# Quick Setup Commands:
# ═══════════════════════════════════════════════════════════════
# 1. Copy this file:
#    cp .env.production.option1 .env
#
# 2. Generate secure secrets:
#    echo "JWT_SECRET=$(openssl rand -base64 32)" >> .env
#    echo "JWT_REFRESH_SECRET=$(openssl rand -base64 32)" >> .env
#    echo "SESSION_SECRET=$(openssl rand -base64 32)" >> .env
#
# 3. Update database password:
#    nano .env  # Change DB_PASSWORD
#
# 4. Update domain:
#    nano .env  # Change CORS_ORIGIN to your domain
#
# 5. Create required directories:
#    mkdir -p /opt/salessync/uploads /opt/salessync/logs
#
# 6. Start with PM2:
#    pm2 start src/server.js --name salessync-backend
# ═══════════════════════════════════════════════════════════════
