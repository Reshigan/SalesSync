# ğŸ—ï¸ SalesSync Architecture Overview

## ğŸ“Š System Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        USER'S BROWSER                           â”‚
â”‚  https://work-1-vmhjvymxmtxtzzmm.prod-runtime.all-hands.dev   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FRONTEND (Vite + React)                      â”‚
â”‚                    Port 12000 - PID 17942                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Login Page    â”‚  â”‚  Dashboard     â”‚  â”‚  Products Page â”‚   â”‚
â”‚  â”‚                â”‚  â”‚                â”‚  â”‚                â”‚   â”‚
â”‚  â”‚  Mock Data âŒ  â”‚  â”‚  Mock Data âŒ  â”‚  â”‚  Mock Data âŒ  â”‚   â”‚
â”‚  â”‚      â†“         â”‚  â”‚      â†“         â”‚  â”‚      â†“         â”‚   â”‚
â”‚  â”‚  Real API âœ…   â”‚  â”‚  Real API âœ…   â”‚  â”‚  Real API âœ…   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚           â”‚                   â”‚                   â”‚            â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                              â”‚                                 â”‚
â”‚                              â–¼                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                   SERVICE LAYER âœ…                        â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚  auth.service.ts      â”‚  product.service.ts              â”‚  â”‚
â”‚  â”‚  customer.service.ts  â”‚  order.service.ts                â”‚  â”‚
â”‚  â”‚  visit.service.ts     â”‚  analytics.service.ts            â”‚  â”‚
â”‚  â”‚  ... (30+ services)                                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                 â”‚
â”‚                              â–¼                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              API CLIENT (api.service.ts) âœ…              â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚  â€¢ Base URL: http://localhost:12001/api                  â”‚  â”‚
â”‚  â”‚  â€¢ Request Interceptor:                                  â”‚  â”‚
â”‚  â”‚    âœ… Adds Authorization: Bearer {token}                 â”‚  â”‚
â”‚  â”‚    âœ… Adds X-Tenant-Code: DEMO                           â”‚  â”‚
â”‚  â”‚  â€¢ Response Interceptor:                                 â”‚  â”‚
â”‚  â”‚    âœ… Handles 401 â†’ Refresh token                        â”‚  â”‚
â”‚  â”‚    âœ… Handles errors                                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ HTTP Requests with:
                            â”‚ - Authorization header
                            â”‚ - X-Tenant-Code header
                            â”‚ - JSON payload
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  BACKEND API (Node.js + Express)                â”‚
â”‚  https://work-2-vmhjvymxmtxtzzmm.prod-runtime.all-hands.dev   â”‚
â”‚                    Port 12001 - PID 18144 âœ…                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                     MIDDLEWARE                            â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚  â€¢ CORS Middleware âœ…                                     â”‚  â”‚
â”‚  â”‚    - Allows vmhjvymxmtxtzzmm.prod-runtime.all-hands.dev  â”‚  â”‚
â”‚  â”‚  â€¢ Tenant Middleware âœ…                                   â”‚  â”‚
â”‚  â”‚    - Validates X-Tenant-Code header                      â”‚  â”‚
â”‚  â”‚  â€¢ Auth Middleware âœ…                                     â”‚  â”‚
â”‚  â”‚    - Validates JWT token                                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                 â”‚
â”‚                              â–¼                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                   240+ API ENDPOINTS âœ…                   â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  Authentication & Users                                  â”‚  â”‚
â”‚  â”‚  â€¢ POST   /api/auth/login                                â”‚  â”‚
â”‚  â”‚  â€¢ POST   /api/auth/register                             â”‚  â”‚
â”‚  â”‚  â€¢ POST   /api/auth/refresh                              â”‚  â”‚
â”‚  â”‚  â€¢ GET    /api/users                                     â”‚  â”‚
â”‚  â”‚  â€¢ PUT    /api/users/:id                                 â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  Products                                                â”‚  â”‚
â”‚  â”‚  â€¢ GET    /api/products                                  â”‚  â”‚
â”‚  â”‚  â€¢ POST   /api/products                                  â”‚  â”‚
â”‚  â”‚  â€¢ PUT    /api/products/:id                              â”‚  â”‚
â”‚  â”‚  â€¢ DELETE /api/products/:id                              â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  Customers                                               â”‚  â”‚
â”‚  â”‚  â€¢ GET    /api/customers                                 â”‚  â”‚
â”‚  â”‚  â€¢ POST   /api/customers                                 â”‚  â”‚
â”‚  â”‚  â€¢ PUT    /api/customers/:id                             â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  Orders                                                  â”‚  â”‚
â”‚  â”‚  â€¢ GET    /api/orders                                    â”‚  â”‚
â”‚  â”‚  â€¢ POST   /api/orders                                    â”‚  â”‚
â”‚  â”‚  â€¢ PUT    /api/orders/:id/status                         â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  Field Operations (Visits, GPS, Routes, Attendance)     â”‚  â”‚
â”‚  â”‚  Trade Marketing (Promotions, Merchandising, Displays)  â”‚  â”‚
â”‚  â”‚  Inventory (Stock, Warehouses, Transfers)               â”‚  â”‚
â”‚  â”‚  Finance (Payments, Collections, Expenses)              â”‚  â”‚
â”‚  â”‚  Commissions (Calculations, Targets, Incentives)        â”‚  â”‚
â”‚  â”‚  Surveys & Feedback                                      â”‚  â”‚
â”‚  â”‚  Analytics & Reports                                     â”‚  â”‚
â”‚  â”‚  KYC & Onboarding                                        â”‚  â”‚
â”‚  â”‚  System & Admin                                          â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  ... 200+ more endpoints                                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                 â”‚
â”‚                              â–¼                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                  DATABASE (SQLite) âœ…                     â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚  File: backend-api/database/salessync.db                 â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  Tables (50+):                                           â”‚  â”‚
â”‚  â”‚  â€¢ users             â†’ Admin, Sales Reps                 â”‚  â”‚
â”‚  â”‚  â€¢ tenants           â†’ DEMO tenant                       â”‚  â”‚
â”‚  â”‚  â€¢ products          â†’ Sample products                   â”‚  â”‚
â”‚  â”‚  â€¢ customers         â†’ Sample customers                  â”‚  â”‚
â”‚  â”‚  â€¢ orders            â†’ Sample orders                     â”‚  â”‚
â”‚  â”‚  â€¢ visits            â†’ Field visit records               â”‚  â”‚
â”‚  â”‚  â€¢ promotions        â†’ Marketing campaigns               â”‚  â”‚
â”‚  â”‚  â€¢ inventory         â†’ Stock levels                      â”‚  â”‚
â”‚  â”‚  â€¢ payments          â†’ Payment records                   â”‚  â”‚
â”‚  â”‚  â€¢ commissions       â†’ Commission calculations           â”‚  â”‚
â”‚  â”‚  â€¢ surveys           â†’ Survey responses                  â”‚  â”‚
â”‚  â”‚  ... 40+ more tables                                     â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  Seed Data âœ…:                                            â”‚  â”‚
â”‚  â”‚  â€¢ 1 Admin user (admin@demo.com)                         â”‚  â”‚
â”‚  â”‚  â€¢ 1 Demo tenant (DEMO)                                  â”‚  â”‚
â”‚  â”‚  â€¢ Sample products, customers, orders                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Request Flow Example: User Logs In

```
1. USER ACTION
   â””â”€â†’ User enters email/password and clicks "Login"

2. FRONTEND (Login Page)
   â””â”€â†’ Calls: authService.login({ email, password })

3. SERVICE LAYER (auth.service.ts)
   â””â”€â†’ Calls: apiClient.post('/auth/login', { email, password })

4. API CLIENT (api.service.ts)
   â””â”€â†’ Request Interceptor:
       â€¢ Adds header: X-Tenant-Code: DEMO
       â€¢ Adds header: Content-Type: application/json
   â””â”€â†’ Sends HTTP POST to: http://localhost:12001/api/auth/login

5. BACKEND API
   â””â”€â†’ CORS Middleware: âœ… Validates origin
   â””â”€â†’ Tenant Middleware: âœ… Validates X-Tenant-Code
   â””â”€â†’ Auth Controller:
       â€¢ Validates email/password
       â€¢ Queries database
       â€¢ Generates JWT tokens
   â””â”€â†’ Returns: {
         success: true,
         data: {
           user: { id, email, role, ... },
           tokens: { access_token, refresh_token }
         }
       }

6. API CLIENT (Response Interceptor)
   â””â”€â†’ Receives response
   â””â”€â†’ No errors, passes through

7. SERVICE LAYER
   â””â”€â†’ Receives response
   â””â”€â†’ Stores token in auth store
   â””â”€â†’ Returns user data

8. FRONTEND (Login Page)
   â””â”€â†’ Receives user data
   â””â”€â†’ Shows success message
   â””â”€â†’ Redirects to dashboard
```

---

## ğŸ”„ Request Flow Example: Loading Products

```
1. USER ACTION
   â””â”€â†’ User navigates to Products page

2. FRONTEND (Products Page)
   â””â”€â†’ useEffect hook triggers
   â””â”€â†’ Calls: productService.getProducts()

3. SERVICE LAYER (product.service.ts)
   â””â”€â†’ Calls: apiClient.get('/products', { params: { page: 1, limit: 10 } })

4. API CLIENT (api.service.ts)
   â””â”€â†’ Request Interceptor:
       â€¢ Adds header: Authorization: Bearer eyJhbGc...
       â€¢ Adds header: X-Tenant-Code: DEMO
   â””â”€â†’ Sends HTTP GET to: http://localhost:12001/api/products?page=1&limit=10

5. BACKEND API
   â””â”€â†’ CORS Middleware: âœ… Validates origin
   â””â”€â†’ Tenant Middleware: âœ… Validates X-Tenant-Code: DEMO
   â””â”€â†’ Auth Middleware: âœ… Validates JWT token
   â””â”€â†’ Products Controller:
       â€¢ Queries database with filters
       â€¢ Applies pagination
   â””â”€â†’ DATABASE:
       SELECT * FROM products 
       WHERE tenant_id = 'DEMO-tenant-id' 
       LIMIT 10 OFFSET 0
   â””â”€â†’ Returns: {
         success: true,
         data: [
           { id, name, sku, price, ... },
           { id, name, sku, price, ... },
           ...
         ],
         pagination: { page: 1, limit: 10, total: 150 }
       }

6. API CLIENT (Response Interceptor)
   â””â”€â†’ Receives response
   â””â”€â†’ No errors, passes through

7. SERVICE LAYER
   â””â”€â†’ Receives response
   â””â”€â†’ Returns data

8. FRONTEND (Products Page)
   â””â”€â†’ Receives product data
   â””â”€â†’ Updates state: setProducts(response.data.data)
   â””â”€â†’ Renders product list
```

---

## ğŸ” Authentication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      AUTHENTICATION FLOW                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 1: LOGIN
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   email/password   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚ Frontend â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                                       â”‚
                                       â”‚ authService.login()
                                       â–¼
                                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                 â”‚ Backend  â”‚
                                 â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                                       â”‚
                                       â”‚ Validates credentials
                                       â”‚ Generates JWT tokens
                                       â–¼
                                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                 â”‚ Database â”‚
                                 â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                                       â”‚
                                       â”‚ Returns user + tokens
                                       â–¼
                                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                 â”‚ Frontend â”‚
                                 â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                                       â”‚
                                       â”‚ Stores tokens
                                       â”‚ in localStorage
                                       â–¼
                                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                 â”‚ Dashboardâ”‚
                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 2: SUBSEQUENT REQUESTS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚ Backend  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚                                 â”‚
     â”‚ Headers:                        â”‚
     â”‚ Authorization: Bearer {token}   â”‚
     â”‚ X-Tenant-Code: DEMO             â”‚
     â”‚                                 â”‚
     â”‚                                 â”‚ Validates token
     â”‚                                 â”‚ Validates tenant
     â”‚                                 â–¼
     â”‚                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚                           â”‚ Database â”‚
     â”‚                           â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚                                 â”‚
     â”‚                                 â”‚ Returns data
     â”‚    â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
     â”‚                                 â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Componentâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 3: TOKEN REFRESH (when token expires)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   request fails     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚ Backend  â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      (401)          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â”‚ Response Interceptor detects 401
      â”‚
      â”‚ Calls: authService.refreshToken()
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   refresh_token     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚ Backend  â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
      â”‚                                â”‚
      â”‚                                â”‚ Validates refresh token
      â”‚                                â”‚ Generates new access token
      â”‚   â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
      â”‚       new access_token         â”‚
      â”‚                                â”‚
      â”‚ Stores new token               â”‚
      â”‚ Retries original request       â”‚
      â”‚                                â”‚
      â–¼                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Success! â”‚                     â”‚ Success! â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¢ Multi-Tenant Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     MULTI-TENANT SUPPORT                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

TENANT DETECTION (Frontend)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  tenant.service.ts                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  Strategy 1: Domain-based                                     â”‚
â”‚  â€¢ demo.salessync.com      â†’ Tenant: DEMO                     â”‚
â”‚  â€¢ pepsi.salessync.com     â†’ Tenant: PEPSI_SA                 â”‚
â”‚  â€¢ client1.salessync.com   â†’ Tenant: CLIENT1_SA               â”‚
â”‚                                                                â”‚
â”‚  Strategy 2: Subdomain-based                                  â”‚
â”‚  â€¢ demo.app.com            â†’ Tenant: DEMO_SA                  â”‚
â”‚  â€¢ client1.app.com         â†’ Tenant: CLIENT1_SA               â”‚
â”‚                                                                â”‚
â”‚  Strategy 3: Path-based                                       â”‚
â”‚  â€¢ app.com/tenant/demo     â†’ Tenant: DEMO_SA                  â”‚
â”‚  â€¢ app.com/tenant/client1  â†’ Tenant: CLIENT1_SA               â”‚
â”‚                                                                â”‚
â”‚  Strategy 4: Default                                          â”‚
â”‚  â€¢ localhost               â†’ Tenant: DEMO                     â”‚
â”‚  â€¢ 127.0.0.1               â†’ Tenant: DEMO                     â”‚
â”‚                                                                â”‚
â”‚  Current Configuration:                                       â”‚
â”‚  â€¢ vmhjvymxmtxtzzmm.prod-runtime.all-hands.dev â†’ DEMO        â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ getTenantCode() â†’ "DEMO"
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API Client adds header to every request:                     â”‚
â”‚  X-Tenant-Code: DEMO                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend validates tenant and applies filters:                 â”‚
â”‚                                                                â”‚
â”‚  â€¢ Looks up tenant in database                                â”‚
â”‚  â€¢ Validates tenant is active                                 â”‚
â”‚  â€¢ All queries filtered by tenant_id                          â”‚
â”‚                                                                â”‚
â”‚  Example:                                                      â”‚
â”‚  SELECT * FROM products WHERE tenant_id = {tenant.id}         â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

DATA ISOLATION
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Tenant: DEMO      â”‚  â”‚  Tenant: PEPSI_SA   â”‚  â”‚  Tenant: CLIENT1  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Users: 10         â”‚  â”‚ â€¢ Users: 50         â”‚  â”‚ â€¢ Users: 25       â”‚
â”‚ â€¢ Products: 100     â”‚  â”‚ â€¢ Products: 500     â”‚  â”‚ â€¢ Products: 200   â”‚
â”‚ â€¢ Customers: 50     â”‚  â”‚ â€¢ Customers: 1000   â”‚  â”‚ â€¢ Customers: 100  â”‚
â”‚ â€¢ Orders: 200       â”‚  â”‚ â€¢ Orders: 5000      â”‚  â”‚ â€¢ Orders: 500     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                        â”‚                          â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Shared Database      â”‚
                    â”‚  All data isolated    â”‚
                    â”‚  by tenant_id         â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ Service Layer Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     SERVICE LAYER STRUCTURE                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

src/services/
â”œâ”€â”€ api.service.ts           â† Base API client (axios instance)
â”‚   â”œâ”€â”€ Request Interceptor
â”‚   â”‚   â”œâ”€â”€ Add Authorization header
â”‚   â”‚   â””â”€â”€ Add X-Tenant-Code header
â”‚   â””â”€â”€ Response Interceptor
â”‚       â”œâ”€â”€ Handle 401 (refresh token)
â”‚       â””â”€â”€ Handle errors
â”‚
â”œâ”€â”€ auth.service.ts          â† Authentication
â”‚   â”œâ”€â”€ login(credentials)
â”‚   â”œâ”€â”€ register(userData)
â”‚   â”œâ”€â”€ logout()
â”‚   â”œâ”€â”€ refreshToken()
â”‚   â””â”€â”€ forgotPassword(email)
â”‚
â”œâ”€â”€ user.service.ts          â† User management
â”‚   â”œâ”€â”€ getUsers(params)
â”‚   â”œâ”€â”€ getUserById(id)
â”‚   â”œâ”€â”€ updateUser(id, data)
â”‚   â”œâ”€â”€ deleteUser(id)
â”‚   â””â”€â”€ getProfile()
â”‚
â”œâ”€â”€ product.service.ts       â† Products
â”‚   â”œâ”€â”€ getProducts(params)
â”‚   â”œâ”€â”€ getProductById(id)
â”‚   â”œâ”€â”€ createProduct(data)
â”‚   â”œâ”€â”€ updateProduct(id, data)
â”‚   â”œâ”€â”€ deleteProduct(id)
â”‚   â””â”€â”€ bulkUpdate(ids, data)
â”‚
â”œâ”€â”€ customer.service.ts      â† Customers
â”‚   â”œâ”€â”€ getCustomers(params)
â”‚   â”œâ”€â”€ getCustomerById(id)
â”‚   â”œâ”€â”€ createCustomer(data)
â”‚   â”œâ”€â”€ updateCustomer(id, data)
â”‚   â””â”€â”€ deleteCustomer(id)
â”‚
â”œâ”€â”€ order.service.ts         â† Orders
â”‚   â”œâ”€â”€ getOrders(params)
â”‚   â”œâ”€â”€ getOrderById(id)
â”‚   â”œâ”€â”€ createOrder(data)
â”‚   â”œâ”€â”€ updateOrderStatus(id, status)
â”‚   â””â”€â”€ cancelOrder(id)
â”‚
â””â”€â”€ ... 25+ more services

Each service follows the same pattern:
1. Import apiClient from api.service.ts
2. Define TypeScript interfaces for data types
3. Create service object with methods
4. Each method calls apiClient.get/post/put/delete
5. Returns promise with typed response
```

---

## ğŸ¨ Component-Service Integration Pattern

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  COMPONENT â†’ SERVICE â†’ API                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

BEFORE (Mock Data) âŒ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ProductList.tsx                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  const products = [                                        â”‚
â”‚    { id: 1, name: 'Fake Product 1', price: 10 },          â”‚
â”‚    { id: 2, name: 'Fake Product 2', price: 20 },          â”‚
â”‚  ]                                                         â”‚
â”‚                                                            â”‚
â”‚  return (                                                  â”‚
â”‚    {products.map(p => <ProductCard key={p.id} {...p} />)} â”‚
â”‚  )                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

AFTER (Real API) âœ…
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ProductList.tsx                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  import { productService } from '@/services/product.service' â”‚
â”‚                                                            â”‚
â”‚  const [products, setProducts] = useState([])             â”‚
â”‚  const [loading, setLoading] = useState(true)             â”‚
â”‚                                                            â”‚
â”‚  useEffect(() => {                                        â”‚
â”‚    const fetchProducts = async () => {                    â”‚
â”‚      try {                                                â”‚
â”‚        setLoading(true)                                   â”‚
â”‚        const response = await productService.getProducts()â”‚
â”‚        setProducts(response.data.data)                    â”‚
â”‚      } catch (error) {                                    â”‚
â”‚        toast.error('Failed to load products')             â”‚
â”‚      } finally {                                          â”‚
â”‚        setLoading(false)                                  â”‚
â”‚      }                                                    â”‚
â”‚    }                                                      â”‚
â”‚    fetchProducts()                                        â”‚
â”‚  }, [])                                                   â”‚
â”‚                                                            â”‚
â”‚  if (loading) return <Spinner />                          â”‚
â”‚                                                            â”‚
â”‚  return (                                                  â”‚
â”‚    {products.map(p => <ProductCard key={p.id} {...p} />)} â”‚
â”‚  )                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  product.service.ts                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  import { apiClient } from './api.service'                â”‚
â”‚                                                            â”‚
â”‚  export const productService = {                          â”‚
â”‚    async getProducts(params?) {                           â”‚
â”‚      return apiClient.get('/products', { params })        â”‚
â”‚    }                                                      â”‚
â”‚  }                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  api.service.ts (API Client)                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  const apiClient = axios.create({                         â”‚
â”‚    baseURL: 'http://localhost:12001/api'                  â”‚
â”‚  })                                                       â”‚
â”‚                                                            â”‚
â”‚  apiClient.interceptors.request.use(config => {           â”‚
â”‚    config.headers.Authorization = `Bearer ${token}`       â”‚
â”‚    config.headers['X-Tenant-Code'] = 'DEMO'               â”‚
â”‚    return config                                          â”‚
â”‚  })                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend API: GET /api/products                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Database: SELECT * FROM products WHERE tenant_id = ...   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Response: { success: true, data: [...products] }         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Data Flow Summary

```
USER ACTION
    â†“
REACT COMPONENT (UI Layer)
    â†“
SERVICE LAYER (Business Logic)
    â†“
API CLIENT (HTTP Layer)
    â†“ [Add Headers: Auth + Tenant]
BACKEND API (Server)
    â†“ [Validate: CORS + Tenant + Auth]
DATABASE (Data Layer)
    â†“ [Filter by tenant_id]
RESPONSE
    â†“
API CLIENT (Parse Response)
    â†“
SERVICE LAYER (Return Data)
    â†“
REACT COMPONENT (Update State)
    â†“
UI UPDATE (Render)
```

---

## ğŸ”§ Configuration Overview

```
ENVIRONMENT VARIABLES

Frontend (.env)
â”œâ”€â”€ VITE_API_BASE_URL=http://localhost:12001/api
â””â”€â”€ (More variables as needed)

Backend (.env)
â”œâ”€â”€ PORT=12001
â”œâ”€â”€ DATABASE_PATH=./database/salessync.db
â”œâ”€â”€ JWT_SECRET=your-secret-key
â”œâ”€â”€ JWT_EXPIRES_IN=24h
â”œâ”€â”€ REFRESH_TOKEN_EXPIRES_IN=7d
â”œâ”€â”€ CORS_ORIGIN=https://work-1-vmhjvymxmtxtzzmm.prod-runtime.all-hands.dev,https://work-2-vmhjvymxmtxtzzmm.prod-runtime.all-hands.dev
â””â”€â”€ NODE_ENV=development
```

---

## ğŸ¯ Key Takeaways

1. **Layered Architecture**: Frontend â†’ Services â†’ API Client â†’ Backend â†’ Database
2. **Automatic Headers**: API client adds auth token and tenant code to all requests
3. **Multi-tenant**: All data filtered by tenant, complete isolation
4. **Token Management**: Automatic token refresh on 401 errors
5. **Type Safety**: TypeScript interfaces for all data types
6. **Error Handling**: Consistent error handling across all services
7. **Reusable Services**: Same service pattern for all modules

---

*This architecture provides a solid foundation for scalable, maintainable, and secure SaaS application.*
